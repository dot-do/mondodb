{"id":"mondodb-043g","title":"GREEN: Wire ConnectionPanel to mondodb RPC to pass e2e tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:50.289355-06:00","updated_at":"2026-01-04T14:23:50.289355-06:00","dependencies":[{"issue_id":"mondodb-043g","depends_on_id":"mondodb-nvk","type":"blocks","created_at":"2026-01-04T14:24:41.153119-06:00","created_by":"daemon"}]}
{"id":"mondodb-056","title":"[REFACTOR] Comparison query operators","description":"Refactor:\n- Create operator registry pattern\n- Optimize SQL generation\n- Add query validation\n- Handle edge cases (null, undefined)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:28.956484-06:00","updated_at":"2026-01-04T11:58:26.705534-06:00","closed_at":"2026-01-04T11:58:26.705534-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-056","depends_on_id":"mondodb-i0r","type":"blocks","created_at":"2026-01-04T11:19:01.832935-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0aa","title":"GREEN: Implement DocumentViewer with expandable JSON tree","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:11.975892-06:00","updated_at":"2026-01-04T14:23:11.975892-06:00","dependencies":[{"issue_id":"mondodb-0aa","depends_on_id":"mondodb-1lv","type":"blocks","created_at":"2026-01-04T14:25:02.321454-06:00","created_by":"daemon"},{"issue_id":"mondodb-0aa","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:47.169954-06:00","created_by":"daemon"}]}
{"id":"mondodb-0cr","title":"Compat tests: Edge cases (null, empty, nested, unicode)","description":"## Task\nCreate compatibility tests for critical edge cases.\n\n## Location\n`test/compatibility/edge-cases/edge-cases.compat.test.ts`\n\n## Null/Undefined Handling\n1. Insert document with null field\n2. Insert document with undefined field (stripped or kept?)\n3. Query for null field value\n4. Query for missing field\n5. $exists:true on null vs missing\n6. Update $set to null vs $unset\n7. Comparison with null ($gt, $lt)\n\n## Empty Values\n1. Empty string '' as field value\n2. Empty object {} as field value\n3. Empty array [] as field value\n4. Empty filter {} (match all)\n5. Empty update {} (what happens?)\n6. Empty projection {}\n\n## Nested Documents  \n1. Deeply nested documents (10+ levels)\n2. Dot notation in queries\n3. Dot notation in updates\n4. Array of objects queries\n5. $elemMatch on nested arrays\n6. Creating nested path with $set\n\n## Special Characters/Unicode\n1. Field names with unicode\n2. Field values with unicode\n3. Field names with special chars (allowed ones)\n4. Regex with unicode\n5. Sort with unicode (collation)\n\n## Array Semantics\n1. Array equality (exact match vs element match)\n2. Query scalar matches array element\n3. Query array matches array (must be exact)\n4. Nested arrays\n\n## Type Coercion\n1. String ObjectId vs ObjectId type\n2. Number string '123' vs number 123\n3. Boolean vs truthy/falsy\n\n## Boundary Conditions\n1. Max document size approaching 16MB\n2. Max field name length\n3. Max nesting depth\n4. Max array length","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:45:06.89949-06:00","updated_at":"2026-01-04T14:14:06.219448-06:00","closed_at":"2026-01-04T14:14:06.219448-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-0cr","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:51:33.707757-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-0cr","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:51:39.004239-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-0cr","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:51:44.306083-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0f6","title":"[REFACTOR] capnweb RPC server","description":"Refactor:\n- Request batching optimization\n- Promise pipelining support\n- Error serialization\n- Resource cleanup on disconnect","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:30.354345-06:00","updated_at":"2026-01-04T12:00:42.580803-06:00","closed_at":"2026-01-04T12:00:42.580803-06:00","close_reason":"Closed"}
{"id":"mondodb-0hy","title":"Compat tests: Element query operators","description":"## Task\nCreate compatibility tests for element query operators.\n\n## Location\n`test/compatibility/query-operators/element.compat.test.ts`\n\n## Operators\n- $exists - Field exists\n- $type - Field type check\n\n## Test Cases\n\n### $exists\n1. $exists:true matches documents with field\n2. $exists:false matches documents without field\n3. $exists:true on null field (TRICKY: field exists but is null)\n4. $exists:true on undefined field\n5. $exists on nested field\n6. $exists on array element\n\n### $type\n1. $type:'string' matches strings\n2. $type:'number' matches numbers (int and double)\n3. $type:'bool' matches booleans\n4. $type:'object' matches embedded documents\n5. $type:'array' matches arrays\n6. $type:'null' matches null values\n7. $type:'objectId' matches ObjectIds\n8. $type:'date' matches Date objects\n9. $type with number codes (legacy)\n10. $type with array of types\n\n## Critical Edge Cases\n```javascript\n// This is the most important edge case:\n{ field: null }  // $exists:true → TRUE (field exists, value is null)\n{ }              // $exists:true → FALSE (field missing)\n{ field: undefined } // Behavior may vary!\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:42:06.632292-06:00","updated_at":"2026-01-04T14:14:06.21685-06:00","closed_at":"2026-01-04T14:14:06.21685-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-0hy","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:49:01.846045-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-0hy","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:49:07.135113-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-0hy","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:49:12.435264-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0js","title":"[EPIC] Storage Layer - Durable Object SQLite","description":"Implement the core Durable Object with SQLite storage for document persistence. This is the foundation of mondodb.","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-04T11:13:40.097233-06:00","updated_at":"2026-01-04T12:07:04.551914-06:00","closed_at":"2026-01-04T12:07:04.551914-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-0js","depends_on_id":"mondodb-ax4","type":"blocks","created_at":"2026-01-04T11:39:30.714312-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0ka","title":"GREEN: Implement $vectorSearch stage in aggregation","description":"## TDD Phase: GREEN\n\n### Modify: `src/translator/aggregation-translator.ts`\n\nAdd case for \\$vectorSearch in translateStage:\n\n\\`\\`\\`typescript\ncase '\\$vectorSearch':\n  if (stageIndex !== 0) {\n    throw new Error('\\$vectorSearch must be first stage in pipeline');\n  }\n  return this.translateVectorSearchStage(stageValue, collectionName, context);\n\\`\\`\\`\n\nImplement translateVectorSearchStage method that:\n1. Uses VectorTranslator to get doc IDs and scores\n2. Generates SQL to fetch documents by IDs\n3. Adds score column for \\$meta projection\n4. Maintains result order by score","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:42.262235-06:00","updated_at":"2026-01-04T14:05:42.262235-06:00","dependencies":[{"issue_id":"mondodb-0ka","depends_on_id":"mondodb-knn","type":"blocks","created_at":"2026-01-04T14:06:47.212781-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0mhz","title":"REFACTOR: QueryHistory - sync across tabs, add search","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:58.9653-06:00","updated_at":"2026-01-04T14:23:58.9653-06:00","dependencies":[{"issue_id":"mondodb-0mhz","depends_on_id":"mondodb-oqd4","type":"blocks","created_at":"2026-01-04T14:24:49.362313-06:00","created_by":"daemon"},{"issue_id":"mondodb-0mhz","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:05.693805-06:00","created_by":"daemon"}]}
{"id":"mondodb-0qai","title":"REFACTOR: Database Browser e2e - add loading states, error boundaries","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:42.849647-06:00","updated_at":"2026-01-04T14:23:42.849647-06:00","dependencies":[{"issue_id":"mondodb-0qai","depends_on_id":"mondodb-ij5v","type":"blocks","created_at":"2026-01-04T14:24:28.573506-06:00","created_by":"daemon"},{"issue_id":"mondodb-0qai","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:49.573478-06:00","created_by":"daemon"}]}
{"id":"mondodb-0rr","title":"[GREEN] Element and array query operators","description":"Implement:\n- translateElement() for $exists, $type\n- translateArray() for $all, $elemMatch, $size\n- Use json_each for array iteration\n- Type mapping MongoDB→SQLite","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:18:00.238527-06:00","updated_at":"2026-01-04T11:58:26.708184-06:00","closed_at":"2026-01-04T11:58:26.708184-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-0rr","depends_on_id":"mondodb-b2f","type":"blocks","created_at":"2026-01-04T11:22:13.351563-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0ve","title":"[RED] MongoClient connection","description":"Write failing tests for:\n- new MongoClient(uri, options) constructor\n- client.connect() establishes connection\n- client.close() terminates connection\n- client.db(name) returns MongoDatabase\n- URI parsing for database name\n- Connection options support","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:24:18.732324-06:00","updated_at":"2026-01-04T12:01:28.032069-06:00","closed_at":"2026-01-04T12:01:28.032069-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-0ve","depends_on_id":"mondodb-e6p","type":"blocks","created_at":"2026-01-04T11:41:31.002068-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-0wg","title":"REFACTOR: StagePalette - stage templates, favorites","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:18.231475-06:00","updated_at":"2026-01-04T14:23:18.231475-06:00","dependencies":[{"issue_id":"mondodb-0wg","depends_on_id":"mondodb-wyi","type":"blocks","created_at":"2026-01-04T14:25:04.055014-06:00","created_by":"daemon"}]}
{"id":"mondodb-0wq","title":"find command with cursor support","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:35.525115-06:00","updated_at":"2026-01-04T14:20:35.525115-06:00","dependencies":[{"issue_id":"mondodb-0wq","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:34.900389-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-13o","title":"Feature: Document List View","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-04T14:22:54.001998-06:00","updated_at":"2026-01-04T14:22:54.001998-06:00"}
{"id":"mondodb-19au","title":"Setup Playwright for e2e testing","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:21.29869-06:00","updated_at":"2026-01-04T14:24:21.29869-06:00","dependencies":[{"issue_id":"mondodb-19au","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:05.27943-06:00","created_by":"daemon"},{"issue_id":"mondodb-19au","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:23.274872-06:00","created_by":"daemon"}]}
{"id":"mondodb-1ah","title":"[EPIC] Aggregation Pipeline","description":"Implement MongoDB aggregation pipeline stages: $match, $project, $group, $sort, $limit, $skip, $lookup, $unwind.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T11:14:12.754312-06:00","updated_at":"2026-01-04T12:07:04.555462-06:00","closed_at":"2026-01-04T12:07:04.555462-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-1ah","depends_on_id":"mondodb-t04","type":"blocks","created_at":"2026-01-04T11:40:07.295433-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-1d6","title":"GREEN: Implement SchemaAnalyzer with sampling and type detection","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:09.074967-06:00","updated_at":"2026-01-04T14:23:09.074967-06:00","dependencies":[{"issue_id":"mondodb-1d6","depends_on_id":"mondodb-gq0","type":"blocks","created_at":"2026-01-04T14:25:05.575178-06:00","created_by":"daemon"},{"issue_id":"mondodb-1d6","depends_on_id":"mondodb-35d","type":"parent-child","created_at":"2026-01-04T14:25:10.32349-06:00","created_by":"daemon"}]}
{"id":"mondodb-1g9","title":"[RED] Logical query operators","description":"Write failing tests for:\n- $and → (cond1) AND (cond2)\n- $or → (cond1) OR (cond2)\n- $not → NOT (condition)\n- $nor → NOT (cond1) AND NOT (cond2)\n- Nested logical operators\n- Empty conditions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:35.754375-06:00","updated_at":"2026-01-04T11:58:26.706011-06:00","closed_at":"2026-01-04T11:58:26.706011-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-1g9","depends_on_id":"mondodb-056","type":"blocks","created_at":"2026-01-04T11:19:07.058713-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-1l3","title":"RED: Database Browser e2e tests - list databases, list collections, navigation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:29.249353-06:00","updated_at":"2026-01-04T14:23:29.249353-06:00","dependencies":[{"issue_id":"mondodb-1l3","depends_on_id":"mondodb-3pn","type":"blocks","created_at":"2026-01-04T14:24:30.83541-06:00","created_by":"daemon"},{"issue_id":"mondodb-1l3","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:46.600082-06:00","created_by":"daemon"}]}
{"id":"mondodb-1lv","title":"RED: Document Viewer unit tests - JSON tree, field expansion, copy values","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:05.564516-06:00","updated_at":"2026-01-04T14:23:05.564516-06:00","dependencies":[{"issue_id":"mondodb-1lv","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:46.042464-06:00","created_by":"daemon"}]}
{"id":"mondodb-1lx0","title":"GREEN: Implement ExportDialog with download progress","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:16.394019-06:00","updated_at":"2026-01-04T14:24:16.394019-06:00","dependencies":[{"issue_id":"mondodb-1lx0","depends_on_id":"mondodb-cavk","type":"blocks","created_at":"2026-01-04T14:25:55.85376-06:00","created_by":"daemon"},{"issue_id":"mondodb-1lx0","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:03.902486-06:00","created_by":"daemon"}]}
{"id":"mondodb-1sw","title":"[REFACTOR] capnweb RPC client","description":"Refactor:\n- Auto-reconnection logic\n- Request deduplication\n- Connection health monitoring\n- TypeScript type inference","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:56.449101-06:00","updated_at":"2026-01-04T12:00:42.582094-06:00","closed_at":"2026-01-04T12:00:42.582094-06:00","close_reason":"Closed"}
{"id":"mondodb-1ue","title":"RED: Document List unit tests - table/JSON toggle, pagination, column sizing","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:05.825459-06:00","updated_at":"2026-01-04T14:23:05.825459-06:00","dependencies":[{"issue_id":"mondodb-1ue","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:38.192056-06:00","created_by":"daemon"}]}
{"id":"mondodb-263t","title":"Integrate LeafyGreen UI design system","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:17.790548-06:00","updated_at":"2026-01-04T14:24:17.790548-06:00","dependencies":[{"issue_id":"mondodb-263t","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:01.015197-06:00","created_by":"daemon"},{"issue_id":"mondodb-263t","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:20.822349-06:00","created_by":"daemon"}]}
{"id":"mondodb-28p","title":"[RED] capnweb RPC server","description":"Write failing tests for:\n- Worker exports RpcTarget for MongoDB API\n- newWorkersRpcResponse handles requests\n- HTTP batch protocol support\n- WebSocket streaming support\n- Method dispatch to Durable Object\n- Stub management for cursors","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:17.218874-06:00","updated_at":"2026-01-04T12:00:42.579583-06:00","closed_at":"2026-01-04T12:00:42.579583-06:00","close_reason":"Closed"}
{"id":"mondodb-2b3l","title":"GREEN: Wire ChangeStreamViewer to watch() via WebSocket RPC","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:57.893598-06:00","updated_at":"2026-01-04T14:23:57.893598-06:00","dependencies":[{"issue_id":"mondodb-2b3l","depends_on_id":"mondodb-t9e4","type":"blocks","created_at":"2026-01-04T14:25:30.7806-06:00","created_by":"daemon"},{"issue_id":"mondodb-2b3l","depends_on_id":"mondodb-b1t7","type":"parent-child","created_at":"2026-01-04T14:25:36.794231-06:00","created_by":"daemon"}]}
{"id":"mondodb-2fh","title":"Text Search with $text operator","description":"Implement text search functionality:\n- createIndex({field: 'text'}) for text indexes\n- $text query operator with $search, $language, $caseSensitive\n- $meta textScore projection\n- Use SQLite FTS5 for full-text search","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-04T13:09:33.440614-06:00","updated_at":"2026-01-04T13:33:23.522938-06:00","closed_at":"2026-01-04T13:33:23.522938-06:00","close_reason":"Closed"}
{"id":"mondodb-2ht","title":"[REFACTOR] Array update operators","description":"Refactor:\n- Optimize array operations with CTE\n- Add position modifiers support\n- Implement $sort modifier\n- Handle large array edge cases","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:23:49.929317-06:00","updated_at":"2026-01-04T11:59:48.990401-06:00","closed_at":"2026-01-04T11:59:48.990401-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-2ht","depends_on_id":"mondodb-z2s","type":"blocks","created_at":"2026-01-04T11:41:25.661922-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-2jm","title":"[GREEN] Document CRUD operations in SQLite","description":"Implement:\n- INSERT with json() for document storage\n- ObjectId generation for _id\n- SELECT with json_extract for queries\n- UPDATE with json_set/json_replace\n- DELETE with WHERE clause\n- Proper parameterized queries","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:23.147309-06:00","updated_at":"2026-01-04T12:07:04.550989-06:00","closed_at":"2026-01-04T12:07:04.550989-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-2jm","depends_on_id":"mondodb-omw","type":"blocks","created_at":"2026-01-04T11:16:24.16891-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-2r5","title":"[REFACTOR] MongoCursor iteration","description":"Refactor:\n- Streaming support for large results\n- Memory-efficient iteration\n- Cursor batching optimization\n- Timeout handling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:28:29.481112-06:00","updated_at":"2026-01-04T11:58:42.736842-06:00","closed_at":"2026-01-04T11:58:42.736842-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-2r5","depends_on_id":"mondodb-o6j","type":"blocks","created_at":"2026-01-04T11:42:29.96775-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-2t4","title":"RED: Env types for Vectorize and AI bindings","description":"## TDD Phase: RED (Write Failing Tests)\n\n### Test File: `test/unit/vector-search/env-types.test.ts`\n\n\\`\\`\\`typescript\nimport { describe, it, expect } from 'vitest';\nimport type { Env } from '../../../src/types/env';\n\ndescribe('Env types for vector search', () =\u003e {\n  it('should have optional VECTORIZE binding', () =\u003e {\n    const env: Env = { MONDO_DATABASE: {} as any };\n    expect(env.VECTORIZE).toBeUndefined();\n  });\n\n  it('should have optional AI binding', () =\u003e {\n    const env: Env = { MONDO_DATABASE: {} as any };\n    expect(env.AI).toBeUndefined();\n  });\n\n  it('should accept EMBEDDING_MODEL config', () =\u003e {\n    const env: Env = { \n      MONDO_DATABASE: {} as any,\n      EMBEDDING_MODEL: '@cf/baai/bge-m3'\n    };\n    expect(env.EMBEDDING_MODEL).toBe('@cf/baai/bge-m3');\n  });\n\n  it('should have VectorizeIndex type with query method', () =\u003e {\n    // Type check - VectorizeIndex should have query, upsert, deleteByIds\n    const vectorize: VectorizeIndex = {} as any;\n    expect(typeof vectorize.query).toBe('function');\n    expect(typeof vectorize.upsert).toBe('function');\n    expect(typeof vectorize.deleteByIds).toBe('function');\n  });\n});\n\\`\\`\\`\n\n### Expected: Tests fail because types don't exist yet","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:01.267375-06:00","updated_at":"2026-01-04T14:27:05.571004-06:00","closed_at":"2026-01-04T14:27:05.571004-06:00","close_reason":"Closed"}
{"id":"mondodb-2y22","title":"GREEN: Implement ExportToCode with language templates","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:20.730928-06:00","updated_at":"2026-01-04T14:24:20.730928-06:00","dependencies":[{"issue_id":"mondodb-2y22","depends_on_id":"mondodb-4stf","type":"blocks","created_at":"2026-01-04T14:25:22.138793-06:00","created_by":"daemon"}]}
{"id":"mondodb-35d","title":"Feature: Schema Analysis","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-04T14:22:56.397458-06:00","updated_at":"2026-01-04T14:22:56.397458-06:00"}
{"id":"mondodb-3e0","title":"[EPIC] Query Translation Engine","description":"Translate MongoDB query operators to SQL WHERE clauses. Supports comparison, logical, and element operators.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:13:46.545664-06:00","updated_at":"2026-01-04T12:07:04.554745-06:00","closed_at":"2026-01-04T12:07:04.554745-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-3e0","depends_on_id":"mondodb-86g","type":"blocks","created_at":"2026-01-04T11:39:35.936499-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-3hl","title":"GREEN: Implement DocumentList component to pass unit tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:16.622387-06:00","updated_at":"2026-01-04T14:23:16.622387-06:00","dependencies":[{"issue_id":"mondodb-3hl","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:39.643563-06:00","created_by":"daemon"},{"issue_id":"mondodb-3hl","depends_on_id":"mondodb-1ue","type":"blocks","created_at":"2026-01-04T14:24:56.327687-06:00","created_by":"daemon"}]}
{"id":"mondodb-3ib","title":"Feature: Document CRUD Operations","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-04T14:22:52.80318-06:00","updated_at":"2026-01-04T14:22:52.80318-06:00"}
{"id":"mondodb-3kh","title":"Create TestProvider interface and types","description":"## Task\nCreate the unified provider interface that both MongoDB and mondodb will implement.\n\n## Location\n`test/compatibility/providers/types.ts`\n\n## Interface Design\n```typescript\nexport interface TestProvider {\n  readonly name: 'mondodb' | 'mongodb'\n  connect(): Promise\u003cvoid\u003e\n  disconnect(): Promise\u003cvoid\u003e\n  database(name: string): TestDatabase\n  dropDatabase(name: string): Promise\u003cvoid\u003e\n}\n\nexport interface TestDatabase {\n  readonly databaseName: string\n  collection\u003cT = Document\u003e(name: string): TestCollection\u003cT\u003e\n  dropCollection(name: string): Promise\u003cvoid\u003e\n}\n\nexport interface TestCollection\u003cT = Document\u003e {\n  readonly collectionName: string\n  // CRUD\n  insertOne(doc: T, options?: InsertOneOptions): Promise\u003cInsertOneResult\u003e\n  insertMany(docs: T[], options?: InsertManyOptions): Promise\u003cInsertManyResult\u003e\n  findOne(filter: Filter\u003cT\u003e, options?: FindOptions): Promise\u003cT | null\u003e\n  find(filter: Filter\u003cT\u003e, options?: FindOptions): TestCursor\u003cT\u003e\n  updateOne(filter: Filter\u003cT\u003e, update: UpdateFilter\u003cT\u003e, options?: UpdateOptions): Promise\u003cUpdateResult\u003e\n  updateMany(filter: Filter\u003cT\u003e, update: UpdateFilter\u003cT\u003e, options?: UpdateOptions): Promise\u003cUpdateResult\u003e\n  deleteOne(filter: Filter\u003cT\u003e, options?: DeleteOptions): Promise\u003cDeleteResult\u003e\n  deleteMany(filter: Filter\u003cT\u003e, options?: DeleteOptions): Promise\u003cDeleteResult\u003e\n  replaceOne(filter: Filter\u003cT\u003e, replacement: T, options?: ReplaceOptions): Promise\u003cUpdateResult\u003e\n  // FindAndModify\n  findOneAndUpdate(filter: Filter\u003cT\u003e, update: UpdateFilter\u003cT\u003e, options?: FindOneAndUpdateOptions): Promise\u003cT | null\u003e\n  findOneAndDelete(filter: Filter\u003cT\u003e, options?: FindOneAndDeleteOptions): Promise\u003cT | null\u003e\n  findOneAndReplace(filter: Filter\u003cT\u003e, replacement: T, options?: FindOneAndReplaceOptions): Promise\u003cT | null\u003e\n  // Other\n  countDocuments(filter?: Filter\u003cT\u003e): Promise\u003cnumber\u003e\n  aggregate\u003cR = Document\u003e(pipeline: Document[]): TestCursor\u003cR\u003e\n  bulkWrite(ops: BulkWriteOperation\u003cT\u003e[], options?: BulkWriteOptions): Promise\u003cBulkWriteResult\u003e\n  drop(): Promise\u003cvoid\u003e\n}\n\nexport interface TestCursor\u003cT\u003e {\n  toArray(): Promise\u003cT[]\u003e\n  next(): Promise\u003cT | null\u003e\n  hasNext(): Promise\u003cboolean\u003e\n  limit(n: number): TestCursor\u003cT\u003e\n  skip(n: number): TestCursor\u003cT\u003e\n  sort(spec: SortSpec): TestCursor\u003cT\u003e\n  project(spec: ProjectionSpec): TestCursor\u003cT\u003e\n}\n```\n\n## TDD\nTest that types compile correctly and interfaces are exported.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:37:53.1476-06:00","updated_at":"2026-01-04T14:01:09.45254-06:00","closed_at":"2026-01-04T14:01:09.45254-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-3kh","depends_on_id":"mondodb-8qj","type":"blocks","created_at":"2026-01-04T13:45:33.531393-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-3ks","title":"FunctionExecutor core module","description":"## Description\nCore class for executing user functions in isolated V8 workers.\n\n## TDD Test Cases (RED)\n```typescript\ndescribe('FunctionExecutor', () =\u003e {\n  describe('capability detection', () =\u003e {\n    it('throws helpful error when LOADER binding missing')\n    it('initializes successfully when LOADER present')\n  })\n  \n  describe('single execution', () =\u003e {\n    it('executes simple arrow function')\n    it('executes function declaration')\n    it('passes arguments correctly')\n    it('returns computed value')\n    it('handles errors gracefully')\n    it('enforces timeout')\n  })\n  \n  describe('batch execution', () =\u003e {\n    it('processes multiple arg sets in single isolate')\n    it('returns results in same order as inputs')\n    it('handles partial failures')\n  })\n  \n  describe('security', () =\u003e {\n    it('blocks fetch() calls (globalOutbound: null)')\n    it('has no access to parent env bindings')\n    it('cannot access global state between calls')\n  })\n})\n```\n\n## Implementation\n- src/executor/function-executor.ts\n- Types in src/types/function.ts\n- Extend Env interface with optional LOADER\n\n## API\n```typescript\nclass FunctionExecutor {\n  constructor(env: Env)\n  \n  async execute(body: string, args: unknown[], timeout?: number): Promise\u003cunknown\u003e\n  async executeBatch(body: string, argsArray: unknown[][], timeout?: number): Promise\u003cunknown[]\u003e\n}\n```","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T13:31:05.988451-06:00","updated_at":"2026-01-04T13:49:21.034014-06:00","closed_at":"2026-01-04T13:49:21.034014-06:00","close_reason":"Implemented with 73 passing tests","dependencies":[{"issue_id":"mondodb-3ks","depends_on_id":"mondodb-cnm","type":"blocks","created_at":"2026-01-04T13:32:33.628103-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-3pn","title":"RED: Database Browser unit tests - tree state, expand/collapse, selection","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:09.732275-06:00","updated_at":"2026-01-04T14:23:09.732275-06:00","dependencies":[{"issue_id":"mondodb-3pn","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:41.290654-06:00","created_by":"daemon"}]}
{"id":"mondodb-3wr","title":"Compat tests: Evaluation query operators","description":"## Task\nCreate compatibility tests for evaluation query operators.\n\n## Location\n`test/compatibility/query-operators/evaluation.compat.test.ts`\n\n## Operators\n- $regex - Regular expression match\n- $expr - Aggregation expressions in query\n- $mod - Modulo operation\n- $text - Text search (if supported)\n\n## Test Cases\n\n### $regex\n1. Basic regex match\n2. Case-insensitive with $options:'i'\n3. Multiline with $options:'m'\n4. Anchors ^ and $\n5. $regex with string pattern\n6. $regex with RegExp object\n7. $regex on non-string field\n8. $not with $regex\n\n### $expr\n1. Field comparison $expr:{$gt:['$a','$b']}\n2. Arithmetic in expression\n3. $expr with $and/$or\n4. Access nested fields in $expr\n\n### $mod\n1. $mod:[divisor, remainder]\n2. $mod on non-numeric field\n3. $mod with negative numbers\n4. $mod with floats\n\n## Edge Cases\n- Regex special characters escaping\n- Unicode in regex\n- Empty string regex\n- Very long regex (performance)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:42:43.762379-06:00","updated_at":"2026-01-04T14:31:24.667825-06:00","closed_at":"2026-01-04T14:31:24.667825-06:00","close_reason":"Compat tests created","dependencies":[{"issue_id":"mondodb-3wr","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:49:33.610479-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-3wr","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:49:38.907868-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-3wr","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:49:44.1978-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-4avn","title":"REFACTOR: PipelinePreview - streaming results, memory limits","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:08.52778-06:00","updated_at":"2026-01-04T14:24:08.52778-06:00","dependencies":[{"issue_id":"mondodb-4avn","depends_on_id":"mondodb-o47v","type":"blocks","created_at":"2026-01-04T14:25:20.975891-06:00","created_by":"daemon"}]}
{"id":"mondodb-4jc","title":"Expression translator $function support","description":"## Description\nAdd $function operator to expression-translator.ts\n\n## TDD Test Cases (RED)\n```typescript\ndescribe('translateExpression - $function', () =\u003e {\n  it('parses $function with body, args, lang')\n  it('extracts field references from args')\n  it('validates lang is \"js\"')\n  it('throws on missing body')\n  it('throws on missing args')\n  it('returns FunctionExpression marker for deferred execution')\n})\n\ndescribe('$function arg resolution', () =\u003e {\n  it('resolves $fieldName to document values')\n  it('handles nested field paths $user.name')\n  it('passes literal values unchanged')\n  it('handles mixed field refs and literals')\n})\n```\n\n## Implementation\n```typescript\n// New marker type for deferred function execution\ninterface FunctionExpression {\n  __type: 'function'\n  body: string\n  argPaths: string[]  // Field paths to extract\n  literals: Map\u003cnumber, unknown\u003e  // Position → literal value\n}\n\n// In translateExpression\nif (operator === '$function') {\n  return createFunctionMarker(expr.$function)\n}\n```\n\n## Files\n- src/translator/stages/expression-translator.ts\n- src/types/function.ts","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T13:31:36.849168-06:00","updated_at":"2026-01-04T13:49:21.034836-06:00","closed_at":"2026-01-04T13:49:21.034836-06:00","close_reason":"Implemented with 73 passing tests","dependencies":[{"issue_id":"mondodb-4jc","depends_on_id":"mondodb-cnm","type":"blocks","created_at":"2026-01-04T13:32:38.90438-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-4jw","title":"GREEN: Implement Env types for Vectorize/AI","description":"## TDD Phase: GREEN (Make Tests Pass)\n\n### Implementation: `src/types/env.ts`\n\n\\`\\`\\`typescript\nexport interface Env {\n  // Existing\n  MONDO_DATABASE: DurableObjectNamespace;\n  \n  // Vector search bindings (optional)\n  VECTORIZE?: VectorizeIndex;\n  AI?: Ai;\n  \n  // Configuration (optional)\n  EMBEDDING_MODEL?: string;\n  EMBEDDING_ENABLED?: string;\n}\n\\`\\`\\`\n\n### Implementation: `src/types/vectorize.ts`\n\n\\`\\`\\`typescript\n// Re-export Cloudflare types or define interfaces\nexport interface VectorizeVector {\n  id: string;\n  namespace?: string;\n  values: number[] | Float32Array | Float64Array;\n  metadata?: Record\u003cstring, VectorizeMetadataValue\u003e;\n}\n\nexport type VectorizeMetadataValue = string | number | boolean | string[] | null;\n\nexport interface VectorizeQueryOptions {\n  topK: number;\n  namespace?: string;\n  filter?: Record\u003cstring, unknown\u003e;\n  returnValues?: boolean;\n  returnMetadata?: 'none' | 'indexed' | 'all';\n}\n\nexport interface VectorizeMatch {\n  id: string;\n  score: number;\n  values?: number[];\n  metadata?: Record\u003cstring, VectorizeMetadataValue\u003e;\n}\n\nexport interface VectorizeQueryResult {\n  count: number;\n  matches: VectorizeMatch[];\n}\n\nexport interface VectorizeMutationResult {\n  mutationId: string;\n}\n\\`\\`\\`\n\n### Expected: All type tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:19.261721-06:00","updated_at":"2026-01-04T14:27:12.294574-06:00","closed_at":"2026-01-04T14:27:12.294574-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-4jw","depends_on_id":"mondodb-2t4","type":"blocks","created_at":"2026-01-04T14:06:08.88297-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-4l5","title":"[RED] MongoCursor iteration","description":"Write failing tests for:\n- cursor.toArray() returns all documents\n- cursor.next() returns next document\n- cursor.hasNext() checks for more\n- cursor.forEach(callback) iterates\n- cursor.map(fn) transforms\n- cursor.close() releases resources\n- Symbol.asyncIterator support","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:26:48.844688-06:00","updated_at":"2026-01-04T11:58:42.735482-06:00","closed_at":"2026-01-04T11:58:42.735482-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-4l5","depends_on_id":"mondodb-b4u","type":"blocks","created_at":"2026-01-04T11:42:19.225609-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-4n6","title":"Transaction Support","description":"Implement multi-document transactions:\n- session.startTransaction()\n- session.commitTransaction() / abortTransaction()\n- Map to SQLite BEGIN/COMMIT/ROLLBACK\n- Transaction isolation levels\n- Timeout and retry logic","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T13:09:33.402831-06:00","updated_at":"2026-01-04T13:33:23.520901-06:00","closed_at":"2026-01-04T13:33:23.520901-06:00","close_reason":"Closed"}
{"id":"mondodb-4r9","title":"Compat tests: Error codes and messages","description":"## Task\nCreate compatibility tests for error behavior.\n\n## Location\n`test/compatibility/errors/errors.compat.test.ts`\n\n## Error Codes to Verify\n\n### Duplicate Key (11000)\n1. insertOne with duplicate _id\n2. insertMany with duplicate in batch\n3. updateOne with upsert causing duplicate\n4. Error message contains key info\n\n### Invalid Operations\n1. Invalid query operator (unknown $xyz)\n2. Invalid update operator\n3. Update with both operators and replacement\n4. Invalid aggregation stage\n5. Invalid BSON type\n\n### Type Errors\n1. $inc on non-numeric field\n2. $push on non-array field\n3. Invalid ObjectId string\n\n### Validation Errors\n1. Document too large (16MB limit)\n2. Invalid field name (contains $)\n3. Invalid field name (contains .)\n4. Nested depth limit\n\n## Test Pattern\n```typescript\nit('duplicate key throws error code 11000', async () =\u003e {\n  const doc = { _id: new ObjectId() }\n  \n  await mongoCol.insertOne(doc)\n  await mondoCol.insertOne({ ...doc })\n  \n  let mongoError: any, mondoError: any\n  \n  try {\n    await mongoCol.insertOne(doc)\n  } catch (e) { mongoError = e }\n  \n  try {\n    await mondoCol.insertOne({ ...doc })  \n  } catch (e) { mondoError = e }\n  \n  expect(mongoError.code).toBe(11000)\n  expect(mondoError.code).toBe(11000)\n  // May also verify error message pattern\n})\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:44:45.447414-06:00","updated_at":"2026-01-04T14:31:24.681455-06:00","closed_at":"2026-01-04T14:31:24.681455-06:00","close_reason":"Compat tests created","dependencies":[{"issue_id":"mondodb-4r9","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:51:17.819338-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-4r9","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:51:23.109065-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-4r9","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:51:28.407256-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-4stf","title":"RED: Export to Code unit tests - JS, Python, Java generation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:19.538867-06:00","updated_at":"2026-01-04T14:24:19.538867-06:00","dependencies":[{"issue_id":"mondodb-4stf","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:41.386007-06:00","created_by":"daemon"}]}
{"id":"mondodb-50p","title":"RED: Stage Palette unit tests - stage categories, drag initiation, search","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:05.366708-06:00","updated_at":"2026-01-04T14:23:05.366708-06:00","dependencies":[{"issue_id":"mondodb-50p","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:36.508312-06:00","created_by":"daemon"}]}
{"id":"mondodb-5c7","title":"Implement MondoDBProvider (mondodb client wrapper)","description":"## Task\nImplement TestProvider for mondodb, wrapping our MongoClient.\n\n## Location\n`test/compatibility/providers/mondodb-provider.ts`\n\n## Implementation\n```typescript\nimport { MongoClient } from '../../../src/client/mongo-client'\nimport { MongoDatabase } from '../../../src/client/mongo-database'  \nimport { MongoCollection } from '../../../src/client/mongo-collection'\nimport { TestProvider, TestDatabase, TestCollection, TestCursor } from './types'\n\nexport class MondoDBProvider implements TestProvider {\n  readonly name = 'mondodb' as const\n  private client!: MongoClient\n  private databases: Map\u003cstring, MondoDBDatabase\u003e = new Map()\n  \n  async connect(): Promise\u003cvoid\u003e {\n    this.client = new MongoClient('mondodb://localhost:27017')\n    await this.client.connect()\n  }\n  \n  async disconnect(): Promise\u003cvoid\u003e {\n    await this.client?.close()\n    this.databases.clear()\n  }\n  \n  database(name: string): TestDatabase {\n    if (!this.databases.has(name)) {\n      this.databases.set(name, new MondoDBDatabase(this.client.db(name)))\n    }\n    return this.databases.get(name)!\n  }\n  \n  async dropDatabase(name: string): Promise\u003cvoid\u003e {\n    const db = this.database(name)\n    // Drop all collections in the database\n  }\n}\n\nclass MondoDBDatabase implements TestDatabase {\n  constructor(private db: MongoDatabase) {}\n  \n  get databaseName(): string { return this.db.databaseName }\n  \n  collection\u003cT\u003e(name: string): TestCollection\u003cT\u003e {\n    return new MondoDBCollection(this.db.collection(name))\n  }\n}\n\n// Wrap mondodb Collection to match TestCollection interface  \nclass MondoDBCollection\u003cT\u003e implements TestCollection\u003cT\u003e {\n  // Direct passthrough to mondodb methods\n}\n\n// Wrap mondodb Cursor to match TestCursor interface\nclass MondoDBCursor\u003cT\u003e implements TestCursor\u003cT\u003e {\n  // Wrap FindCursor methods\n}\n```\n\n## TDD Tests\n1. Can connect with mondodb:// URI\n2. Can perform basic CRUD operations\n3. Can disconnect cleanly\n4. Multiple databases work independently","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:38:30.770791-06:00","updated_at":"2026-01-04T14:01:09.451437-06:00","closed_at":"2026-01-04T14:01:09.451437-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-5c7","depends_on_id":"mondodb-3kh","type":"blocks","created_at":"2026-01-04T13:45:44.124977-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-5jvs","title":"REFACTOR: StageEditor - autocomplete fields, expression builder","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:04.378867-06:00","updated_at":"2026-01-04T14:24:04.378867-06:00","dependencies":[{"issue_id":"mondodb-5jvs","depends_on_id":"mondodb-tqsz","type":"blocks","created_at":"2026-01-04T14:25:10.104138-06:00","created_by":"daemon"}]}
{"id":"mondodb-5rf","title":"Admin commands (ping, buildInfo, listDatabases, listCollections)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:30.176828-06:00","updated_at":"2026-01-04T14:20:30.176828-06:00","dependencies":[{"issue_id":"mondodb-5rf","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:29.550807-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-5tq","title":"[RED] MongoDatabase operations","description":"Write failing tests for:\n- db.collection(name) returns MongoCollection\n- db.listCollections() returns cursor\n- db.createCollection(name, options)\n- db.dropCollection(name)\n- db.command() executes database command","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:25:37.144042-06:00","updated_at":"2026-01-04T12:01:28.033767-06:00","closed_at":"2026-01-04T12:01:28.033767-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-5tq","depends_on_id":"mondodb-wic","type":"blocks","created_at":"2026-01-04T11:41:47.050408-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-5tt","title":"RED: Index List unit tests - display indexes, show properties, TTL info","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:04.851522-06:00","updated_at":"2026-01-04T14:23:04.851522-06:00"}
{"id":"mondodb-611","title":"BSON codec integration","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:19.484091-06:00","updated_at":"2026-01-04T14:22:14.627478-06:00","dependencies":[{"issue_id":"mondodb-611","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:18.885487-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-65n","title":"TCP server with OP_MSG/OP_QUERY parsing","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:14.12928-06:00","updated_at":"2026-01-04T14:22:09.282464-06:00","dependencies":[{"issue_id":"mondodb-65n","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:13.519443-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-65u","title":"[GREEN] MongoCollection CRUD","description":"Implement MongoCollection class:\n- insertOne/Many with ObjectId generation\n- find/findOne using QueryTranslator\n- updateOne/Many using UpdateTranslator\n- deleteOne/Many with filter translation\n- Return proper result objects (InsertOneResult, etc.)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:26:17.075226-06:00","updated_at":"2026-01-04T12:01:28.035369-06:00","closed_at":"2026-01-04T12:01:28.035369-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-65u","depends_on_id":"mondodb-byh","type":"blocks","created_at":"2026-01-04T11:42:08.490917-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-67o","title":"[RED] Comparison query operators","description":"Write failing tests for translating:\n- $eq → json_extract(data, path) = ?\n- $ne → json_extract(data, path) != ?\n- $gt, $gte, $lt, $lte → comparison operators\n- $in → IN (?, ?, ?)\n- $nin → NOT IN (?, ?, ?)\n- Nested field paths (a.b.c)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:16.770085-06:00","updated_at":"2026-01-04T11:58:26.704205-06:00","closed_at":"2026-01-04T11:58:26.704205-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-67o","depends_on_id":"mondodb-3e0","type":"blocks","created_at":"2026-01-04T11:18:51.39017-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-6hhd","title":"RED: Stage Editor unit tests - $match, $project, $group, $sort forms","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:01.972485-06:00","updated_at":"2026-01-04T14:24:01.972485-06:00","dependencies":[{"issue_id":"mondodb-6hhd","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:38.877175-06:00","created_by":"daemon"}]}
{"id":"mondodb-6ht1","title":"GREEN: Wire Import/Export to insertMany/find with cursor","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:18.763777-06:00","updated_at":"2026-01-04T14:24:18.763777-06:00","dependencies":[{"issue_id":"mondodb-6ht1","depends_on_id":"mondodb-h0yj","type":"blocks","created_at":"2026-01-04T14:25:59.265965-06:00","created_by":"daemon"},{"issue_id":"mondodb-6ht1","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:06.590963-06:00","created_by":"daemon"}]}
{"id":"mondodb-6md","title":"Compat tests: findOne and find","description":"## Task\nCreate compatibility tests for find operations.\n\n## Location\n`test/compatibility/crud/find.compat.test.ts`\n\n## Test Cases\n\n### findOne\n1. Find existing document - returns document\n2. Find non-existent - returns null\n3. Empty filter {} - returns any document\n4. Filter by _id (ObjectId)\n5. Filter by _id (string) - type coercion\n6. Filter with projection (inclusion)\n7. Filter with projection (exclusion)\n8. Projection excludes _id\n9. Nested field filter (dot notation)\n10. Array element filter\n\n### find (cursor)\n1. Returns all matching documents\n2. Empty result set - empty array\n3. Cursor.toArray() returns correct documents\n4. Cursor.limit() restricts results\n5. Cursor.skip() offsets results\n6. Cursor.sort() orders results (ascending)\n7. Cursor.sort() orders results (descending)\n8. Cursor.sort() with multiple fields\n9. Chaining limit().skip().sort()\n10. Cursor.next() iteration\n11. Cursor.hasNext() correctness\n12. Projection via cursor\n13. Large result set handling\n\n### Edge Cases\n1. Find with null field value\n2. Find where field doesn't exist\n3. Sort with null values (ordering)\n4. Sort with mixed types\n5. Empty projection object behavior","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:40:01.374078-06:00","updated_at":"2026-01-04T14:08:43.75207-06:00","closed_at":"2026-01-04T14:08:43.75207-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-6md","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:47:00.734808-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-6md","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:47:06.043734-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-6md","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:47:11.342275-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-78lt","title":"GREEN: Implement InsertDocumentDialog with CodeMirror JSON editor","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:57.687557-06:00","updated_at":"2026-01-04T14:23:57.687557-06:00","dependencies":[{"issue_id":"mondodb-78lt","depends_on_id":"mondodb-vxa2","type":"blocks","created_at":"2026-01-04T14:25:07.724747-06:00","created_by":"daemon"},{"issue_id":"mondodb-78lt","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:02.297445-06:00","created_by":"daemon"}]}
{"id":"mondodb-79o","title":"[EPIC] Local Development - Miniflare Integration","description":"Support local filesystem storage via Miniflare for testing and development.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:14:25.054412-06:00","updated_at":"2026-01-04T12:07:04.552807-06:00","closed_at":"2026-01-04T12:07:04.552807-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-79o","depends_on_id":"mondodb-86g","type":"blocks","created_at":"2026-01-04T11:40:02.066706-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-7i9f","title":"RED: Aggregation Builder e2e tests - build pipeline, run, view results","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:23.491315-06:00","updated_at":"2026-01-04T14:24:23.491315-06:00","dependencies":[{"issue_id":"mondodb-7i9f","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:42.544412-06:00","created_by":"daemon"}]}
{"id":"mondodb-7io","title":"[GREEN] Logical query operators","description":"Implement:\n- translateLogical() for $and, $or, $not, $nor\n- Recursive query translation\n- Proper parentheses grouping\n- Short-circuit optimization\n- Handle implicit $and for multiple conditions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:41.818496-06:00","updated_at":"2026-01-04T11:58:26.706468-06:00","closed_at":"2026-01-04T11:58:26.706468-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-7io","depends_on_id":"mondodb-1g9","type":"blocks","created_at":"2026-01-04T11:19:12.284927-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-7la","title":"Feature: Database/Collection Browser","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-04T14:22:54.041782-06:00","updated_at":"2026-01-04T14:22:54.041782-06:00"}
{"id":"mondodb-7nps","title":"Create mondodb RPC client for studio","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:25.311212-06:00","updated_at":"2026-01-04T14:24:25.311212-06:00","dependencies":[{"issue_id":"mondodb-7nps","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:09.016984-06:00","created_by":"daemon"},{"issue_id":"mondodb-7nps","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:25.937452-06:00","created_by":"daemon"}]}
{"id":"mondodb-7ty","title":"RED: Query Bar unit tests - CodeMirror integration, query validation, autocomplete","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:06.422037-06:00","updated_at":"2026-01-04T14:23:06.422037-06:00","dependencies":[{"issue_id":"mondodb-7ty","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:00.025941-06:00","created_by":"daemon"}]}
{"id":"mondodb-832","title":"Geospatial Queries","description":"Implement geospatial query support:\n- 2dsphere index type\n- $geoWithin, $geoIntersects, $near, $nearSphere operators\n- GeoJSON support (Point, Polygon, LineString)\n- Use SQLite R-tree extension","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-04T13:09:48.33847-06:00","updated_at":"2026-01-04T13:33:23.523295-06:00","closed_at":"2026-01-04T13:33:23.523295-06:00","close_reason":"Closed"}
{"id":"mondodb-83k","title":"[RED] ObjectId generation","description":"Write failing tests for:\n- ObjectId generates 24 hex char string\n- ObjectId is unique across calls\n- ObjectId includes timestamp component\n- ObjectId can be created from string\n- ObjectId comparison works","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:35.485628-06:00","updated_at":"2026-01-04T11:54:25.867488-06:00","closed_at":"2026-01-04T11:54:25.867488-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-83k","depends_on_id":"mondodb-0js","type":"blocks","created_at":"2026-01-04T11:16:34.627304-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-86g","title":"[REFACTOR] Document CRUD operations in SQLite","description":"Refactor:\n- Optimize batch operations\n- Add query plan analysis\n- Implement write coalescing\n- Add error handling and validation","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:29.4073-06:00","updated_at":"2026-01-04T12:07:04.550168-06:00","closed_at":"2026-01-04T12:07:04.550168-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-86g","depends_on_id":"mondodb-2jm","type":"blocks","created_at":"2026-01-04T11:16:29.393213-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-8be","title":"Compat tests: Aggregation pipeline","description":"## Task\nCreate compatibility tests for aggregation pipeline stages.\n\n## Location\n`test/compatibility/aggregation/pipeline.compat.test.ts`\n\n## Stages to Test\n- $match - Filter documents\n- $project - Reshape documents\n- $group - Group and aggregate\n- $sort - Sort documents\n- $limit/$skip - Pagination\n- $unwind - Deconstruct arrays\n- $lookup - Join collections\n- $count - Count documents\n\n## Test Cases\n\n### $match\n1. Simple filter\n2. Complex filter with operators\n3. $match at start vs middle of pipeline\n4. $match with $expr\n\n### $project\n1. Include fields (1)\n2. Exclude fields (0)\n3. Rename fields ('$fieldName')\n4. Computed fields with expressions\n5. $project _id exclusion\n\n### $group\n1. Group by single field\n2. Group by null (all docs)\n3. $sum accumulator\n4. $avg accumulator\n5. $min/$max accumulators\n6. $push accumulator\n7. $addToSet accumulator\n8. $first/$last accumulators\n9. Multiple accumulators\n\n### $sort\n1. Ascending/descending\n2. Multiple sort keys\n3. Sort by computed field\n\n### $lookup\n1. Basic left outer join\n2. localField/foreignField matching\n3. Empty matches (no results)\n4. as field naming\n\n### $unwind\n1. Basic array unwind\n2. preserveNullAndEmptyArrays:true\n3. includeArrayIndex option\n\n## Cursor Behavior\n- aggregate().toArray()\n- aggregate().next()\n- aggregate().explain() if supported","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:43:49.998117-06:00","updated_at":"2026-01-04T14:31:24.672409-06:00","closed_at":"2026-01-04T14:31:24.672409-06:00","close_reason":"Compat tests created","dependencies":[{"issue_id":"mondodb-8be","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:50:30.207642-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8be","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:50:35.511125-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8be","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:50:40.800375-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-8i3","title":"Compat tests: updateOne and updateMany","description":"## Task\nCreate compatibility tests for update operations.\n\n## Location\n`test/compatibility/crud/update.compat.test.ts`\n\n## Test Cases\n\n### updateOne\n1. Basic $set update - verify UpdateResult structure\n2. matchedCount when document exists\n3. matchedCount when document doesn't exist\n4. modifiedCount when change made\n5. modifiedCount when no actual change (same value)\n6. upsert:true creates new document\n7. upsertedId returned on upsert\n8. upsertedCount on upsert\n9. Filter matches multiple - only updates first\n10. Update with multiple operators\n\n### updateMany  \n1. Updates all matching documents\n2. matchedCount equals number of matches\n3. modifiedCount equals number of modifications\n4. No matches - zero counts\n5. upsert:true with no matches\n6. Empty filter {} updates all documents\n\n### Edge Cases\n1. Update non-existent field\n2. Update nested field (dot notation)\n3. Update array element by index\n4. $set to null\n5. $unset behavior\n6. Concurrent update atomicity\n\n### Return Value Structure\n```typescript\ninterface UpdateResult {\n  acknowledged: boolean\n  matchedCount: number\n  modifiedCount: number\n  upsertedId?: ObjectId\n  upsertedCount?: number\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:40:18.972576-06:00","updated_at":"2026-01-04T14:08:43.753-06:00","closed_at":"2026-01-04T14:08:43.753-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-8i3","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:47:16.631919-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8i3","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:47:21.931907-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8i3","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:47:27.229209-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-8j8","title":"GREEN: Wire SchemaAnalyzer to sample documents and compute schema","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:22.406373-06:00","updated_at":"2026-01-04T14:23:22.406373-06:00","dependencies":[{"issue_id":"mondodb-8j8","depends_on_id":"mondodb-aip","type":"blocks","created_at":"2026-01-04T14:25:07.965465-06:00","created_by":"daemon"},{"issue_id":"mondodb-8j8","depends_on_id":"mondodb-35d","type":"parent-child","created_at":"2026-01-04T14:25:13.613753-06:00","created_by":"daemon"}]}
{"id":"mondodb-8m3","title":"[RED] Workers RPC service binding","description":"Write failing tests for:\n- WorkerEntrypoint exposes MongoDB methods\n- Service binding configuration in wrangler.toml\n- Direct method calls without HTTP\n- Durable Object stub passing works\n- Cross-worker communication","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:31:02.501427-06:00","updated_at":"2026-01-04T12:00:42.58256-06:00","closed_at":"2026-01-04T12:00:42.58256-06:00","close_reason":"Closed"}
{"id":"mondodb-8pry","title":"RED: Index Management e2e tests - create, list, drop flow","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:05.438453-06:00","updated_at":"2026-01-04T14:24:05.438453-06:00"}
{"id":"mondodb-8qj","title":"Add mongodb and mongodb-memory-server dependencies","description":"## Task\nAdd npm dependencies required for compatibility testing:\n\n```bash\nnpm install --save-dev mongodb mongodb-memory-server\n```\n\n## Acceptance Criteria\n- [ ] mongodb ^6.0.0 added to devDependencies\n- [ ] mongodb-memory-server ^9.0.0 added to devDependencies\n- [ ] npm install succeeds\n- [ ] TypeScript types work correctly\n\n## TDD\nWrite a simple test that imports both packages and verifies they load:\n```typescript\nimport { MongoClient } from 'mongodb'\nimport { MongoMemoryServer } from 'mongodb-memory-server'\nexpect(MongoClient).toBeDefined()\nexpect(MongoMemoryServer).toBeDefined()\n```","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:37:33.084356-06:00","updated_at":"2026-01-04T13:55:07.172693-06:00","closed_at":"2026-01-04T13:55:07.172693-06:00","close_reason":"Closed"}
{"id":"mondodb-8ra","title":"[GREEN] capnweb RPC server","description":"Implement:\n- MondoRpcTarget extending RpcTarget\n- Route requests to Durable Object stubs\n- Expose connect(), db(), collection() methods\n- Handle cursor stubs with proper disposal\n- Workers-specific response handler","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:23.595096-06:00","updated_at":"2026-01-04T12:00:42.580336-06:00","closed_at":"2026-01-04T12:00:42.580336-06:00","close_reason":"Closed"}
{"id":"mondodb-8vr","title":"Compat tests: Array update operators","description":"## Task\nCreate compatibility tests for array update operators.\n\n## Location\n`test/compatibility/update-operators/array.compat.test.ts`\n\n## Operators\n- $push - Add element(s) to array\n- $pull - Remove elements matching condition\n- $pop - Remove first/last element\n- $addToSet - Add unique element\n- $pullAll - Remove all matching values\n\n## Test Cases\n\n### $push\n1. Push single element\n2. Push to non-existent field (creates array)\n3. Push with $each for multiple elements\n4. Push with $position\n5. Push with $slice (limit array size)\n6. Push with $sort\n7. Combined $each + $slice + $sort\n\n### $pull\n1. Pull exact value\n2. Pull with query condition {$gt: 5}\n3. Pull from nested array\n4. Pull object from array (deep equality)\n5. Pull non-existent value (no error)\n\n### $pop\n1. $pop:1 removes last element\n2. $pop:-1 removes first element\n3. $pop on empty array\n4. $pop on non-array (error?)\n\n### $addToSet\n1. Add new unique element\n2. Don't add duplicate\n3. $addToSet with $each\n4. Object equality for deduplication\n5. $addToSet to non-existent field\n\n### $pullAll\n1. Remove multiple specific values\n2. Order doesn't matter\n3. Remove duplicates in one operation\n\n## Critical Edge Cases\n```javascript\n// $push with $each + $slice + $sort together\n{$push: {scores: {$each: [89, 92], $slice: -5, $sort: -1}}}\n// Adds elements, sorts descending, keeps last 5\n\n// Object equality in $addToSet and $pull\n// {a:1, b:2} vs {b:2, a:1} - are they equal?\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:43:21.716287-06:00","updated_at":"2026-01-04T14:14:06.218661-06:00","closed_at":"2026-01-04T14:14:06.218661-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-8vr","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:50:05.339149-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8vr","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:50:10.627188-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-8vr","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:50:15.934555-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-92ey","title":"REFACTOR: DocumentEditor - undo/redo, batch edits","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:44.214361-06:00","updated_at":"2026-01-04T14:23:44.214361-06:00","dependencies":[{"issue_id":"mondodb-92ey","depends_on_id":"mondodb-epkf","type":"blocks","created_at":"2026-01-04T14:25:06.370568-06:00","created_by":"daemon"},{"issue_id":"mondodb-92ey","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:52.102961-06:00","created_by":"daemon"}]}
{"id":"mondodb-97k","title":"[REFACTOR] Cursor modifiers","description":"Refactor:\n- Fluent interface for chaining\n- Query plan optimization\n- Index hint support\n- Explain() for debugging","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:28:48.076627-06:00","updated_at":"2026-01-04T11:58:42.738255-06:00","closed_at":"2026-01-04T11:58:42.738255-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-97k","depends_on_id":"mondodb-ub7","type":"blocks","created_at":"2026-01-04T11:45:45.526625-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-9an","title":"TTL Indexes","description":"Implement TTL (Time-To-Live) indexes:\n- createIndex({field: 1}, {expireAfterSeconds: N})\n- Background cleanup of expired documents\n- Use SQLite triggers or periodic cleanup\n- Support for date fields","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-04T13:09:33.431799-06:00","updated_at":"2026-01-04T13:33:23.52255-06:00","closed_at":"2026-01-04T13:33:23.52255-06:00","close_reason":"Closed"}
{"id":"mondodb-9gu","title":"[RED] Project initialization with bun and TypeScript","description":"Write failing tests that verify:\n- package.json exists with correct dependencies\n- tsconfig.json is properly configured\n- bun.lockb is generated\n- Project builds without errors","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:12:41.679132-06:00","updated_at":"2026-01-04T12:01:25.222128-06:00","closed_at":"2026-01-04T12:01:25.222128-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-9gu","depends_on_id":"mondodb-eo7","type":"blocks","created_at":"2026-01-04T11:13:07.81197-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-9h0g","title":"Epic: mondodb Studio Web UI","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-04T14:24:01.100373-06:00","updated_at":"2026-01-04T14:24:01.100373-06:00"}
{"id":"mondodb-9j4","title":"aggregate command with $sample support","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:40.87472-06:00","updated_at":"2026-01-04T14:20:40.87472-06:00","dependencies":[{"issue_id":"mondodb-9j4","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:40.224532-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-9mf","title":"Compat tests: bulkWrite operations","description":"## Task\nCreate compatibility tests for bulkWrite operations.\n\n## Location\n`test/compatibility/bulk/bulk-write.compat.test.ts`\n\n## Test Cases\n\n### Basic Operations\n1. bulkWrite with insertOne operations\n2. bulkWrite with updateOne operations\n3. bulkWrite with updateMany operations\n4. bulkWrite with deleteOne operations\n5. bulkWrite with deleteMany operations\n6. bulkWrite with replaceOne operations\n7. Mixed operations in single bulkWrite\n\n### Result Structure\n```typescript\ninterface BulkWriteResult {\n  acknowledged: boolean\n  insertedCount: number\n  matchedCount: number\n  modifiedCount: number\n  deletedCount: number\n  upsertedCount: number\n  insertedIds: Record\u003cnumber, ObjectId\u003e\n  upsertedIds: Record\u003cnumber, ObjectId\u003e\n}\n```\n\n### ordered Option\n1. ordered:true (default) - stops on first error\n2. ordered:false - continues after errors\n3. Error contains partial results\n\n### Error Handling\n1. Duplicate key in bulkWrite\n2. Invalid operation in bulkWrite\n3. BulkWriteError structure\n4. writeErrors array in exception\n\n### Edge Cases\n1. Empty operations array\n2. Very large batch (1000+ operations)\n3. Operations on same document\n4. Upsert tracking in results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:44:26.228553-06:00","updated_at":"2026-01-04T14:31:24.676905-06:00","closed_at":"2026-01-04T14:31:24.676905-06:00","close_reason":"Compat tests created","dependencies":[{"issue_id":"mondodb-9mf","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:51:01.942182-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-9mf","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:51:07.230431-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-9mf","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:51:12.522859-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-a0q","title":"REFACTOR: QueryBar - lazy load CodeMirror, optimize autocomplete","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:19.044242-06:00","updated_at":"2026-01-04T14:23:19.044242-06:00","dependencies":[{"issue_id":"mondodb-a0q","depends_on_id":"mondodb-zsw","type":"blocks","created_at":"2026-01-04T14:24:43.34853-06:00","created_by":"daemon"},{"issue_id":"mondodb-a0q","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:00.552144-06:00","created_by":"daemon"}]}
{"id":"mondodb-a6ko","title":"GREEN: Implement ImportDialog with file upload and preview","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:12.474337-06:00","updated_at":"2026-01-04T14:24:12.474337-06:00","dependencies":[{"issue_id":"mondodb-a6ko","depends_on_id":"mondodb-ljqf","type":"blocks","created_at":"2026-01-04T14:25:53.090238-06:00","created_by":"daemon"},{"issue_id":"mondodb-a6ko","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:01.669591-06:00","created_by":"daemon"}]}
{"id":"mondodb-abwz","title":"Setup Vite + React + TypeScript project in studio/","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:16.618416-06:00","updated_at":"2026-01-04T14:24:16.618416-06:00","dependencies":[{"issue_id":"mondodb-abwz","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:24:59.968264-06:00","created_by":"daemon"}]}
{"id":"mondodb-adfs","title":"GREEN: Wire DocumentList to find() RPC with cursor pagination","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:51.147389-06:00","updated_at":"2026-01-04T14:23:51.147389-06:00","dependencies":[{"issue_id":"mondodb-adfs","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:44.487507-06:00","created_by":"daemon"},{"issue_id":"mondodb-adfs","depends_on_id":"mondodb-b86j","type":"blocks","created_at":"2026-01-04T14:24:58.708904-06:00","created_by":"daemon"}]}
{"id":"mondodb-ahu","title":"[RED] Aggregation pipeline stages","description":"Write failing tests for:\n- $match → WHERE clause\n- $project → SELECT with json_object\n- $group → GROUP BY with aggregates\n- $sort → ORDER BY\n- $limit → LIMIT\n- $skip → OFFSET\n- $count → COUNT(*)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:00.050166-06:00","updated_at":"2026-01-04T12:03:16.718769-06:00","closed_at":"2026-01-04T12:03:16.718769-06:00","close_reason":"Closed"}
{"id":"mondodb-aip","title":"RED: Schema Analysis e2e tests - analyze collection, visualize schema","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:15.264535-06:00","updated_at":"2026-01-04T14:23:15.264535-06:00","dependencies":[{"issue_id":"mondodb-aip","depends_on_id":"mondodb-1d6","type":"blocks","created_at":"2026-01-04T14:25:06.775876-06:00","created_by":"daemon"},{"issue_id":"mondodb-aip","depends_on_id":"mondodb-35d","type":"parent-child","created_at":"2026-01-04T14:25:12.525813-06:00","created_by":"daemon"}]}
{"id":"mondodb-ajb","title":"Aggregation pipeline async execution","description":"## Description\nModify aggregation execution to handle async $function stages.\n\n## TDD Test Cases (RED)\n```typescript\ndescribe('Aggregation with $function', () =\u003e {\n  describe('$addFields with $function', () =\u003e {\n    it('computes field using function')\n    it('can access multiple document fields')\n    it('works in pipeline with other stages')\n  })\n  \n  describe('$project with $function', () =\u003e {\n    it('projects computed function result')\n    it('combines with other projections')\n  })\n  \n  describe('pipeline ordering', () =\u003e {\n    it('executes $match before $function (optimization)')\n    it('passes filtered docs to function')\n    it('continues pipeline after function stage')\n  })\n  \n  describe('batch performance', () =\u003e {\n    it('batches all docs in stage to single isolate call')\n    it('handles 1000 documents efficiently')\n  })\n})\n```\n\n## Implementation Strategy\n1. Translator marks stages containing $function\n2. Executor splits pipeline at function boundaries\n3. SQL executes up to function stage\n4. FunctionExecutor processes batch\n5. Results feed into next SQL stage\n\n## Files\n- src/translator/aggregation-translator.ts\n- src/durable-object/mondo-database.ts (aggregate method)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T13:31:43.470645-06:00","updated_at":"2026-01-04T13:58:39.515733-06:00","closed_at":"2026-01-04T13:58:39.515733-06:00","close_reason":"Implemented AggregationExecutor with 15 passing tests, full batch optimization","dependencies":[{"issue_id":"mondodb-ajb","depends_on_id":"mondodb-3ks","type":"blocks","created_at":"2026-01-04T13:32:44.188823-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-ajb","depends_on_id":"mondodb-4jc","type":"blocks","created_at":"2026-01-04T13:32:49.461142-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ajr","title":"Feature: Query Bar Interface","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-04T14:22:53.212344-06:00","updated_at":"2026-01-04T14:22:53.212344-06:00"}
{"id":"mondodb-aug","title":"Epic: MongoDB API Compatibility Testing Infrastructure","description":"## Overview\nBuild comprehensive testing infrastructure to ensure perfect API compatibility between mondodb and MongoDB (via mongo-memory-server).\n\n## Architecture\n- **Provider Abstraction Layer**: Unified interface for both backends\n- **Side-by-Side Execution**: Run identical operations on both databases  \n- **Structural Comparison**: Deep equality with ObjectId normalization\n- **Comprehensive Coverage**: Every operator, every edge case\n\n## Goals\n1. Verify identical return value structures\n2. Verify identical error codes and conditions\n3. Verify identical query/update operator semantics\n4. Generate compatibility reports for tracking\n\n## Test Categories\n- CRUD Operations (insert, find, update, delete, replace)\n- Query Operators (comparison, logical, element, array, evaluation)\n- Update Operators (field, array, misc)\n- Aggregation Pipeline\n- Cursor Behavior\n- Bulk Write Operations\n- Edge Cases (null, empty, nested, unicode)\n- Error Conditions","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-04T13:37:16.831441-06:00","updated_at":"2026-01-04T13:37:16.831441-06:00"}
{"id":"mondodb-ax4","title":"[REFACTOR] Project initialization with bun and TypeScript","description":"Refactor:\n- Optimize tsconfig paths and aliases\n- Configure bundle optimization\n- Set up proper export maps in package.json\n- Add development vs production configurations","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:12:53.737833-06:00","updated_at":"2026-01-04T12:07:04.55234-06:00","closed_at":"2026-01-04T12:07:04.55234-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-ax4","depends_on_id":"mondodb-owj","type":"blocks","created_at":"2026-01-04T11:13:18.274546-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-b1t7","title":"Feature: Change Streams Monitor","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-04T14:23:37.638478-06:00","updated_at":"2026-01-04T14:23:37.638478-06:00"}
{"id":"mondodb-b2f","title":"[RED] Element and array query operators","description":"Write failing tests for:\n- $exists → json_extract IS NOT NULL / IS NULL\n- $type → json_type check\n- $all → array contains all elements\n- $elemMatch → array element matches\n- $size → json_array_length","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:54.193885-06:00","updated_at":"2026-01-04T11:58:26.707643-06:00","closed_at":"2026-01-04T11:58:26.707643-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-b2f","depends_on_id":"mondodb-gtx","type":"blocks","created_at":"2026-01-04T11:22:08.128771-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-b4u","title":"[EPIC] Cursor Operations","description":"Implement MongoCursor with toArray, forEach, limit, skip, sort, and iterator support.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:14:06.328107-06:00","updated_at":"2026-01-04T12:07:04.553596-06:00","closed_at":"2026-01-04T12:07:04.553596-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-b4u","depends_on_id":"mondodb-mzh","type":"blocks","created_at":"2026-01-04T11:39:51.600747-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-b5nm","title":"Setup GitHub Actions CI for studio build and tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:24:23.953021-06:00","updated_at":"2026-01-04T14:24:23.953021-06:00","dependencies":[{"issue_id":"mondodb-b5nm","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:07.643747-06:00","created_by":"daemon"},{"issue_id":"mondodb-b5nm","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:27.109173-06:00","created_by":"daemon"},{"issue_id":"mondodb-b5nm","depends_on_id":"mondodb-kw9k","type":"blocks","created_at":"2026-01-04T14:25:28.393106-06:00","created_by":"daemon"},{"issue_id":"mondodb-b5nm","depends_on_id":"mondodb-19au","type":"blocks","created_at":"2026-01-04T14:25:29.581188-06:00","created_by":"daemon"}]}
{"id":"mondodb-b86j","title":"RED: Document List e2e tests - load documents, pagination, view modes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:39.202903-06:00","updated_at":"2026-01-04T14:23:39.202903-06:00","dependencies":[{"issue_id":"mondodb-b86j","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:43.223187-06:00","created_by":"daemon"}]}
{"id":"mondodb-bc67","title":"REFACTOR: CreateIndex - suggest indexes based on queries","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:43.232421-06:00","updated_at":"2026-01-04T14:23:43.232421-06:00","dependencies":[{"issue_id":"mondodb-bc67","depends_on_id":"mondodb-d5pe","type":"blocks","created_at":"2026-01-04T14:25:08.637055-06:00","created_by":"daemon"}]}
{"id":"mondodb-bec","title":"GREEN: Implement VectorTranslator class","description":"## TDD Phase: GREEN (Make Tests Pass)\n\n### Implementation: `src/translator/vector-translator.ts`\n\n\\`\\`\\`typescript\nexport interface VectorSearchStage {\n  index?: string;\n  path?: string;\n  queryVector?: number[];\n  query?: string;\n  limit: number;\n  numCandidates?: number;\n  filter?: Record\u003cstring, unknown\u003e;\n}\n\nexport interface VectorSearchResult {\n  docIds: string[];\n  scores: Map\u003cstring, number\u003e;\n}\n\nexport class VectorTranslator {\n  constructor(\n    private vectorize: VectorizeIndex,\n    private ai?: Ai,\n    private embeddingModel: string = '@cf/baai/bge-m3'\n  ) {}\n\n  async translateVectorSearch(\n    stage: VectorSearchStage,\n    collectionName: string\n  ): Promise\u003cVectorSearchResult\u003e {\n    let queryVector = stage.queryVector;\n    \n    if (!queryVector \u0026\u0026 stage.query) {\n      if (!this.ai) {\n        throw new Error('\\$vectorSearch requires queryVector or query with AI binding');\n      }\n      const embedding = await this.ai.run(this.embeddingModel, {\n        text: [stage.query]\n      });\n      queryVector = (embedding as any).data[0];\n    }\n    \n    if (!queryVector) {\n      throw new Error('\\$vectorSearch requires queryVector or query');\n    }\n\n    const results = await this.vectorize.query(queryVector, {\n      topK: Math.min(stage.limit, 100),\n      namespace: collectionName,\n      filter: stage.filter,\n      returnMetadata: 'indexed'\n    });\n\n    const docIds = results.matches.map(m =\u003e m.id);\n    const scores = new Map(results.matches.map(m =\u003e [m.id, m.score]));\n    \n    return { docIds, scores };\n  }\n}\n\\`\\`\\`\n\n### Expected: All VectorTranslator tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:10.900114-06:00","updated_at":"2026-01-04T14:05:10.900114-06:00","dependencies":[{"issue_id":"mondodb-bec","depends_on_id":"mondodb-rn0","type":"blocks","created_at":"2026-01-04T14:06:34.752408-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-bgm","title":"Feature: Connection Panel","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-04T14:22:53.449554-06:00","updated_at":"2026-01-04T14:22:53.449554-06:00"}
{"id":"mondodb-brb","title":"Compat tests: insertOne and insertMany","description":"## Task\nCreate compatibility tests for insert operations.\n\n## Location\n`test/compatibility/crud/insert.compat.test.ts`\n\n## Test Cases\n\n### insertOne\n1. Basic document insert - verify InsertOneResult structure\n2. Document with `_id` provided - preserves _id\n3. Document without `_id` - generates ObjectId\n4. Nested document insert\n5. Array field insert\n6. Duplicate _id throws error code 11000\n7. Empty document insert\n8. Document with null values\n9. Document with undefined values (behavior may differ!)\n10. Large document insert\n\n### insertMany\n1. Multiple documents - verify InsertManyResult structure\n2. insertedIds mapping is correct\n3. insertedCount matches array length\n4. Partial failure with ordered:true stops at first error\n5. Partial failure with ordered:false continues\n6. Empty array behavior\n7. Single document in array\n\n## Test Pattern\n```typescript\ndescribe('insertOne Compatibility', () =\u003e {\n  let mongodb: TestProvider\n  let mondodb: TestProvider\n  \n  beforeAll(async () =\u003e {\n    ;({ mongodb, mondodb } = await createBothProviders())\n  })\n  \n  afterAll(async () =\u003e {\n    await Promise.all([mongodb.disconnect(), mondodb.disconnect()])\n  })\n  \n  it('returns matching InsertOneResult structure', async () =\u003e {\n    const doc = { name: 'test', count: 42 }\n    \n    const mongoResult = await mongodb.database('test').collection('items').insertOne(doc)\n    const mondoResult = await mondodb.database('test').collection('items').insertOne({...doc})\n    \n    const comparison = compareResults(mongoResult, mondoResult, {\n      normalizeObjectIds: true\n    })\n    \n    expect(comparison.match).toBe(true)\n    if (!comparison.match) {\n      console.log('Differences:', comparison.differences)\n    }\n  })\n})\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:39:42.787922-06:00","updated_at":"2026-01-04T14:08:43.750575-06:00","closed_at":"2026-01-04T14:08:43.750575-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-brb","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:46:44.817274-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-brb","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:46:50.144934-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-brb","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:46:55.443769-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-byh","title":"[RED] MongoCollection CRUD","description":"Write failing tests for:\n- collection.insertOne(doc)\n- collection.insertMany(docs)\n- collection.findOne(filter)\n- collection.find(filter) returns cursor\n- collection.updateOne(filter, update)\n- collection.updateMany(filter, update)\n- collection.deleteOne(filter)\n- collection.deleteMany(filter)\n- collection.replaceOne(filter, doc)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:25:56.272381-06:00","updated_at":"2026-01-04T12:01:28.034976-06:00","closed_at":"2026-01-04T12:01:28.034976-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-byh","depends_on_id":"mondodb-pfn","type":"blocks","created_at":"2026-01-04T11:42:03.1315-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-c3e","title":"[REFACTOR] Index management","description":"Refactor:\n- Index name generation\n- Background index creation\n- Index usage hints in queries\n- Sparse index support\n- TTL index simulation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:39:02.888057-06:00","updated_at":"2026-01-04T12:01:46.193891-06:00","closed_at":"2026-01-04T12:01:46.193891-06:00","close_reason":"Closed"}
{"id":"mondodb-cavk","title":"RED: Export unit tests - format selection, field selection, streaming","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:14.989553-06:00","updated_at":"2026-01-04T14:24:14.989553-06:00","dependencies":[{"issue_id":"mondodb-cavk","depends_on_id":"mondodb-a6ko","type":"blocks","created_at":"2026-01-04T14:25:54.381172-06:00","created_by":"daemon"},{"issue_id":"mondodb-cavk","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:02.734236-06:00","created_by":"daemon"}]}
{"id":"mondodb-cdl","title":"[GREEN] Miniflare local development","description":"Implement:\n- Miniflare config with durableObjectsPersist\n- Test helper for DO namespace access\n- vitest-pool-workers integration\n- Fixture utilities for test data\n- Environment setup scripts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:37:47.348915-06:00","updated_at":"2026-01-04T12:03:09.174536-06:00","closed_at":"2026-01-04T12:03:09.174536-06:00","close_reason":"Closed"}
{"id":"mondodb-cht","title":"[RED] SQLite schema initialization","description":"Write failing tests for:\n- Schema creates collections table\n- Schema creates documents table with JSON storage\n- Schema creates _id index\n- blockConcurrencyWhile ensures atomic init\n- Schema version tracking","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:14:58.515074-06:00","updated_at":"2026-01-04T11:55:40.357931-06:00","closed_at":"2026-01-04T11:55:40.357931-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-cht","depends_on_id":"mondodb-0js","type":"blocks","created_at":"2026-01-04T11:16:03.265671-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-cj9","title":"GREEN: Implement DatabaseBrowser component to pass unit tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:16.012307-06:00","updated_at":"2026-01-04T14:23:16.012307-06:00","dependencies":[{"issue_id":"mondodb-cj9","depends_on_id":"mondodb-3pn","type":"blocks","created_at":"2026-01-04T14:24:24.13611-06:00","created_by":"daemon"},{"issue_id":"mondodb-cj9","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:43.169788-06:00","created_by":"daemon"}]}
{"id":"mondodb-cmb","title":"RED: Connection Panel unit tests - connection state, validation, storage","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:23.032552-06:00","updated_at":"2026-01-04T14:23:23.032552-06:00"}
{"id":"mondodb-cnm","title":"Types and interfaces for $function","description":"## Description\nDefine TypeScript types for $function feature.\n\n## TDD Test Cases (RED)\n```typescript\ndescribe('Function types', () =\u003e {\n  it('FunctionSpec has body, args, lang')\n  it('WorkerLoader type matches CF binding')\n  it('Env.LOADER is optional')\n  it('FunctionResult includes value and error')\n})\n```\n\n## Types to Define\n```typescript\n// src/types/function.ts\n\nexport interface FunctionSpec {\n  body: string | ((...args: unknown[]) =\u003e unknown)\n  args: unknown[]\n  lang: 'js'\n}\n\nexport interface FunctionResult {\n  success: boolean\n  value?: unknown\n  error?: string\n  duration: number\n}\n\nexport interface FunctionExpression {\n  __type: 'function'\n  body: string\n  argPaths: string[]\n  literalArgs: Map\u003cnumber, unknown\u003e\n}\n\n// Worker loader types (match CF API)\nexport interface WorkerLoader {\n  get(id: string, getCode: () =\u003e Promise\u003cWorkerCode\u003e): WorkerStub\n}\n\nexport interface WorkerCode {\n  compatibilityDate: string\n  mainModule: string\n  modules: Record\u003cstring, string\u003e\n  globalOutbound?: null\n  env?: Record\u003cstring, unknown\u003e\n}\n\nexport interface WorkerStub {\n  getEntrypoint(): WorkerEntrypoint\n}\n\nexport interface WorkerEntrypoint {\n  fetch(request: Request): Promise\u003cResponse\u003e\n}\n```\n\n## Files\n- src/types/function.ts\n- src/types/index.ts (re-export)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:31:49.721532-06:00","updated_at":"2026-01-04T13:39:47.062117-06:00","closed_at":"2026-01-04T13:39:47.062117-06:00","close_reason":"Implemented types and converted wrangler.toml to wrangler.jsonc with worker_loaders binding"}
{"id":"mondodb-cny","title":"Implement MongoDBProvider (mongo-memory-server wrapper)","description":"## Task\nImplement TestProvider for real MongoDB using mongo-memory-server.\n\n## Location\n`test/compatibility/providers/mongodb-provider.ts`\n\n## Implementation\n```typescript\nimport { MongoClient, Db, Collection } from 'mongodb'\nimport { MongoMemoryServer } from 'mongodb-memory-server'\nimport { TestProvider, TestDatabase, TestCollection, TestCursor } from './types'\n\nexport class MongoDBProvider implements TestProvider {\n  readonly name = 'mongodb' as const\n  private server!: MongoMemoryServer\n  private client!: MongoClient\n  \n  async connect(): Promise\u003cvoid\u003e {\n    this.server = await MongoMemoryServer.create()\n    const uri = this.server.getUri()\n    this.client = new MongoClient(uri)\n    await this.client.connect()\n  }\n  \n  async disconnect(): Promise\u003cvoid\u003e {\n    await this.client?.close()\n    await this.server?.stop()\n  }\n  \n  database(name: string): TestDatabase {\n    return new MongoDBDatabase(this.client.db(name))\n  }\n  \n  async dropDatabase(name: string): Promise\u003cvoid\u003e {\n    await this.client.db(name).dropDatabase()\n  }\n}\n\nclass MongoDBDatabase implements TestDatabase {\n  constructor(private db: Db) {}\n  \n  get databaseName(): string { return this.db.databaseName }\n  \n  collection\u003cT\u003e(name: string): TestCollection\u003cT\u003e {\n    return new MongoDBCollection(this.db.collection(name))\n  }\n  // ...\n}\n\n// Wrap MongoDB Collection to match TestCollection interface\nclass MongoDBCollection\u003cT\u003e implements TestCollection\u003cT\u003e {\n  // Direct passthrough to MongoDB driver methods\n}\n\n// Wrap MongoDB Cursor to match TestCursor interface\nclass MongoDBCursor\u003cT\u003e implements TestCursor\u003cT\u003e {\n  // Direct passthrough to MongoDB cursor methods  \n}\n```\n\n## TDD Tests\n1. Can create MongoMemoryServer and connect\n2. Can perform basic CRUD operations\n3. Can disconnect and cleanup\n4. Multiple databases work independently","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:38:12.748285-06:00","updated_at":"2026-01-04T14:01:09.45041-06:00","closed_at":"2026-01-04T14:01:09.45041-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-cny","depends_on_id":"mondodb-3kh","type":"blocks","created_at":"2026-01-04T13:45:38.829181-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-cr6","title":"Integration tests for $function","description":"## Description\nEnd-to-end integration tests using actual worker-loader binding.\n\n## TDD Test Cases (RED)\n```typescript\ndescribe('Integration: $function', () =\u003e {\n  describe('real isolate execution', () =\u003e {\n    it('executes in actual V8 isolate')\n    it('maintains isolation between calls')\n    it('respects timeout limits')\n  })\n  \n  describe('full aggregation pipeline', () =\u003e {\n    it('$match → $addFields with $function → $sort')\n    it('$group → $project with $function')\n    it('multiple $function stages in pipeline')\n  })\n  \n  describe('error handling', () =\u003e {\n    it('syntax error in function body')\n    it('runtime error in function')\n    it('timeout exceeded')\n    it('missing LOADER binding')\n  })\n  \n  describe('MongoDB compatibility', () =\u003e {\n    it('matches MongoDB $function behavior')\n    it('handles same args as MongoDB')\n    it('returns compatible results')\n  })\n})\n```\n\n## Test Setup\n- Configure [[worker_loaders]] in test wrangler.toml\n- May need miniflare configuration for local testing\n\n## Files\n- test/integration/function.test.ts\n- test/fixtures/function-data.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:32:10.706268-06:00","updated_at":"2026-01-04T14:06:16.260864-06:00","closed_at":"2026-01-04T14:06:16.260864-06:00","close_reason":"Worker deployed to https://mondodb.dotdo.workers.dev - integration tests pending worker_loaders beta access","dependencies":[{"issue_id":"mondodb-cr6","depends_on_id":"mondodb-ajb","type":"blocks","created_at":"2026-01-04T13:32:54.734601-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-cr6","depends_on_id":"mondodb-f34","type":"blocks","created_at":"2026-01-04T13:33:00.011112-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-cwr","title":"RED: Create Index unit tests - field selection, options, validation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:30.558686-06:00","updated_at":"2026-01-04T14:23:30.558686-06:00"}
{"id":"mondodb-d5pe","title":"GREEN: Implement CreateIndexDialog with field builder","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:36.871447-06:00","updated_at":"2026-01-04T14:23:36.871447-06:00","dependencies":[{"issue_id":"mondodb-d5pe","depends_on_id":"mondodb-cwr","type":"blocks","created_at":"2026-01-04T14:25:06.954828-06:00","created_by":"daemon"}]}
{"id":"mondodb-dhu","title":"[EPIC] Index Management","description":"Implement createIndex, dropIndex, listIndexes with SQLite index backing.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T11:14:31.12591-06:00","updated_at":"2026-01-04T12:07:04.55512-06:00","closed_at":"2026-01-04T12:07:04.55512-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-dhu","depends_on_id":"mondodb-86g","type":"blocks","created_at":"2026-01-04T11:40:12.512391-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-dq8","title":"[GREEN] Workers RPC service binding","description":"Implement:\n- MondoEntrypoint extending WorkerEntrypoint\n- Expose connect/db/collection methods\n- Configure service binding in wrangler\n- Pass Durable Object stubs correctly\n- Method return types with RpcTarget","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:31:08.469435-06:00","updated_at":"2026-01-04T12:00:42.582972-06:00","closed_at":"2026-01-04T12:00:42.582972-06:00","close_reason":"Closed"}
{"id":"mondodb-dv4","title":"Compat tests: Array query operators","description":"## Task\nCreate compatibility tests for array query operators.\n\n## Location\n`test/compatibility/query-operators/array.compat.test.ts`\n\n## Operators\n- $all - All elements match\n- $elemMatch - Element matches all conditions\n- $size - Array size\n\n## Test Cases\n\n### $all\n1. Array contains all specified elements\n2. Order doesn't matter\n3. $all with single element\n4. $all with empty array\n5. $all on non-array field (behavior?)\n6. $all with $elemMatch inside\n\n### $elemMatch\n1. Element matches multiple conditions\n2. $elemMatch vs individual conditions (subtle difference!)\n3. $elemMatch with comparison operators\n4. $elemMatch with nested fields\n5. $elemMatch on array of primitives\n6. $elemMatch on array of objects\n\n### $size\n1. Array has exact size\n2. $size:0 matches empty arrays\n3. $size on non-array field\n4. Cannot use $size with range (need $where or aggregation)\n\n## Critical Edge Case\n```javascript\n// These are DIFFERENT:\n{ arr: { x: 1, y: 2 } }           // One element matches x:1, another matches y:2\n{ arr: { $elemMatch: { x: 1, y: 2 } } }  // Same element must match both\n\n// Example:\ndoc = { arr: [{ x: 1 }, { y: 2 }] }\n// First query: MATCHES (x:1 in first elem, y:2 in second)\n// Second query: NO MATCH (no single elem has both)\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:42:25.511605-06:00","updated_at":"2026-01-04T14:31:24.662641-06:00","closed_at":"2026-01-04T14:31:24.662641-06:00","close_reason":"Compat tests created","dependencies":[{"issue_id":"mondodb-dv4","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:49:17.718167-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-dv4","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:49:23.003679-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-dv4","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:49:28.281352-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-dvpc","title":"REFACTOR: PipelineCanvas - collapse stages, stage grouping","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:50.910846-06:00","updated_at":"2026-01-04T14:23:50.910846-06:00","dependencies":[{"issue_id":"mondodb-dvpc","depends_on_id":"mondodb-loui","type":"blocks","created_at":"2026-01-04T14:25:07.290605-06:00","created_by":"daemon"}]}
{"id":"mondodb-dzz","title":"[RED] capnweb RPC client","description":"Write failing tests for:\n- newHttpBatchRpcSession creates client\n- newWebSocketRpcSession for streaming\n- MongoClient uses RPC session\n- Method calls return promises\n- Stubs properly disposed with using\n- Promise pipelining works","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:44.19728-06:00","updated_at":"2026-01-04T12:00:42.581218-06:00","closed_at":"2026-01-04T12:00:42.581218-06:00","close_reason":"Closed"}
{"id":"mondodb-e1b","title":"[GREEN] Advanced aggregation stages","description":"Implement:\n- $lookup using LEFT JOIN with subquery\n- $unwind using json_each expansion\n- $addFields as computed json_set\n- $bucket with CASE WHEN ranges\n- $facet with multiple CTEs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:25.052427-06:00","updated_at":"2026-01-04T12:03:16.721202-06:00","closed_at":"2026-01-04T12:03:16.721202-06:00","close_reason":"Closed"}
{"id":"mondodb-e6p","title":"[EPIC] MongoClient API","description":"Implement MongoDB Node.js driver compatible MongoClient, MongoDatabase, and MongoCollection classes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:13:59.825094-06:00","updated_at":"2026-01-04T12:07:04.553967-06:00","closed_at":"2026-01-04T12:07:04.553967-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-e6p","depends_on_id":"mondodb-2ht","type":"blocks","created_at":"2026-01-04T11:39:46.381776-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-eh0","title":"Create vitest config and test infrastructure for compat tests","description":"## Task\nSet up vitest configuration and infrastructure for compatibility tests.\n\n## Files to Create\n\n### `vitest.config.compat.ts`\n```typescript\nimport { defineConfig } from 'vitest/config'\n\nexport default defineConfig({\n  test: {\n    include: ['test/compatibility/**/*.compat.test.ts'],\n    exclude: ['node_modules', 'dist'],\n    testTimeout: 60000,  // mongo-memory-server can be slow to start\n    hookTimeout: 30000,\n    pool: 'forks',       // Isolate tests for clean state\n    globals: true,\n    reporters: ['verbose', 'json'],\n    outputFile: {\n      json: './compat-report.json'\n    }\n  }\n})\n```\n\n### `test/compatibility/providers/factory.ts`\n```typescript\nimport { TestProvider } from './types'\nimport { MongoDBProvider } from './mongodb-provider'\nimport { MondoDBProvider } from './mondodb-provider'\n\nexport type ProviderName = 'mongodb' | 'mondodb'\n\nexport async function createProvider(name: ProviderName): Promise\u003cTestProvider\u003e {\n  const provider = name === 'mongodb' \n    ? new MongoDBProvider()\n    : new MondoDBProvider()\n  await provider.connect()\n  return provider\n}\n\nexport async function createBothProviders(): Promise\u003c{\n  mongodb: TestProvider\n  mondodb: TestProvider\n}\u003e {\n  const [mongodb, mondodb] = await Promise.all([\n    createProvider('mongodb'),\n    createProvider('mondodb')\n  ])\n  return { mongodb, mondodb }\n}\n```\n\n### `test/compatibility/setup.ts` (global setup)\n```typescript\nexport async function setup() {\n  // Pre-download MongoDB binaries to avoid test timeout\n  console.log('Ensuring MongoDB binaries are available...')\n}\n\nexport async function teardown() {\n  // Cleanup\n}\n```\n\n### `package.json` scripts\n```json\n{\n  \"scripts\": {\n    \"test:compat\": \"vitest run --config vitest.config.compat.ts\",\n    \"test:compat:watch\": \"vitest --config vitest.config.compat.ts\",\n    \"test:compat:ui\": \"vitest --config vitest.config.compat.ts --ui\"\n  }\n}\n```\n\n## TDD\n1. `npm run test:compat` runs without error (even with no tests)\n2. Test files matching `*.compat.test.ts` are discovered\n3. Both providers can be created via factory","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:39:14.320608-06:00","updated_at":"2026-01-04T13:55:19.851103-06:00","closed_at":"2026-01-04T13:55:19.851103-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-eh0","depends_on_id":"mondodb-8qj","type":"blocks","created_at":"2026-01-04T13:45:54.696698-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-eiz","title":"GREEN: Implement IndexList component with property display","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:11.082936-06:00","updated_at":"2026-01-04T14:23:11.082936-06:00","dependencies":[{"issue_id":"mondodb-eiz","depends_on_id":"mondodb-5tt","type":"blocks","created_at":"2026-01-04T14:25:03.894799-06:00","created_by":"daemon"}]}
{"id":"mondodb-eo7","title":"[EPIC] Project Setup \u0026 Infrastructure","description":"Set up the mondodb project with bun, TypeScript, and required dependencies for building a MongoDB-compatible database on Cloudflare Durable Objects.","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-01-04T11:12:24.521265-06:00","updated_at":"2026-01-04T12:07:44.920422-06:00","closed_at":"2026-01-04T12:07:44.920422-06:00","close_reason":"Project setup complete with all 73 tasks implemented"}
{"id":"mondodb-epkf","title":"GREEN: Implement DocumentEditor with inline field editing","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:37.90836-06:00","updated_at":"2026-01-04T14:23:37.90836-06:00","dependencies":[{"issue_id":"mondodb-epkf","depends_on_id":"mondodb-t7j","type":"blocks","created_at":"2026-01-04T14:25:05.156305-06:00","created_by":"daemon"},{"issue_id":"mondodb-epkf","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:50.90784-06:00","created_by":"daemon"}]}
{"id":"mondodb-f34","title":"wrangler.jsonc worker-loader configuration","description":"## Description\nAdd worker_loaders binding configuration to wrangler.jsonc.\n\n## Changes\n```jsonc\n// Add to wrangler.jsonc\n{\n  \"worker_loaders\": [\n    {\n      \"binding\": \"LOADER\"\n    }\n  ]\n}\n```\n\n## Documentation\n- Update README with $function feature\n- Document wrangler.jsonc requirements\n- Add example usage\n\n## Testing\n- Verify binding appears in env\n- Test with/without binding configured","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:32:17.455729-06:00","updated_at":"2026-01-04T14:00:43.697174-06:00","closed_at":"2026-01-04T14:00:43.697174-06:00","close_reason":"wrangler.jsonc created with worker-loader configuration"}
{"id":"mondodb-f3m","title":"[REFACTOR] Advanced aggregation stages","description":"Refactor:\n- Join optimization\n- Parallel facet execution\n- Memory management for large unwinds\n- Query plan analysis","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:31.200389-06:00","updated_at":"2026-01-04T12:03:16.721624-06:00","closed_at":"2026-01-04T12:03:16.721624-06:00","close_reason":"Closed"}
{"id":"mondodb-fa9","title":"[RED] Miniflare local development","description":"Write failing tests for:\n- Miniflare configuration for mondodb DO\n- File system persistence between tests\n- Direct DO namespace access for testing\n- Schema initialization works locally\n- CRUD operations match production behavior","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:37:39.432921-06:00","updated_at":"2026-01-04T12:03:09.173521-06:00","closed_at":"2026-01-04T12:03:09.173521-06:00","close_reason":"Closed"}
{"id":"mondodb-fuq","title":"[RED] Field update operators","description":"Write failing tests for:\n- $set → json_set(data, path, value)\n- $unset → json_remove(data, path)\n- $inc → json_set(data, path, json_extract+increment)\n- $min/$max → conditional update\n- $mul → multiplication update\n- $rename → remove+set combination","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:22:29.749153-06:00","updated_at":"2026-01-04T11:59:48.987829-06:00","closed_at":"2026-01-04T11:59:48.987829-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-fuq","depends_on_id":"mondodb-rsu","type":"blocks","created_at":"2026-01-04T11:40:59.008382-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-fvbp","title":"RED: Change Streams unit tests - event display, filtering, pause/resume","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:44.588116-06:00","updated_at":"2026-01-04T14:23:44.588116-06:00","dependencies":[{"issue_id":"mondodb-fvbp","depends_on_id":"mondodb-b1t7","type":"parent-child","created_at":"2026-01-04T14:25:31.989366-06:00","created_by":"daemon"}]}
{"id":"mondodb-g6z","title":"[REFACTOR] ObjectId generation","description":"Refactor:\n- Optimize random byte generation\n- Cache counter state\n- Add BSON compatibility\n- Type-safe ObjectId class","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:48.646312-06:00","updated_at":"2026-01-04T11:54:25.868898-06:00","closed_at":"2026-01-04T11:54:25.868898-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-g6z","depends_on_id":"mondodb-ypw","type":"blocks","created_at":"2026-01-04T11:16:45.081407-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-gb5","title":"REFACTOR: DocumentList - virtualize rows, optimize JSON rendering","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:28.568215-06:00","updated_at":"2026-01-04T14:23:28.568215-06:00","dependencies":[{"issue_id":"mondodb-gb5","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:41.747607-06:00","created_by":"daemon"},{"issue_id":"mondodb-gb5","depends_on_id":"mondodb-3hl","type":"blocks","created_at":"2026-01-04T14:24:57.453956-06:00","created_by":"daemon"}]}
{"id":"mondodb-gq0","title":"RED: Schema Analysis unit tests - field types, frequency, nested structure","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:02.901253-06:00","updated_at":"2026-01-04T14:23:02.901253-06:00","dependencies":[{"issue_id":"mondodb-gq0","depends_on_id":"mondodb-35d","type":"parent-child","created_at":"2026-01-04T14:25:09.132823-06:00","created_by":"daemon"}]}
{"id":"mondodb-gtx","title":"[REFACTOR] Logical query operators","description":"Refactor:\n- Flatten nested $and/$or\n- Remove redundant conditions\n- Optimize deep nesting\n- Add query plan hints","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:48.21755-06:00","updated_at":"2026-01-04T11:58:26.706919-06:00","closed_at":"2026-01-04T11:58:26.706919-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-gtx","depends_on_id":"mondodb-7io","type":"blocks","created_at":"2026-01-04T11:19:17.506984-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-gu8","title":"[REFACTOR] Miniflare local development","description":"Refactor:\n- Test isolation improvements\n- Parallel test support\n- Custom persistence paths per suite\n- Debug utilities for storage inspection","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:37:53.782553-06:00","updated_at":"2026-01-04T12:03:09.175129-06:00","closed_at":"2026-01-04T12:03:09.175129-06:00","close_reason":"Closed"}
{"id":"mondodb-h0o","title":"Change Streams - watch() functionality","description":"Implement MongoDB-compatible change streams:\n- collection.watch() returns a ChangeStream cursor\n- Support for change events: insert, update, delete, replace\n- Filter with $match pipeline stage\n- resumeAfter/startAfter tokens for resumption\n- fullDocument option for update events","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T13:09:33.413846-06:00","updated_at":"2026-01-04T13:33:23.521717-06:00","closed_at":"2026-01-04T13:33:23.521717-06:00","close_reason":"Closed"}
{"id":"mondodb-h0yj","title":"RED: Import/Export e2e tests - round-trip data integrity","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:17.635523-06:00","updated_at":"2026-01-04T14:24:17.635523-06:00","dependencies":[{"issue_id":"mondodb-h0yj","depends_on_id":"mondodb-1lx0","type":"blocks","created_at":"2026-01-04T14:25:57.413445-06:00","created_by":"daemon"},{"issue_id":"mondodb-h0yj","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:05.028906-06:00","created_by":"daemon"}]}
{"id":"mondodb-h5r7","title":"REFACTOR: Aggregation e2e - save pipelines, share via URL","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:26.018022-06:00","updated_at":"2026-01-04T14:24:26.018022-06:00","dependencies":[{"issue_id":"mondodb-h5r7","depends_on_id":"mondodb-sc0v","type":"blocks","created_at":"2026-01-04T14:25:26.013998-06:00","created_by":"daemon"}]}
{"id":"mondodb-hkmb","title":"GREEN: Implement ConnectionPanel component to pass unit tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:37.718562-06:00","updated_at":"2026-01-04T14:23:37.718562-06:00","dependencies":[{"issue_id":"mondodb-hkmb","depends_on_id":"mondodb-cmb","type":"blocks","created_at":"2026-01-04T14:24:38.041191-06:00","created_by":"daemon"}]}
{"id":"mondodb-hum2","title":"REFACTOR: InsertDocument - bulk insert, import from clipboard","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:59.127067-06:00","updated_at":"2026-01-04T14:23:59.127067-06:00","dependencies":[{"issue_id":"mondodb-hum2","depends_on_id":"mondodb-78lt","type":"blocks","created_at":"2026-01-04T14:25:09.076651-06:00","created_by":"daemon"},{"issue_id":"mondodb-hum2","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:03.483049-06:00","created_by":"daemon"}]}
{"id":"mondodb-hup4","title":"REFACTOR: ConnectionPanel - extract hooks, optimize re-renders","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:44.07799-06:00","updated_at":"2026-01-04T14:23:44.07799-06:00","dependencies":[{"issue_id":"mondodb-hup4","depends_on_id":"mondodb-hkmb","type":"blocks","created_at":"2026-01-04T14:24:39.566172-06:00","created_by":"daemon"}]}
{"id":"mondodb-hyvn","title":"RED: Document CRUD e2e tests - full create/read/update/delete flow","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:24:18.079662-06:00","updated_at":"2026-01-04T14:24:18.079662-06:00","dependencies":[{"issue_id":"mondodb-hyvn","depends_on_id":"mondodb-0aa","type":"blocks","created_at":"2026-01-04T14:25:32.805522-06:00","created_by":"daemon"},{"issue_id":"mondodb-hyvn","depends_on_id":"mondodb-epkf","type":"blocks","created_at":"2026-01-04T14:25:34.035758-06:00","created_by":"daemon"},{"issue_id":"mondodb-hyvn","depends_on_id":"mondodb-78lt","type":"blocks","created_at":"2026-01-04T14:25:35.084237-06:00","created_by":"daemon"},{"issue_id":"mondodb-hyvn","depends_on_id":"mondodb-mbqq","type":"blocks","created_at":"2026-01-04T14:25:36.174072-06:00","created_by":"daemon"},{"issue_id":"mondodb-hyvn","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:15.908055-06:00","created_by":"daemon"}]}
{"id":"mondodb-i0r","title":"[GREEN] Comparison query operators","description":"Implement QueryTranslator class with:\n- translateComparison() for each operator\n- Path extraction with json_extract\n- Parameterized value binding\n- Nested path handling ($.a.b.c)\n- Type coercion for numbers/strings","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:17:22.889548-06:00","updated_at":"2026-01-04T11:58:26.704982-06:00","closed_at":"2026-01-04T11:58:26.704982-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-i0r","depends_on_id":"mondodb-67o","type":"blocks","created_at":"2026-01-04T11:18:56.607992-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-i7a","title":"[REFACTOR] Workers RPC service binding","description":"Refactor:\n- TypeScript declarations for service bindings\n- Environment type safety\n- Multiple database support\n- Permission model","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:31:14.78036-06:00","updated_at":"2026-01-04T12:00:42.58338-06:00","closed_at":"2026-01-04T12:00:42.58338-06:00","close_reason":"Closed"}
{"id":"mondodb-i91","title":"hello/isMaster command handler","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:24.833412-06:00","updated_at":"2026-01-04T14:20:24.833412-06:00","dependencies":[{"issue_id":"mondodb-i91","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:24.223867-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-i9l","title":"[RED] Index management","description":"Write failing tests for:\n- collection.createIndex({field: 1}) creates ascending index\n- collection.createIndex({a: 1, b: -1}) compound index\n- collection.createIndex with unique option\n- collection.listIndexes() returns index info\n- collection.dropIndex(name) removes index\n- collection.dropIndexes() removes all","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:50.671708-06:00","updated_at":"2026-01-04T12:01:46.192303-06:00","closed_at":"2026-01-04T12:01:46.192303-06:00","close_reason":"Closed"}
{"id":"mondodb-ij5v","title":"GREEN: Wire DatabaseBrowser to listDatabases/listCollections RPC","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:36.038247-06:00","updated_at":"2026-01-04T14:23:36.038247-06:00","dependencies":[{"issue_id":"mondodb-ij5v","depends_on_id":"mondodb-1l3","type":"blocks","created_at":"2026-01-04T14:24:26.735241-06:00","created_by":"daemon"},{"issue_id":"mondodb-ij5v","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:48.023136-06:00","created_by":"daemon"}]}
{"id":"mondodb-irc","title":"Epic: $function - Secure User Code Execution","description":"Enable MongoDB $function operator using Cloudflare worker-loader for secure V8 isolate execution.\n\n## Overview\nMongoDB deprecated $function due to security concerns. We can bring it back securely using:\n- Cloudflare worker-loader binding for V8 isolate sandboxing\n- globalOutbound: null to block network access\n- Empty env to prevent binding access\n- Timeout enforcement\n\n## Capability Detection\n- Check for env.LOADER presence\n- If absent and $function used → helpful error with wrangler.toml instructions\n- No ALLOW_FUNCTIONS flag needed\n\n## Security Model\n| Layer | Mechanism |\n|-------|-----------|\n| Network | globalOutbound: null |\n| Bindings | Empty env: {} |\n| Time | Configurable timeout |\n| Data | Serialized copies only |\n\n## Scope\n1. Core FunctionExecutor module\n2. Expression translator integration\n3. Aggregation pipeline async support\n4. Unit + integration tests (TDD)\n\n## Out of Scope (Future)\n- $accumulator for custom group operations\n- $where query predicate\n- Function registry for pre-approved functions","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-04T13:30:46.198467-06:00","updated_at":"2026-01-04T14:06:21.577897-06:00","closed_at":"2026-01-04T14:06:21.577897-06:00","close_reason":"Epic complete -  implementation ready, deployed to production. Integration tests pending worker_loaders beta access."}
{"id":"mondodb-iua","title":"[RED] Array update operators","description":"Write failing tests for:\n- $push → json_insert with array append\n- $pull → json_remove matching elements\n- $addToSet → push if not exists\n- $pop → remove first/last element\n- $each modifier for batch operations\n- $slice modifier for limiting array size","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:22:48.455338-06:00","updated_at":"2026-01-04T11:59:48.989548-06:00","closed_at":"2026-01-04T11:59:48.989548-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-iua","depends_on_id":"mondodb-ja8","type":"blocks","created_at":"2026-01-04T11:41:14.966287-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-j84","title":"[RED] Cursor modifiers","description":"Write failing tests for:\n- cursor.limit(n) limits results\n- cursor.skip(n) skips first n\n- cursor.sort({field: 1/-1}) orders results\n- cursor.project({field: 1}) selects fields\n- Chained modifiers work together\n- Modifiers before iteration only","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:28:35.517135-06:00","updated_at":"2026-01-04T11:58:42.737363-06:00","closed_at":"2026-01-04T11:58:42.737363-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-j84","depends_on_id":"mondodb-2r5","type":"blocks","created_at":"2026-01-04T11:45:34.788057-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ja8","title":"[REFACTOR] Field update operators","description":"Refactor:\n- Combine multiple json_set calls\n- Optimize nested path updates\n- Add validation for update operators\n- Handle conflicts between operators","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:22:42.146533-06:00","updated_at":"2026-01-04T11:59:48.989095-06:00","closed_at":"2026-01-04T11:59:48.989095-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-ja8","depends_on_id":"mondodb-nqp","type":"blocks","created_at":"2026-01-04T11:41:09.626941-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-jqi","title":"Compat tests: Cursor behavior","description":"## Task\nCreate compatibility tests for cursor behavior.\n\n## Location\n`test/compatibility/cursor/cursor.compat.test.ts`\n\n## Test Cases\n\n### Iteration Methods\n1. cursor.toArray() returns all documents\n2. cursor.next() returns one at a time\n3. cursor.next() returns null after exhausted\n4. cursor.hasNext() correctness\n5. for await...of iteration\n6. cursor.forEach() callback\n7. cursor.map() transformation\n\n### Modifiers (before execution)\n1. cursor.limit(n) restricts results\n2. cursor.skip(n) offsets results  \n3. cursor.sort(spec) orders results\n4. cursor.project(spec) shapes results\n5. Chaining modifiers\n6. Modifier order doesn't matter (before execution)\n7. Modifier after execution throws?\n\n### Batching\n1. cursor.batchSize() affects retrieval\n2. Default batch size\n3. Large result set pagination\n\n### State\n1. Cursor tracks position\n2. Cursor can be closed\n3. Cursor auto-closes when exhausted\n4. cursor.closed property\n5. Operations on closed cursor\n\n### Edge Cases\n1. Empty result cursor\n2. Single document cursor\n3. Very large result set (memory)\n4. Cursor timeout behavior (if applicable)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:44:08.642696-06:00","updated_at":"2026-01-04T14:31:40.590813-06:00","closed_at":"2026-01-04T14:31:40.590813-06:00","close_reason":"Cursor tests in progress via agent","dependencies":[{"issue_id":"mondodb-jqi","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:50:46.090243-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-jqi","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:50:51.376242-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-jqi","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:50:56.660873-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-jul","title":"REFACTOR: Clean up Env types and add JSDoc","description":"## TDD Phase: REFACTOR\n\n- Add comprehensive JSDoc comments to all types\n- Ensure types match latest Cloudflare Worker types\n- Add type exports to src/types/index.ts\n- Verify wrangler types generation compatibility","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:04:32.115216-06:00","updated_at":"2026-01-04T14:04:32.115216-06:00","dependencies":[{"issue_id":"mondodb-jul","depends_on_id":"mondodb-4jw","type":"blocks","created_at":"2026-01-04T14:06:15.530694-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-k3r","title":"[REFACTOR] SQLite schema initialization","description":"Refactor:\n- Extract schema migrations to separate module\n- Add schema versioning support\n- Optimize index creation\n- Add validation for schema integrity","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:10.71161-06:00","updated_at":"2026-01-04T11:55:40.35962-06:00","closed_at":"2026-01-04T11:55:40.35962-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-k3r","depends_on_id":"mondodb-n47","type":"blocks","created_at":"2026-01-04T11:16:13.715385-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-k7x","title":"Bulk Write Operations","description":"Implement bulk write operations:\n- collection.bulkWrite([operations])\n- insertOne, updateOne, updateMany, deleteOne, deleteMany, replaceOne\n- ordered vs unordered execution\n- Return BulkWriteResult with counts\n- Proper error handling for partial failures","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T13:09:33.424901-06:00","updated_at":"2026-01-04T13:33:23.52215-06:00","closed_at":"2026-01-04T13:33:23.52215-06:00","close_reason":"Closed"}
{"id":"mondodb-klwy","title":"Configure wrangler.jsonc for static assets + API routing","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:22.689069-06:00","updated_at":"2026-01-04T14:24:22.689069-06:00","dependencies":[{"issue_id":"mondodb-klwy","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:06.568578-06:00","created_by":"daemon"},{"issue_id":"mondodb-klwy","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:24.50337-06:00","created_by":"daemon"}]}
{"id":"mondodb-knn","title":"RED: $vectorSearch aggregation stage integration","description":"## TDD Phase: RED (Write Failing Tests)\n\n### Test File: `test/unit/vector-search/aggregation-integration.test.ts`\n\n\\`\\`\\`typescript\ndescribe('\\$vectorSearch in aggregation pipeline', () =\u003e {\n  it('should accept \\$vectorSearch as first stage', async () =\u003e {\n    const result = await collection.aggregate([\n      { \\$vectorSearch: {\n        queryVector: [0.1, 0.2, 0.3],\n        limit: 10\n      }}\n    ]).toArray();\n    \n    expect(result).toHaveLength(2);\n  });\n\n  it('should reject \\$vectorSearch as non-first stage', async () =\u003e {\n    await expect(collection.aggregate([\n      { \\$match: { status: 'active' } },\n      { \\$vectorSearch: { queryVector: [0.1], limit: 10 } }\n    ]).toArray()).rejects.toThrow('must be first stage');\n  });\n\n  it('should support filter in \\$vectorSearch', async () =\u003e {\n    const result = await collection.aggregate([\n      { \\$vectorSearch: {\n        queryVector: [0.1, 0.2, 0.3],\n        limit: 10,\n        filter: { category: 'electronics' }\n      }}\n    ]).toArray();\n    \n    expect(result.every(d =\u003e d.category === 'electronics')).toBe(true);\n  });\n\n  it('should project vectorSearchScore via \\$meta', async () =\u003e {\n    const result = await collection.aggregate([\n      { \\$vectorSearch: { queryVector: [0.1], limit: 10 } },\n      { \\$project: { title: 1, score: { \\$meta: 'vectorSearchScore' } } }\n    ]).toArray();\n    \n    expect(result[0]).toHaveProperty('score');\n    expect(typeof result[0].score).toBe('number');\n  });\n});\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:27.919936-06:00","updated_at":"2026-01-04T14:05:27.919936-06:00","dependencies":[{"issue_id":"mondodb-knn","depends_on_id":"mondodb-bec","type":"blocks","created_at":"2026-01-04T14:06:40.794083-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-koc","title":"[GREEN] Aggregation pipeline stages","description":"Implement AggregationTranslator:\n- Pipeline stage dispatcher\n- $match using QueryTranslator\n- $project with field mapping\n- $group with SUM, AVG, MIN, MAX, COUNT\n- Sort/limit/skip as SQL clauses\n- CTE-based pipeline execution","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:06.299513-06:00","updated_at":"2026-01-04T12:03:16.719753-06:00","closed_at":"2026-01-04T12:03:16.719753-06:00","close_reason":"Closed"}
{"id":"mondodb-kv0","title":"Create comparison utilities for result verification","description":"## Task\nBuild deep comparison utilities that can verify mondodb results match MongoDB results.\n\n## Location\n`test/compatibility/compare.ts`\n\n## Implementation\n```typescript\nexport interface CompareOptions {\n  ignoreFields?: string[]          // Skip specific fields\n  normalizeObjectIds?: boolean     // Compare ObjectId types, not values\n  ignoreArrayOrder?: boolean       // For unordered results\n  compareDates?: boolean           // Date comparison tolerance\n  path?: string                    // Current path for error reporting\n}\n\nexport interface ComparisonResult {\n  match: boolean\n  differences: Difference[]\n}\n\nexport interface Difference {\n  path: string\n  type: 'missing' | 'extra' | 'value_mismatch' | 'type_mismatch'\n  expected: unknown  // MongoDB value\n  actual: unknown    // mondodb value\n  message: string\n}\n\nexport function compareResults\u003cT\u003e(\n  mongoResult: T,\n  mondoResult: T,\n  options: CompareOptions = {}\n): ComparisonResult\n\n// Deep comparison handling:\n// - ObjectId: compare instanceof, not exact value\n// - Arrays: element-by-element or unordered\n// - Nested objects: recursive with path tracking\n// - null vs undefined: strict\n// - Dates: within tolerance\n// - Numbers: exact or within epsilon\n\nexport function normalizeForComparison\u003cT\u003e(value: T): T\n// Strip non-deterministic values, normalize types\n\nexport function formatDifferences(diffs: Difference[]): string\n// Human-readable diff output\n```\n\n## Key Comparisons\n1. InsertOneResult: { acknowledged, insertedId }\n2. UpdateResult: { acknowledged, matchedCount, modifiedCount, upsertedId?, upsertedCount? }\n3. DeleteResult: { acknowledged, deletedCount }\n4. BulkWriteResult: all counts and id mappings\n5. Document arrays: content and order\n6. Error objects: code and message pattern\n\n## TDD Tests\n1. Identical results return match: true\n2. Different values detected with path\n3. ObjectId type matching (not value)\n4. Nested path reporting\n5. Array order handling\n6. Null vs undefined detection","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T13:38:53.477237-06:00","updated_at":"2026-01-04T14:01:09.452022-06:00","closed_at":"2026-01-04T14:01:09.452022-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-kv0","depends_on_id":"mondodb-3kh","type":"blocks","created_at":"2026-01-04T13:45:49.412283-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-kw9k","title":"Setup Vitest for unit testing with React Testing Library","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-04T14:24:19.838702-06:00","updated_at":"2026-01-04T14:24:19.838702-06:00","dependencies":[{"issue_id":"mondodb-kw9k","depends_on_id":"mondodb-9h0g","type":"parent-child","created_at":"2026-01-04T14:25:03.4293-06:00","created_by":"daemon"},{"issue_id":"mondodb-kw9k","depends_on_id":"mondodb-abwz","type":"blocks","created_at":"2026-01-04T14:25:21.836944-06:00","created_by":"daemon"}]}
{"id":"mondodb-l2hf","title":"GREEN: Implement ChangeStreamViewer with WebSocket connection","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:51.321383-06:00","updated_at":"2026-01-04T14:23:51.321383-06:00","dependencies":[{"issue_id":"mondodb-l2hf","depends_on_id":"mondodb-fvbp","type":"blocks","created_at":"2026-01-04T14:25:28.168879-06:00","created_by":"daemon"},{"issue_id":"mondodb-l2hf","depends_on_id":"mondodb-b1t7","type":"parent-child","created_at":"2026-01-04T14:25:33.058618-06:00","created_by":"daemon"}]}
{"id":"mondodb-ljqf","title":"RED: Import unit tests - JSON/CSV parsing, field mapping, validation","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:11.257298-06:00","updated_at":"2026-01-04T14:24:11.257298-06:00","dependencies":[{"issue_id":"mondodb-ljqf","depends_on_id":"mondodb-ril7","type":"parent-child","created_at":"2026-01-04T14:26:00.520239-06:00","created_by":"daemon"}]}
{"id":"mondodb-loui","title":"GREEN: Implement PipelineCanvas with @dnd-kit sortable","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:44.513667-06:00","updated_at":"2026-01-04T14:23:44.513667-06:00","dependencies":[{"issue_id":"mondodb-loui","depends_on_id":"mondodb-xnd6","type":"blocks","created_at":"2026-01-04T14:25:06.044436-06:00","created_by":"daemon"}]}
{"id":"mondodb-mbqq","title":"GREEN: Implement DeleteDocumentDialog with confirmation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:24:09.415641-06:00","updated_at":"2026-01-04T14:24:09.415641-06:00","dependencies":[{"issue_id":"mondodb-mbqq","depends_on_id":"mondodb-tne3","type":"blocks","created_at":"2026-01-04T14:25:17.559373-06:00","created_by":"daemon"},{"issue_id":"mondodb-mbqq","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:05.961358-06:00","created_by":"daemon"}]}
{"id":"mondodb-mcb","title":"REFACTOR: DocumentViewer - syntax highlighting, large doc handling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:18.503434-06:00","updated_at":"2026-01-04T14:23:18.503434-06:00","dependencies":[{"issue_id":"mondodb-mcb","depends_on_id":"mondodb-0aa","type":"blocks","created_at":"2026-01-04T14:25:03.440025-06:00","created_by":"daemon"},{"issue_id":"mondodb-mcb","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:48.305578-06:00","created_by":"daemon"}]}
{"id":"mondodb-mzh","title":"[REFACTOR] MongoCollection CRUD","description":"Refactor:\n- Batch operation optimization\n- Upsert support\n- Write concern handling\n- Type-safe generics","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:26:23.512843-06:00","updated_at":"2026-01-04T12:01:28.035768-06:00","closed_at":"2026-01-04T12:01:28.035768-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-mzh","depends_on_id":"mondodb-65u","type":"blocks","created_at":"2026-01-04T11:42:13.857025-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-n47","title":"[GREEN] SQLite schema initialization","description":"Implement:\n- CREATE TABLE collections (id, name UNIQUE, options JSON)\n- CREATE TABLE documents (id, collection_id FK, _id UNIQUE, data JSON)\n- CREATE INDEX on documents._id\n- Use blockConcurrencyWhile for atomic schema init\n- Store schema_version in KV","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:04.742858-06:00","updated_at":"2026-01-04T11:55:40.358954-06:00","closed_at":"2026-01-04T11:55:40.358954-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-n47","depends_on_id":"mondodb-cht","type":"blocks","created_at":"2026-01-04T11:16:08.487677-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-nqp","title":"[GREEN] Field update operators","description":"Implement UpdateTranslator class:\n- translateFieldUpdate() for $set, $unset, $inc\n- Build json_set chains for multiple updates\n- Handle $min/$max with CASE WHEN\n- Proper type handling for numeric ops","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:22:36.004332-06:00","updated_at":"2026-01-04T11:59:48.98862-06:00","closed_at":"2026-01-04T11:59:48.98862-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-nqp","depends_on_id":"mondodb-fuq","type":"blocks","created_at":"2026-01-04T11:41:04.279633-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-nvk","title":"RED: Connection Panel e2e tests - connect flow, error handling, persistence","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:11.959774-06:00","updated_at":"2026-01-04T14:23:11.959774-06:00","dependencies":[{"issue_id":"mondodb-nvk","depends_on_id":"mondodb-hkmb","type":"blocks","created_at":"2026-01-04T14:24:43.970016-06:00","created_by":"daemon"}]}
{"id":"mondodb-nwl","title":"Compat tests: Comparison query operators","description":"## Task\nCreate compatibility tests for comparison query operators.\n\n## Location\n`test/compatibility/query-operators/comparison.compat.test.ts`\n\n## Operators to Test\n- $eq - Equal\n- $ne - Not equal\n- $gt - Greater than\n- $gte - Greater than or equal\n- $lt - Less than  \n- $lte - Less than or equal\n- $in - In array\n- $nin - Not in array\n\n## Test Cases per Operator\n\n### $eq\n1. Explicit $eq matches value\n2. Implicit equality (no operator)\n3. $eq with null\n4. $eq with ObjectId\n5. $eq with nested field\n6. $eq with array element\n\n### $ne\n1. $ne excludes matching values\n2. $ne with null (tricky!)\n3. $ne returns docs where field doesn't exist\n\n### $gt/$gte/$lt/$lte\n1. Number comparisons\n2. String comparisons (lexicographic)\n3. Date comparisons\n4. Boundary conditions (gte includes, gt excludes)\n5. Comparison with null\n6. Comparison with missing field\n\n### $in\n1. Match any value in array\n2. Empty array $in:[] - no matches\n3. $in with ObjectId array\n4. $in with null in array\n5. $in on array field (any element matches)\n\n### $nin  \n1. Exclude values in array\n2. Empty array $nin:[] - all match\n3. $nin includes docs where field missing\n\n## Critical Edge Cases\n- Type coercion behavior (string '5' vs number 5)\n- null vs undefined vs missing field\n- Array field matching semantics","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:41:30.318046-06:00","updated_at":"2026-01-04T14:08:43.754635-06:00","closed_at":"2026-01-04T14:08:43.754635-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-nwl","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:48:30.085702-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-nwl","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:48:35.373184-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-nwl","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:48:40.659527-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-o47v","title":"GREEN: Implement PipelinePreview with per-stage results","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:07.020581-06:00","updated_at":"2026-01-04T14:24:07.020581-06:00","dependencies":[{"issue_id":"mondodb-o47v","depends_on_id":"mondodb-pr5p","type":"blocks","created_at":"2026-01-04T14:25:19.969656-06:00","created_by":"daemon"}]}
{"id":"mondodb-o6j","title":"[GREEN] MongoCursor iteration","description":"Implement MongoCursor class:\n- Wrap SQLite cursor with lazy iteration\n- Buffer management for batching\n- Async iterator implementation\n- forEach/map/toArray helpers\n- Proper resource cleanup","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:28:23.260816-06:00","updated_at":"2026-01-04T11:58:42.736335-06:00","closed_at":"2026-01-04T11:58:42.736335-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-o6j","depends_on_id":"mondodb-4l5","type":"blocks","created_at":"2026-01-04T11:42:24.597308-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ob6","title":"[GREEN] MongoDatabase operations","description":"Implement MongoDatabase class:\n- Collection factory with caching\n- listCollections via SQL query\n- createCollection with options\n- dropCollection with CASCADE\n- command() dispatcher","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:25:43.87664-06:00","updated_at":"2026-01-04T12:01:28.034187-06:00","closed_at":"2026-01-04T12:01:28.034187-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-ob6","depends_on_id":"mondodb-5tq","type":"blocks","created_at":"2026-01-04T11:41:52.420662-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-omw","title":"[RED] Document CRUD operations in SQLite","description":"Write failing tests for:\n- insertOne stores document with auto _id\n- insertMany stores multiple documents\n- findOne retrieves by _id\n- find retrieves by query\n- updateOne modifies document\n- deleteOne removes document\n- JSON field extraction works","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:17.200959-06:00","updated_at":"2026-01-04T12:07:04.551481-06:00","closed_at":"2026-01-04T12:07:04.551481-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-omw","depends_on_id":"mondodb-k3r","type":"blocks","created_at":"2026-01-04T11:16:18.948254-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-oqd4","title":"GREEN: Implement QueryHistory component with localStorage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:57.51339-06:00","updated_at":"2026-01-04T14:23:57.51339-06:00","dependencies":[{"issue_id":"mondodb-oqd4","depends_on_id":"mondodb-xwu9","type":"blocks","created_at":"2026-01-04T14:24:47.91236-06:00","created_by":"daemon"},{"issue_id":"mondodb-oqd4","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:05.437896-06:00","created_by":"daemon"}]}
{"id":"mondodb-ovt","title":"[GREEN] Index management","description":"Implement:\n- CREATE INDEX on json_extract expressions\n- Compound index with multiple columns\n- UNIQUE INDEX for unique constraint\n- Index metadata storage in collections table\n- DROP INDEX with name mapping\n- List indexes from SQLite schema","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:56.946913-06:00","updated_at":"2026-01-04T12:01:46.19329-06:00","closed_at":"2026-01-04T12:01:46.19329-06:00","close_reason":"Closed"}
{"id":"mondodb-owj","title":"[GREEN] Project initialization with bun and TypeScript","description":"Implement:\n- Initialize bun project with package.json\n- Configure TypeScript with strict mode\n- Add dependencies: capnweb, @cloudflare/workers-types\n- Configure wrangler.toml for Durable Objects\n- Set up build scripts","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:12:47.836146-06:00","updated_at":"2026-01-04T12:01:25.223344-06:00","closed_at":"2026-01-04T12:01:25.223344-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-owj","depends_on_id":"mondodb-9gu","type":"blocks","created_at":"2026-01-04T11:13:13.036539-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-p6z","title":"Feature: Aggregation Pipeline Builder","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-04T14:22:51.363497-06:00","updated_at":"2026-01-04T14:22:51.363497-06:00"}
{"id":"mondodb-pf7","title":"[EPIC] RPC Layer - capnweb \u0026 Workers RPC","description":"Expose mondodb API via capnweb for browser/external clients and Workers RPC for service bindings.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:14:18.799754-06:00","updated_at":"2026-01-04T12:07:04.553219-06:00","closed_at":"2026-01-04T12:07:04.553219-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-pf7","depends_on_id":"mondodb-mzh","type":"blocks","created_at":"2026-01-04T11:39:56.829286-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-pfn","title":"[REFACTOR] MongoDatabase operations","description":"Refactor:\n- Collection instance caching\n- Batch collection operations\n- Validation schema support\n- Stats and profiling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:25:50.272137-06:00","updated_at":"2026-01-04T12:01:28.034585-06:00","closed_at":"2026-01-04T12:01:28.034585-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-pfn","depends_on_id":"mondodb-ob6","type":"blocks","created_at":"2026-01-04T11:41:57.774867-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-pr5p","title":"RED: Pipeline Preview unit tests - intermediate results, sampling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:05.637301-06:00","updated_at":"2026-01-04T14:24:05.637301-06:00","dependencies":[{"issue_id":"mondodb-pr5p","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:39.988072-06:00","created_by":"daemon"}]}
{"id":"mondodb-q9e","title":"Compat tests: Logical query operators","description":"## Task\nCreate compatibility tests for logical query operators.\n\n## Location\n`test/compatibility/query-operators/logical.compat.test.ts`\n\n## Operators\n- $and - Logical AND\n- $or - Logical OR  \n- $nor - Logical NOR\n- $not - Logical NOT\n\n## Test Cases\n\n### $and\n1. Explicit $and with multiple conditions\n2. Implicit $and (multiple fields in filter)\n3. $and with same field multiple times\n4. $and with nested $or\n5. Empty $and array behavior\n\n### $or\n1. Match any condition\n2. $or with overlapping matches (no duplicates)\n3. $or with complex nested conditions\n4. Empty $or array behavior\n5. Single condition in $or\n\n### $nor\n1. Exclude all matching conditions\n2. $nor vs $not + $or equivalence\n3. Empty $nor array behavior\n\n### $not\n1. $not with comparison operator\n2. $not with $regex\n3. $not with $in\n4. Double negation behavior\n5. $not cannot wrap $and/$or directly\n\n## Edge Cases\n- Deeply nested logical operators\n- Logical operators with array fields\n- Short-circuit evaluation (if any)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:41:46.802528-06:00","updated_at":"2026-01-04T14:08:43.755479-06:00","closed_at":"2026-01-04T14:08:43.755479-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-q9e","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:48:45.953387-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-q9e","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:48:51.244049-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-q9e","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:48:56.535873-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-qow","title":"[GREEN] MongoClient connection","description":"Implement MongoClient class:\n- URI parser for mondodb:// scheme\n- RPC session creation via capnweb\n- Connection state management\n- Database name extraction\n- db() factory method","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:24:24.952429-06:00","updated_at":"2026-01-04T12:01:28.032899-06:00","closed_at":"2026-01-04T12:01:28.032899-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-qow","depends_on_id":"mondodb-0ve","type":"blocks","created_at":"2026-01-04T11:41:36.351367-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-rcz","title":"[RED] Advanced aggregation stages","description":"Write failing tests for:\n- $lookup → LEFT JOIN\n- $unwind → array expansion\n- $addFields → computed columns\n- $bucket → range grouping\n- $facet → multi-pipeline execution","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:18.924772-06:00","updated_at":"2026-01-04T12:03:16.720783-06:00","closed_at":"2026-01-04T12:03:16.720783-06:00","close_reason":"Closed"}
{"id":"mondodb-rfdy","title":"REFACTOR: Index e2e - background index creation progress","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:08.634252-06:00","updated_at":"2026-01-04T14:24:08.634252-06:00","dependencies":[{"issue_id":"mondodb-rfdy","depends_on_id":"mondodb-xvn8","type":"blocks","created_at":"2026-01-04T14:25:12.957844-06:00","created_by":"daemon"}]}
{"id":"mondodb-ril","title":"getMore cursor pagination","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:20:46.228006-06:00","updated_at":"2026-01-04T14:20:46.228006-06:00","dependencies":[{"issue_id":"mondodb-ril","depends_on_id":"mondodb-sdn","type":"blocks","created_at":"2026-01-04T14:21:45.557686-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ril7","title":"Feature: Data Import/Export","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-04T14:24:09.728124-06:00","updated_at":"2026-01-04T14:24:09.728124-06:00"}
{"id":"mondodb-rkj","title":"RED: Query Bar e2e tests - execute query, filter results, query history","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:32.14651-06:00","updated_at":"2026-01-04T14:23:32.14651-06:00","dependencies":[{"issue_id":"mondodb-rkj","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:02.740254-06:00","created_by":"daemon"}]}
{"id":"mondodb-rn0","title":"RED: VectorTranslator class structure","description":"## TDD Phase: RED (Write Failing Tests)\n\n### Test File: `test/unit/vector-search/vector-translator.test.ts`\n\n\\`\\`\\`typescript\nimport { describe, it, expect, vi } from 'vitest';\nimport { VectorTranslator } from '../../../src/translator/vector-translator';\n\ndescribe('VectorTranslator', () =\u003e {\n  const mockVectorize = {\n    query: vi.fn(),\n    upsert: vi.fn(),\n    deleteByIds: vi.fn()\n  };\n\n  describe('constructor', () =\u003e {\n    it('should accept Vectorize binding', () =\u003e {\n      const translator = new VectorTranslator(mockVectorize as any);\n      expect(translator).toBeInstanceOf(VectorTranslator);\n    });\n\n    it('should accept optional AI binding', () =\u003e {\n      const mockAI = { run: vi.fn() };\n      const translator = new VectorTranslator(mockVectorize as any, mockAI as any);\n      expect(translator).toBeInstanceOf(VectorTranslator);\n    });\n\n    it('should accept custom embedding model', () =\u003e {\n      const translator = new VectorTranslator(\n        mockVectorize as any,\n        undefined,\n        '@cf/baai/bge-base-en-v1.5'\n      );\n      expect(translator).toBeInstanceOf(VectorTranslator);\n    });\n  });\n\n  describe('translateVectorSearch', () =\u003e {\n    it('should translate basic \\$vectorSearch with queryVector', async () =\u003e {\n      mockVectorize.query.mockResolvedValue({\n        count: 2,\n        matches: [\n          { id: 'doc1', score: 0.95 },\n          { id: 'doc2', score: 0.87 }\n        ]\n      });\n\n      const translator = new VectorTranslator(mockVectorize as any);\n      const result = await translator.translateVectorSearch({\n        queryVector: [0.1, 0.2, 0.3],\n        limit: 10\n      }, 'products');\n\n      expect(result.docIds).toEqual(['doc1', 'doc2']);\n      expect(result.scores.get('doc1')).toBe(0.95);\n    });\n\n    it('should throw if no queryVector and no AI binding', async () =\u003e {\n      const translator = new VectorTranslator(mockVectorize as any);\n      \n      await expect(translator.translateVectorSearch({\n        query: 'semantic search',\n        limit: 10\n      }, 'products')).rejects.toThrow('queryVector or query with AI binding');\n    });\n  });\n});\n\\`\\`\\`\n\n### Expected: Tests fail because VectorTranslator doesn't exist","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:49.121498-06:00","updated_at":"2026-01-04T14:04:49.121498-06:00","dependencies":[{"issue_id":"mondodb-rn0","depends_on_id":"mondodb-jul","type":"blocks","created_at":"2026-01-04T14:06:28.256413-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-rsu","title":"[EPIC] Update Translation Engine","description":"Translate MongoDB update operators ($set, $inc, $push, etc.) to SQL UPDATE statements.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T11:13:53.729902-06:00","updated_at":"2026-01-04T12:07:04.554357-06:00","closed_at":"2026-01-04T12:07:04.554357-06:00","close_reason":"Implementation complete - 539/570 tests passing","dependencies":[{"issue_id":"mondodb-rsu","depends_on_id":"mondodb-t04","type":"blocks","created_at":"2026-01-04T11:39:41.163882-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-sc0v","title":"GREEN: Wire Aggregation Builder to aggregate() RPC","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:24.868464-06:00","updated_at":"2026-01-04T14:24:24.868464-06:00","dependencies":[{"issue_id":"mondodb-sc0v","depends_on_id":"mondodb-7i9f","type":"blocks","created_at":"2026-01-04T14:25:24.563593-06:00","created_by":"daemon"}]}
{"id":"mondodb-sdn","title":"Wire Protocol \u0026 Compass Support","description":"Implement MongoDB wire protocol server to enable Compass and native MongoDB driver compatibility","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:20:00.090372-06:00","updated_at":"2026-01-04T14:22:03.862475-06:00"}
{"id":"mondodb-t04","title":"[REFACTOR] Element and array query operators","description":"Refactor:\n- Optimize array queries with CTE\n- Cache type mappings\n- Add specialized array indexes\n- Performance tuning for large arrays","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:18:06.348324-06:00","updated_at":"2026-01-04T11:58:26.708661-06:00","closed_at":"2026-01-04T11:58:26.708661-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-t04","depends_on_id":"mondodb-0rr","type":"blocks","created_at":"2026-01-04T11:22:18.574154-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-t7j","title":"RED: Document Editor unit tests - inline edit, validation, diff preview","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:31.633876-06:00","updated_at":"2026-01-04T14:23:31.633876-06:00","dependencies":[{"issue_id":"mondodb-t7j","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:25:49.73313-06:00","created_by":"daemon"}]}
{"id":"mondodb-t9e4","title":"RED: Change Streams e2e tests - watch collection, see inserts/updates","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:23:56.322876-06:00","updated_at":"2026-01-04T14:23:56.322876-06:00","dependencies":[{"issue_id":"mondodb-t9e4","depends_on_id":"mondodb-l2hf","type":"blocks","created_at":"2026-01-04T14:25:29.436581-06:00","created_by":"daemon"},{"issue_id":"mondodb-t9e4","depends_on_id":"mondodb-b1t7","type":"parent-child","created_at":"2026-01-04T14:25:34.384059-06:00","created_by":"daemon"}]}
{"id":"mondodb-tb1q","title":"GREEN: Implement DropIndexDialog with safety checks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:56.243133-06:00","updated_at":"2026-01-04T14:23:56.243133-06:00","dependencies":[{"issue_id":"mondodb-tb1q","depends_on_id":"mondodb-wpv4","type":"blocks","created_at":"2026-01-04T14:25:10.294978-06:00","created_by":"daemon"}]}
{"id":"mondodb-tg6","title":"Compat tests: replaceOne","description":"## Task\nCreate compatibility tests for replaceOne operation.\n\n## Location\n`test/compatibility/crud/replace.compat.test.ts`\n\n## Test Cases\n\n### replaceOne\n1. Replace existing document - returns UpdateResult\n2. Preserves _id on replace\n3. matchedCount when found\n4. modifiedCount when replaced\n5. No match - zero counts\n6. upsert:true creates document\n7. upsertedId on upsert\n8. Replacement cannot contain update operators (should error)\n9. Replace with empty document {}\n10. Replace removes fields not in replacement\n\n### Edge Cases\n1. Replace with same content (modifiedCount behavior)\n2. Replace nested document completely\n3. _id in replacement document (should be ignored or error?)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:40:47.98309-06:00","updated_at":"2026-01-04T14:14:06.213965-06:00","closed_at":"2026-01-04T14:14:06.213965-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-tg6","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:47:48.378197-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-tg6","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:47:53.658564-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-tg6","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:47:58.947532-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-tne3","title":"RED: Delete Document unit tests - confirmation, multi-select, undo","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:24:07.897486-06:00","updated_at":"2026-01-04T14:24:07.897486-06:00","dependencies":[{"issue_id":"mondodb-tne3","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:04.617839-06:00","created_by":"daemon"}]}
{"id":"mondodb-tqsz","title":"GREEN: Implement StageEditor forms for top 10 stages","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:03.144503-06:00","updated_at":"2026-01-04T14:24:03.144503-06:00","dependencies":[{"issue_id":"mondodb-tqsz","depends_on_id":"mondodb-6hhd","type":"blocks","created_at":"2026-01-04T14:25:08.776937-06:00","created_by":"daemon"}]}
{"id":"mondodb-tuy","title":"[GREEN] capnweb RPC client","description":"Implement:\n- MongoClient wrapper over capnweb session\n- HTTP batch mode for efficiency\n- WebSocket mode for long-lived connections\n- Stub proxy for database/collection/cursor\n- using blocks for resource management","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:30:50.212945-06:00","updated_at":"2026-01-04T12:00:42.581627-06:00","closed_at":"2026-01-04T12:00:42.581627-06:00","close_reason":"Closed"}
{"id":"mondodb-txn","title":"Epic: Vector \u0026 Hybrid Search for mondodb","description":"# Epic: Vector \u0026 Hybrid Search for mondodb\n\n## Vision\nEnable zero-configuration hybrid search (semantic + full-text) for mondodb using Cloudflare Vectorize and Workers AI, providing MongoDB Atlas Search-like capabilities on Cloudflare's edge infrastructure.\n\n## Key Features\n\n### 1. $vectorSearch Aggregation Stage\n- MongoDB-compatible $vectorSearch syntax\n- Cloudflare Vectorize integration via `env.VECTORIZE`\n- Auto-embedding of query strings via Workers AI\n- Pre-filtering via Vectorize metadata\n\n### 2. Automatic Embedding Pipeline\n- Documents automatically embedded on insert/update\n- Smart field filtering (exclude IDs, timestamps by default)\n- YAML serialization for structured embedding\n- Configurable per-collection embedding settings\n- Default model: `@cf/baai/bge-m3` (1024d, multilingual, $0.012/M tokens)\n\n### 3. Enhanced Full-Text Search ($search)\n- Atlas Search-compatible `$search` aggregation stage\n- Compound queries (must/should/mustNot/filter)\n- Text, phrase, wildcard, autocomplete operators\n- Powered by SQLite FTS5 (already integrated)\n\n### 4. Hybrid Search Fusion\n- `$rankFusion` - Reciprocal Rank Fusion (RRF)\n- `$scoreFusion` - Weighted score combination\n- Unified scoring via `$meta` projections\n\n## Architecture\n\n```\nDocument Insert → YAML Serialize → Workers AI → Vectorize\n                                              ↓\n$vectorSearch → VectorTranslator → Vectorize Query → Results\n$search       → SearchTranslator → FTS5 Query     → Results\n                                              ↓\n                              Hybrid Fusion → Ranked Results\n```\n\n## Success Criteria\n- [ ] All TDD tests passing (red → green → refactor)\n- [ ] MongoDB Atlas $vectorSearch syntax compatibility\n- [ ] Sub-100ms query latency for vector search\n- [ ] Automatic embedding with zero configuration\n- [ ] Hybrid search combining vector + full-text","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:00:04.971689-06:00","updated_at":"2026-01-04T14:00:04.971689-06:00"}
{"id":"mondodb-txn.1","title":"Epic: Hybrid Search Fusion","description":"# Hybrid Search Fusion\n\nCombine vector search and full-text search results using rank or score fusion algorithms.\n\n## Features\n- \\$rankFusion - Reciprocal Rank Fusion (RRF)\n- \\$scoreFusion - Weighted score combination\n- Support for combining \\$vectorSearch + \\$search results\n- Unified scoring via \\$meta projections\n\n## Algorithms\n1. **RRF (Reciprocal Rank Fusion)**: score = Σ 1/(k + rank)\n2. **Score Fusion**: score = w1*score1 + w2*score2 (normalized)","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:03:49.361514-06:00","updated_at":"2026-01-04T14:03:49.361514-06:00","dependencies":[{"issue_id":"mondodb-txn.1","depends_on_id":"mondodb-txn","type":"parent-child","created_at":"2026-01-04T14:03:49.362217-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1","depends_on_id":"mondodb-u2m","type":"blocks","created_at":"2026-01-04T14:07:31.126351-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1","depends_on_id":"mondodb-txn.2","type":"blocks","created_at":"2026-01-04T14:07:37.483287-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.1","title":"RED: HybridSearchTranslator class","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/hybrid/hybrid-translator.test.ts\\`\n\n\\`\\`\\`typescript\nimport { describe, it, expect } from 'vitest';\nimport { HybridSearchTranslator } from '../../../src/translator/hybrid-translator';\n\ndescribe('HybridSearchTranslator', () =\u003e {\n  describe('rankFusion', () =\u003e {\n    it('should combine results using RRF algorithm', () =\u003e {\n      const translator = new HybridSearchTranslator();\n      \n      const vectorResults = [\n        { docId: 'doc1', score: 0.95 },\n        { docId: 'doc2', score: 0.87 },\n        { docId: 'doc3', score: 0.75 }\n      ];\n      \n      const textResults = [\n        { docId: 'doc2', score: -1.5 },  // FTS5 rank (lower is better)\n        { docId: 'doc4', score: -2.1 },\n        { docId: 'doc1', score: -3.0 }\n      ];\n      \n      const fused = translator.rankFusion(vectorResults, textResults);\n      \n      // doc1 and doc2 appear in both, should rank higher\n      expect(fused[0].docId).toBe('doc2');  // rank 1 in vector, rank 1 in text\n      expect(fused[1].docId).toBe('doc1');  // rank 1 in vector, rank 3 in text\n      expect(fused.map(f =\u003e f.docId)).toContain('doc3');\n      expect(fused.map(f =\u003e f.docId)).toContain('doc4');\n    });\n\n    it('should use k=60 constant for RRF', () =\u003e {\n      const translator = new HybridSearchTranslator();\n      \n      // Single source - RRF score should be 1/(60+1) for rank 1\n      const results = translator.rankFusion(\n        [{ docId: 'doc1', score: 0.95 }],\n        []\n      );\n      \n      expect(results[0].fusedScore).toBeCloseTo(1/61, 5);\n    });\n  });\n\n  describe('scoreFusion', () =\u003e {\n    it('should combine scores with default weights (0.5, 0.5)', () =\u003e {\n      const translator = new HybridSearchTranslator();\n      \n      const vectorResults = [{ docId: 'doc1', score: 0.8 }];\n      const textResults = [{ docId: 'doc1', score: 0.6 }];\n      \n      const fused = translator.scoreFusion(vectorResults, textResults);\n      \n      // Normalized and weighted: (0.8 * 0.5) + (0.6 * 0.5) = 0.7\n      expect(fused[0].fusedScore).toBeCloseTo(0.7, 2);\n    });\n\n    it('should apply custom weights', () =\u003e {\n      const translator = new HybridSearchTranslator();\n      \n      const vectorResults = [{ docId: 'doc1', score: 1.0 }];\n      const textResults = [{ docId: 'doc1', score: 0.5 }];\n      \n      const fused = translator.scoreFusion(\n        vectorResults, \n        textResults,\n        { vector: 0.7, text: 0.3 }\n      );\n      \n      // (1.0 * 0.7) + (0.5 * 0.3) = 0.85\n      expect(fused[0].fusedScore).toBeCloseTo(0.85, 2);\n    });\n\n    it('should normalize scores before fusion', () =\u003e {\n      const translator = new HybridSearchTranslator();\n      \n      // FTS5 returns negative scores (closer to 0 is better)\n      const vectorResults = [\n        { docId: 'doc1', score: 0.9 },\n        { docId: 'doc2', score: 0.5 }\n      ];\n      const textResults = [\n        { docId: 'doc1', score: -1.0 },\n        { docId: 'doc2', score: -3.0 }\n      ];\n      \n      const fused = translator.scoreFusion(vectorResults, textResults);\n      \n      // doc1 should rank higher (better in both)\n      expect(fused[0].docId).toBe('doc1');\n    });\n  });\n});\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:12.600156-06:00","updated_at":"2026-01-04T14:27:52.61787-06:00","closed_at":"2026-01-04T14:27:52.61787-06:00","close_reason":"Closed"}
{"id":"mondodb-txn.1.2","title":"GREEN: Implement HybridSearchTranslator","description":"## TDD Phase: GREEN\n\n### Implementation: \\`src/translator/hybrid-translator.ts\\`\n\n\\`\\`\\`typescript\ninterface SearchResult {\n  docId: string;\n  score: number;\n}\n\ninterface FusedResult {\n  docId: string;\n  fusedScore: number;\n}\n\ninterface FusionWeights {\n  vector?: number;\n  text?: number;\n}\n\nexport class HybridSearchTranslator {\n  private readonly RRF_K = 60;  // Standard RRF constant\n\n  rankFusion(\n    vectorResults: SearchResult[],\n    textResults: SearchResult[]\n  ): FusedResult[] {\n    const scores = new Map\u003cstring, number\u003e();\n    \n    // Add vector search contributions\n    vectorResults.forEach((r, rank) =\u003e {\n      const rrfScore = 1 / (this.RRF_K + rank + 1);\n      scores.set(r.docId, (scores.get(r.docId) || 0) + rrfScore);\n    });\n    \n    // Add text search contributions\n    textResults.forEach((r, rank) =\u003e {\n      const rrfScore = 1 / (this.RRF_K + rank + 1);\n      scores.set(r.docId, (scores.get(r.docId) || 0) + rrfScore);\n    });\n    \n    return Array.from(scores.entries())\n      .map(([docId, fusedScore]) =\u003e ({ docId, fusedScore }))\n      .sort((a, b) =\u003e b.fusedScore - a.fusedScore);\n  }\n\n  scoreFusion(\n    vectorResults: SearchResult[],\n    textResults: SearchResult[],\n    weights: FusionWeights = { vector: 0.5, text: 0.5 }\n  ): FusedResult[] {\n    const vectorWeight = weights.vector ?? 0.5;\n    const textWeight = weights.text ?? 0.5;\n    \n    // Normalize vector scores (already 0-1 for cosine)\n    const normalizedVector = this.normalizeScores(vectorResults);\n    \n    // Normalize text scores (FTS5 rank is negative, closer to 0 is better)\n    const normalizedText = this.normalizeScores(textResults, true);\n    \n    // Combine scores\n    const scores = new Map\u003cstring, number\u003e();\n    \n    for (const r of normalizedVector) {\n      scores.set(r.docId, (scores.get(r.docId) || 0) + r.score * vectorWeight);\n    }\n    \n    for (const r of normalizedText) {\n      scores.set(r.docId, (scores.get(r.docId) || 0) + r.score * textWeight);\n    }\n    \n    return Array.from(scores.entries())\n      .map(([docId, fusedScore]) =\u003e ({ docId, fusedScore }))\n      .sort((a, b) =\u003e b.fusedScore - a.fusedScore);\n  }\n\n  private normalizeScores(\n    results: SearchResult[], \n    invertNegative = false\n  ): SearchResult[] {\n    if (results.length === 0) return [];\n    \n    let scores = results.map(r =\u003e r.score);\n    \n    // Handle FTS5 negative scores\n    if (invertNegative \u0026\u0026 scores.some(s =\u003e s \u003c 0)) {\n      const maxAbs = Math.max(...scores.map(Math.abs));\n      scores = scores.map(s =\u003e 1 - (Math.abs(s) / maxAbs));\n    }\n    \n    // Min-max normalization\n    const min = Math.min(...scores);\n    const max = Math.max(...scores);\n    const range = max - min || 1;\n    \n    return results.map((r, i) =\u003e ({\n      docId: r.docId,\n      score: (scores[i] - min) / range\n    }));\n  }\n}\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:33.907987-06:00","updated_at":"2026-01-04T14:27:54.222504-06:00","closed_at":"2026-01-04T14:27:54.222504-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.1.2","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:04:33.908774-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.2","depends_on_id":"mondodb-txn.1.1","type":"blocks","created_at":"2026-01-04T14:06:10.411522-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.3","title":"RED: $rankFusion aggregation stage","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/hybrid/rank-fusion-stage.test.ts\\`\n\n\\`\\`\\`typescript\ndescribe('\\$rankFusion aggregation stage', () =\u003e {\n  it('should combine vector and text search results', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'semantic AI', limit: 20 } },\n      { \\$search: { text: { query: 'artificial intelligence' } } },\n      { \\$rankFusion: {} },\n      { \\$limit: 10 }\n    ]).toArray();\n    \n    expect(results).toHaveLength(10);\n    // Results should be re-ranked by fusion\n  });\n\n  it('should expose rankFusionScore via \\$meta', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'test', limit: 10 } },\n      { \\$search: { text: { query: 'test' } } },\n      { \\$rankFusion: {} },\n      { \\$project: { \n        title: 1, \n        score: { \\$meta: 'rankFusionScore' } \n      }}\n    ]).toArray();\n    \n    expect(results[0]).toHaveProperty('score');\n    expect(typeof results[0].score).toBe('number');\n  });\n\n  it('should work with only vector search', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'test', limit: 10 } },\n      { \\$rankFusion: {} }\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n\n  it('should work with only text search', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: { text: { query: 'test' } } },\n      { \\$rankFusion: {} }\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n});\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:50.438173-06:00","updated_at":"2026-01-04T14:31:09.868464-06:00","closed_at":"2026-01-04T14:31:09.868464-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.1.3","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:04:50.439901-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.3","depends_on_id":"mondodb-txn.1.2","type":"blocks","created_at":"2026-01-04T14:06:36.249289-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.4","title":"GREEN: Implement $rankFusion stage","description":"## TDD Phase: GREEN\n\n### Modify: \\`src/translator/aggregation-translator.ts\\`\n\nTrack vector and text search results through pipeline:\n\n\\`\\`\\`typescript\ninterface PipelineContext {\n  vectorResults?: Array\u003c{ docId: string; score: number }\u003e;\n  textResults?: Array\u003c{ docId: string; score: number }\u003e;\n}\n\ncase '\\$rankFusion':\n  return this.translateRankFusion(context);\n\nprivate translateRankFusion(context: PipelineContext): StageResult {\n  const hybrid = new HybridSearchTranslator();\n  const fused = hybrid.rankFusion(\n    context.vectorResults || [],\n    context.textResults || []\n  );\n  \n  // Generate SQL to fetch in fused order\n  const docIds = fused.map(f =\u003e f.docId);\n  const scoreCase = this.generateScoreCase(fused);\n  \n  return {\n    selectClause: \\`*, \\${scoreCase} as __rankFusionScore\\`,\n    whereClause: \\`doc_id IN (\\${docIds.map(() =\u003e '?').join(',')})\\`,\n    orderByClause: this.generateOrderCase(docIds),\n    params: docIds\n  };\n}\n\nprivate generateScoreCase(fused: FusedResult[]): string {\n  return \\`CASE doc_id \\${fused.map(f =\u003e \n    \\`WHEN '\\${f.docId}' THEN \\${f.fusedScore}\\`\n  ).join(' ')} END\\`;\n}\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:10.624824-06:00","updated_at":"2026-01-04T14:31:10.120235-06:00","closed_at":"2026-01-04T14:31:10.120235-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.1.4","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:05:10.625554-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.4","depends_on_id":"mondodb-txn.1.3","type":"blocks","created_at":"2026-01-04T14:06:17.221519-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.5","title":"RED: $scoreFusion aggregation stage","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/hybrid/score-fusion-stage.test.ts\\`\n\n\\`\\`\\`typescript\ndescribe('\\$scoreFusion aggregation stage', () =\u003e {\n  it('should combine with default weights (0.5, 0.5)', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'test', limit: 20 } },\n      { \\$search: { text: { query: 'test' } } },\n      { \\$scoreFusion: {} }\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n\n  it('should apply custom weights', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'test', limit: 20 } },\n      { \\$search: { text: { query: 'test' } } },\n      { \\$scoreFusion: { \n        weights: { \n          vectorSearchScore: 0.7, \n          searchScore: 0.3 \n        } \n      }}\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n\n  it('should expose scoreFusionScore via \\$meta', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$vectorSearch: { query: 'test', limit: 10 } },\n      { \\$search: { text: { query: 'test' } } },\n      { \\$scoreFusion: {} },\n      { \\$project: { \n        title: 1, \n        score: { \\$meta: 'scoreFusionScore' } \n      }}\n    ]).toArray();\n    \n    expect(results[0]).toHaveProperty('score');\n  });\n});\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:28.261923-06:00","updated_at":"2026-01-04T14:31:10.388281-06:00","closed_at":"2026-01-04T14:31:10.388281-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.1.5","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:05:28.262661-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.5","depends_on_id":"mondodb-txn.1.2","type":"blocks","created_at":"2026-01-04T14:06:42.384879-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.6","title":"GREEN: Implement $scoreFusion stage","description":"## TDD Phase: GREEN\n\n### Implementation\n\n\\`\\`\\`typescript\ninterface ScoreFusionStage {\n  weights?: {\n    vectorSearchScore?: number;\n    searchScore?: number;\n  };\n}\n\ncase '\\$scoreFusion':\n  return this.translateScoreFusion(stageValue, context);\n\nprivate translateScoreFusion(\n  stage: ScoreFusionStage, \n  context: PipelineContext\n): StageResult {\n  const weights = {\n    vector: stage.weights?.vectorSearchScore ?? 0.5,\n    text: stage.weights?.searchScore ?? 0.5\n  };\n  \n  const hybrid = new HybridSearchTranslator();\n  const fused = hybrid.scoreFusion(\n    context.vectorResults || [],\n    context.textResults || [],\n    weights\n  );\n  \n  const docIds = fused.map(f =\u003e f.docId);\n  const scoreCase = this.generateScoreCase(fused);\n  \n  return {\n    selectClause: \\`*, \\${scoreCase} as __scoreFusionScore\\`,\n    whereClause: \\`doc_id IN (\\${docIds.map(() =\u003e '?').join(',')})\\`,\n    orderByClause: this.generateOrderCase(docIds),\n    params: docIds\n  };\n}\n\\`\\`\\`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:43.314515-06:00","updated_at":"2026-01-04T14:31:10.65058-06:00","closed_at":"2026-01-04T14:31:10.65058-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.1.6","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:05:43.315096-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.6","depends_on_id":"mondodb-txn.1.5","type":"blocks","created_at":"2026-01-04T14:06:23.925261-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.1.7","title":"REFACTOR: Hybrid search optimization and caching","description":"## TDD Phase: REFACTOR\n\n- Cache intermediate results during pipeline execution\n- Optimize score normalization for large result sets\n- Add configurable RRF k constant\n- Support more than 2 search sources\n- Add hybrid search explain mode\n- Consider parallel execution of vector + text search","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:05:57.089799-06:00","updated_at":"2026-01-04T14:05:57.089799-06:00","dependencies":[{"issue_id":"mondodb-txn.1.7","depends_on_id":"mondodb-txn.1","type":"parent-child","created_at":"2026-01-04T14:05:57.090639-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.7","depends_on_id":"mondodb-txn.1.4","type":"blocks","created_at":"2026-01-04T14:06:55.210507-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.1.7","depends_on_id":"mondodb-txn.1.6","type":"blocks","created_at":"2026-01-04T14:07:01.320845-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2","title":"Epic: Enhanced Full-Text Search ($search)","description":"# Enhanced Full-Text Search\n\nMongoDB Atlas Search-compatible \\$search aggregation stage powered by SQLite FTS5.\n\n## Features\n- \\$search aggregation stage\n- Compound queries (must/should/mustNot/filter)\n- Text, phrase, wildcard, autocomplete operators\n- highlight() and snippet() support\n- BM25 ranking with column weights\n\n## Operators\n- text: Basic text search\n- phrase: Exact phrase matching\n- wildcard: Prefix/suffix wildcards\n- autocomplete: Prefix-based autocomplete\n- near: Proximity search (NEAR operator)","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:03:49.607117-06:00","updated_at":"2026-01-04T14:03:49.607117-06:00","dependencies":[{"issue_id":"mondodb-txn.2","depends_on_id":"mondodb-txn","type":"parent-child","created_at":"2026-01-04T14:03:49.607862-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2","depends_on_id":"mondodb-txn","type":"blocks","created_at":"2026-01-04T14:09:04.093872-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.1","title":"RED: SearchTranslator class structure","description":"## TDD Phase: RED\n\n### Test File: `test/unit/search/search-translator.test.ts`\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { SearchTranslator } from '../../../src/translator/search-translator';\n\ndescribe('SearchTranslator', () =\u003e {\n  const translator = new SearchTranslator();\n\n  describe('text operator', () =\u003e {\n    it('should translate basic text search', () =\u003e {\n      const result = translator.translateSearch({\n        text: { query: 'hello world', path: 'content' }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toBe('content:hello content:world');\n    });\n\n    it('should handle text search without path (all fields)', () =\u003e {\n      const result = translator.translateSearch({\n        text: { query: 'hello' }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toBe('hello');\n    });\n  });\n\n  describe('phrase operator', () =\u003e {\n    it('should translate phrase search', () =\u003e {\n      const result = translator.translateSearch({\n        phrase: { query: 'hello world', path: 'title' }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toBe('title:\"hello world\"');\n    });\n  });\n\n  describe('wildcard operator', () =\u003e {\n    it('should translate prefix wildcard', () =\u003e {\n      const result = translator.translateSearch({\n        wildcard: { query: 'data*', path: 'content' }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toBe('content:data*');\n    });\n  });\n\n  describe('compound operator', () =\u003e {\n    it('should translate must as AND', () =\u003e {\n      const result = translator.translateSearch({\n        compound: {\n          must: [\n            { text: { query: 'hello', path: 'title' } },\n            { text: { query: 'world', path: 'content' } }\n          ]\n        }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toContain('AND');\n    });\n\n    it('should translate should as OR', () =\u003e {\n      const result = translator.translateSearch({\n        compound: {\n          should: [\n            { text: { query: 'hello' } },\n            { text: { query: 'world' } }\n          ]\n        }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toContain('OR');\n    });\n\n    it('should translate mustNot as NOT', () =\u003e {\n      const result = translator.translateSearch({\n        compound: {\n          must: [{ text: { query: 'hello' } }],\n          mustNot: [{ text: { query: 'goodbye' } }]\n        }\n      }, 'articles');\n      \n      expect(result.ftsMatch).toContain('NOT');\n    });\n  });\n});\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:07.809391-06:00","updated_at":"2026-01-04T14:26:45.728882-06:00","closed_at":"2026-01-04T14:26:45.728882-06:00","close_reason":"Closed"}
{"id":"mondodb-txn.2.2","title":"GREEN: Implement SearchTranslator","description":"## TDD Phase: GREEN\n\n### Implementation: `src/translator/search-translator.ts`\n\n```typescript\ninterface TextClause {\n  query: string;\n  path?: string | string[];\n  fuzzy?: { maxEdits?: number };\n}\n\ninterface PhraseClause {\n  query: string;\n  path?: string | string[];\n  slop?: number;\n}\n\ninterface WildcardClause {\n  query: string;\n  path: string;\n}\n\ninterface CompoundClause {\n  must?: SearchClause[];\n  should?: SearchClause[];\n  mustNot?: SearchClause[];\n  filter?: SearchClause[];\n}\n\ntype SearchClause = \n  | { text: TextClause }\n  | { phrase: PhraseClause }\n  | { wildcard: WildcardClause }\n  | { compound: CompoundClause };\n\ninterface SearchStage {\n  index?: string;\n  text?: TextClause;\n  phrase?: PhraseClause;\n  wildcard?: WildcardClause;\n  compound?: CompoundClause;\n}\n\ninterface SearchResult {\n  ftsMatch: string;\n  orderBy?: string;\n  params: unknown[];\n}\n\nexport class SearchTranslator {\n  translateSearch(stage: SearchStage, collectionName: string): SearchResult {\n    if (stage.compound) {\n      return this.translateCompound(stage.compound);\n    }\n    if (stage.text) {\n      return { ftsMatch: this.translateText(stage.text), params: [] };\n    }\n    if (stage.phrase) {\n      return { ftsMatch: this.translatePhrase(stage.phrase), params: [] };\n    }\n    if (stage.wildcard) {\n      return { ftsMatch: this.translateWildcard(stage.wildcard), params: [] };\n    }\n    throw new Error('Invalid \\$search stage');\n  }\n\n  private translateText(clause: TextClause): string {\n    const terms = clause.query.split(/\\\\s+/);\n    const prefix = clause.path ? \\`\\${clause.path}:\\` : '';\n    return terms.map(t =\u003e \\`\\${prefix}\\${this.escape(t)}\\`).join(' ');\n  }\n\n  private translatePhrase(clause: PhraseClause): string {\n    const prefix = clause.path ? \\`\\${clause.path}:\\` : '';\n    return \\`\\${prefix}\"\\${this.escape(clause.query)}\"\\`;\n  }\n\n  private translateWildcard(clause: WildcardClause): string {\n    return \\`\\${clause.path}:\\${clause.query}\\`;\n  }\n\n  private translateCompound(compound: CompoundClause): SearchResult {\n    const parts: string[] = [];\n    \n    if (compound.must?.length) {\n      const mustParts = compound.must.map(c =\u003e this.clauseToFTS5(c));\n      parts.push(\\`(\\${mustParts.join(' AND ')})\\`);\n    }\n    \n    if (compound.should?.length) {\n      const shouldParts = compound.should.map(c =\u003e this.clauseToFTS5(c));\n      parts.push(\\`(\\${shouldParts.join(' OR ')})\\`);\n    }\n    \n    if (compound.mustNot?.length) {\n      const notParts = compound.mustNot.map(c =\u003e \\`NOT \\${this.clauseToFTS5(c)}\\`);\n      parts.push(notParts.join(' AND '));\n    }\n    \n    return {\n      ftsMatch: parts.join(' AND '),\n      params: []\n    };\n  }\n\n  private clauseToFTS5(clause: SearchClause): string {\n    if ('text' in clause) return this.translateText(clause.text);\n    if ('phrase' in clause) return this.translatePhrase(clause.phrase);\n    if ('wildcard' in clause) return this.translateWildcard(clause.wildcard);\n    if ('compound' in clause) return \\`(\\${this.translateCompound(clause.compound).ftsMatch})\\`;\n    throw new Error('Unknown clause type');\n  }\n\n  private escape(text: string): string {\n    return text.replace(/[\"\\\\\\\\]/g, '\\\\\\\\$\u0026');\n  }\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:34.536676-06:00","updated_at":"2026-01-04T14:26:47.086571-06:00","closed_at":"2026-01-04T14:26:47.086571-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.2.2","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:04:34.538079-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.2","depends_on_id":"mondodb-txn.2.1","type":"blocks","created_at":"2026-01-04T14:06:40.26897-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.3","title":"RED: $search aggregation stage integration","description":"## TDD Phase: RED\n\n### Test File: `test/unit/search/aggregation-integration.test.ts`\n\n```typescript\ndescribe('\\$search in aggregation pipeline', () =\u003e {\n  it('should execute basic text search', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: { text: { query: 'machine learning', path: 'content' } } }\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n\n  it('should execute compound search', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: {\n        compound: {\n          must: [{ text: { query: 'AI', path: 'title' } }],\n          should: [{ phrase: { query: 'deep learning', path: 'content' } }]\n        }\n      }}\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n\n  it('should project searchScore via \\$meta', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: { text: { query: 'test' } } },\n      { \\$project: { title: 1, score: { \\$meta: 'searchScore' } } }\n    ]).toArray();\n    \n    expect(results[0]).toHaveProperty('score');\n  });\n\n  it('should support highlight in \\$search', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: { \n        text: { query: 'machine' },\n        highlight: { path: 'content' }\n      }},\n      { \\$project: { \n        title: 1, \n        highlights: { \\$meta: 'searchHighlights' } \n      }}\n    ]).toArray();\n    \n    expect(results[0].highlights).toBeDefined();\n  });\n});\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:50.987458-06:00","updated_at":"2026-01-04T14:29:57.206325-06:00","closed_at":"2026-01-04T14:29:57.206325-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-txn.2.3","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:04:50.988206-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.3","depends_on_id":"mondodb-txn.2.2","type":"blocks","created_at":"2026-01-04T14:07:15.407305-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.4","title":"GREEN: Implement $search stage in aggregation","description":"## TDD Phase: GREEN\n\n### Modify: `src/translator/aggregation-translator.ts`\n\nAdd \\$search stage handling:\n\n```typescript\ncase '\\$search':\n  return this.translateSearchStage(stageValue, collectionName, context);\n\nprivate translateSearchStage(\n  stage: SearchStage,\n  collectionName: string,\n  context: TranslationContext\n): StageResult {\n  const searchResult = this.searchTranslator.translateSearch(stage, collectionName);\n  \n  // Use FTS5 table\n  const ftsTable = \\`\\${collectionName}_fts\\`;\n  \n  return {\n    selectClause: \\`d.*, fts.rank as __searchScore\\`,\n    fromClause: \\`\\${ftsTable} fts JOIN documents d ON d.id = fts.rowid\\`,\n    whereClause: \\`\\${ftsTable} MATCH ?\\`,\n    orderByClause: 'fts.rank',\n    params: [searchResult.ftsMatch],\n    transformsShape: false\n  };\n}\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:06.096753-06:00","updated_at":"2026-01-04T14:05:06.096753-06:00","dependencies":[{"issue_id":"mondodb-txn.2.4","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:05:06.097492-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.4","depends_on_id":"mondodb-txn.2.3","type":"blocks","created_at":"2026-01-04T14:06:46.579453-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.5","title":"RED: autocomplete operator with trigram","description":"## TDD Phase: RED\n\n### Test File: `test/unit/search/autocomplete.test.ts`\n\n```typescript\ndescribe('autocomplete operator', () =\u003e {\n  it('should match partial words', async () =\u003e {\n    // Collection has: \"machine learning\", \"machinery\", \"machines\"\n    const results = await collection.aggregate([\n      { \\$search: {\n        autocomplete: { query: 'mach', path: 'title' }\n      }}\n    ]).toArray();\n    \n    expect(results.map(r =\u003e r.title)).toContain('machine learning');\n    expect(results.map(r =\u003e r.title)).toContain('machinery');\n  });\n\n  it('should support multiple autocomplete terms', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: {\n        autocomplete: { query: 'mach learn', path: 'content' }\n      }}\n    ]).toArray();\n    \n    expect(results.length).toBeGreaterThan(0);\n  });\n});\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:21.783021-06:00","updated_at":"2026-01-04T14:05:21.783021-06:00","dependencies":[{"issue_id":"mondodb-txn.2.5","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:05:21.787-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.6","title":"GREEN: Implement autocomplete with trigram/prefix","description":"## TDD Phase: GREEN\n\n### Implementation\n\nAutocomplete can use either:\n1. Prefix queries (word*) - fast but only matches word starts\n2. Trigram tokenizer - matches anywhere in words\n\n```typescript\nprivate translateAutocomplete(clause: AutocompleteClause): string {\n  const terms = clause.query.split(/\\\\s+/);\n  const prefix = clause.path ? \\`\\${clause.path}:\\` : '';\n  \n  // Each term becomes a prefix query\n  return terms.map(t =\u003e \\`\\${prefix}\\${this.escape(t)}*\\`).join(' ');\n}\n```\n\nFor full substring matching, create trigram FTS table:\n```sql\nCREATE VIRTUAL TABLE collection_trigram USING fts5(\n  content,\n  tokenize='trigram'\n);\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:37.111021-06:00","updated_at":"2026-01-04T14:05:37.111021-06:00","dependencies":[{"issue_id":"mondodb-txn.2.6","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:05:37.111858-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.6","depends_on_id":"mondodb-txn.2.5","type":"blocks","created_at":"2026-01-04T14:06:53.093741-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.7","title":"RED: highlight and snippet support","description":"## TDD Phase: RED\n\n### Test File: `test/unit/search/highlights.test.ts`\n\n```typescript\ndescribe('search highlights', () =\u003e {\n  it('should return highlighted matches', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: {\n        text: { query: 'machine' },\n        highlight: { path: 'content' }\n      }},\n      { \\$project: {\n        highlights: { \\$meta: 'searchHighlights' }\n      }}\n    ]).toArray();\n    \n    const highlight = results[0].highlights[0];\n    expect(highlight.path).toBe('content');\n    expect(highlight.texts.some(t =\u003e t.type === 'hit')).toBe(true);\n  });\n\n  it('should return snippets with context', async () =\u003e {\n    const results = await collection.aggregate([\n      { \\$search: { text: { query: 'algorithm' } } },\n      { \\$project: {\n        snippet: { \\$meta: 'searchSnippet' }\n      }}\n    ]).toArray();\n    \n    expect(results[0].snippet).toContain('algorithm');\n    expect(results[0].snippet.length).toBeLessThan(200);\n  });\n});\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:51.851308-06:00","updated_at":"2026-01-04T14:05:51.851308-06:00","dependencies":[{"issue_id":"mondodb-txn.2.7","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:05:51.852007-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.8","title":"GREEN: Implement highlight/snippet using FTS5 functions","description":"## TDD Phase: GREEN\n\n### Implementation\n\nUse FTS5's built-in highlight() and snippet() functions:\n\n```typescript\nprivate translateSearchStageWithHighlights(\n  stage: SearchStage,\n  collectionName: string\n): StageResult {\n  const ftsTable = \\`\\${collectionName}_fts\\`;\n  const highlightPath = stage.highlight?.path;\n  \n  let selectClause = 'd.*, fts.rank as __searchScore';\n  \n  if (highlightPath) {\n    const colIndex = this.getColumnIndex(highlightPath, collectionName);\n    selectClause += \\`, highlight(\\${ftsTable}, \\${colIndex}, '\u003cmark\u003e', '\u003c/mark\u003e') as __highlight_\\${highlightPath}\\`;\n    selectClause += \\`, snippet(\\${ftsTable}, \\${colIndex}, '\u003cmark\u003e', '\u003c/mark\u003e', '...', 32) as __snippet_\\${highlightPath}\\`;\n  }\n  \n  return {\n    selectClause,\n    fromClause: \\`\\${ftsTable} fts JOIN documents d ON d.id = fts.rowid\\`,\n    whereClause: \\`\\${ftsTable} MATCH ?\\`,\n    orderByClause: 'fts.rank',\n    params: [/* ... */]\n  };\n}\n```\n\n### Transform to Atlas-compatible format\n\n```typescript\n// Atlas Search highlight format:\n{\n  path: \"content\",\n  texts: [\n    { type: \"text\", value: \"This is about \" },\n    { type: \"hit\", value: \"machine\" },\n    { type: \"text\", value: \" learning\" }\n  ],\n  score: 1.5\n}\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:06:11.948281-06:00","updated_at":"2026-01-04T14:06:11.948281-06:00","dependencies":[{"issue_id":"mondodb-txn.2.8","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:06:11.949059-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.8","depends_on_id":"mondodb-txn.2.7","type":"blocks","created_at":"2026-01-04T14:06:59.479205-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.2.9","title":"REFACTOR: Search translator optimization","description":"## TDD Phase: REFACTOR\n\n- Optimize compound query generation\n- Add query caching for repeated searches\n- Improve FTS5 query escaping\n- Add support for search explain\n- Consider adding fuzzy matching via spellfix1\n- Add BM25 weight configuration per collection","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:06:24.923723-06:00","updated_at":"2026-01-04T14:06:24.923723-06:00","dependencies":[{"issue_id":"mondodb-txn.2.9","depends_on_id":"mondodb-txn.2","type":"parent-child","created_at":"2026-01-04T14:06:24.924484-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.9","depends_on_id":"mondodb-txn.2.2","type":"blocks","created_at":"2026-01-04T14:07:21.706754-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.9","depends_on_id":"mondodb-txn.2.4","type":"blocks","created_at":"2026-01-04T14:07:27.985863-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.9","depends_on_id":"mondodb-txn.2.6","type":"blocks","created_at":"2026-01-04T14:07:34.62458-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.2.9","depends_on_id":"mondodb-txn.2.8","type":"blocks","created_at":"2026-01-04T14:07:40.898462-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3","title":"Epic: Automatic Embedding Pipeline","description":"# Automatic Embedding Pipeline\n\nZero-configuration document embedding using Workers AI and Cloudflare Vectorize.\n\n## Features\n- Documents automatically embedded on insert/update/delete\n- Smart field filtering (exclude IDs, timestamps by default)  \n- YAML serialization for structured embedding\n- Configurable per-collection settings\n- Default model: @cf/baai/bge-m3 (1024d, multilingual)\n\n## Components\n1. Document Serializer (YAML/JSON/Text)\n2. Smart Field Filter\n3. EmbeddingManager class\n4. Collection configuration via collMod","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:03:49.813258-06:00","updated_at":"2026-01-04T14:03:49.813258-06:00","dependencies":[{"issue_id":"mondodb-txn.3","depends_on_id":"mondodb-txn","type":"parent-child","created_at":"2026-01-04T14:03:49.813988-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3","depends_on_id":"mondodb-txn","type":"blocks","created_at":"2026-01-04T14:09:09.408614-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.1","title":"RED: Document serializer for embedding","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/embedding/document-serializer.test.ts\\`\n\n\\`\\`\\`typescript\nimport { describe, it, expect } from 'vitest';\nimport { serializeForEmbedding } from '../../../src/embedding/document-serializer';\n\ndescribe('serializeForEmbedding', () =\u003e {\n  it('should serialize document to YAML by default', () =\u003e {\n    const doc = { title: 'Hello', content: 'World' };\n    const result = serializeForEmbedding(doc, { serializer: 'yaml' });\n    \n    expect(result).toContain('title: Hello');\n    expect(result).toContain('content: World');\n  });\n\n  it('should serialize to JSON when configured', () =\u003e {\n    const doc = { title: 'Hello' };\n    const result = serializeForEmbedding(doc, { serializer: 'json' });\n    \n    expect(JSON.parse(result)).toEqual({ title: 'Hello' });\n  });\n\n  it('should exclude _id by default', () =\u003e {\n    const doc = { _id: '123', title: 'Hello' };\n    const result = serializeForEmbedding(doc, {});\n    \n    expect(result).not.toContain('_id');\n    expect(result).not.toContain('123');\n  });\n\n  it('should exclude fields ending in Id', () =\u003e {\n    const doc = { userId: '456', authorId: '789', title: 'Hello' };\n    const result = serializeForEmbedding(doc, {});\n    \n    expect(result).not.toContain('userId');\n    expect(result).not.toContain('authorId');\n    expect(result).toContain('title');\n  });\n\n  it('should exclude timestamps by default', () =\u003e {\n    const doc = { \n      title: 'Hello',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      created_at: '2024-01-01',\n      updated_at: '2024-01-01'\n    };\n    const result = serializeForEmbedding(doc, {});\n    \n    expect(result).not.toContain('createdAt');\n    expect(result).not.toContain('updatedAt');\n    expect(result).toContain('title');\n  });\n\n  it('should respect custom exclude patterns', () =\u003e {\n    const doc = { title: 'Hello', secret: 'password', internal: 'data' };\n    const result = serializeForEmbedding(doc, {\n      auto: { exclude: ['secret', 'internal'] }\n    });\n    \n    expect(result).not.toContain('secret');\n    expect(result).not.toContain('internal');\n  });\n\n  it('should handle nested objects up to maxDepth', () =\u003e {\n    const doc = {\n      level1: {\n        level2: {\n          level3: {\n            level4: 'deep'\n          }\n        }\n      }\n    };\n    const result = serializeForEmbedding(doc, { auto: { maxDepth: 2 } });\n    \n    expect(result).toContain('level1');\n    expect(result).toContain('level2');\n    expect(result).not.toContain('level3');\n  });\n\n  it('should extract text from document', () =\u003e {\n    const doc = { title: 'Hello', items: ['a', 'b'], nested: { value: 'c' } };\n    const result = serializeForEmbedding(doc, { serializer: 'text' });\n    \n    expect(result).toContain('Hello');\n    expect(result).toContain('a');\n    expect(result).toContain('b');\n    expect(result).toContain('c');\n  });\n});\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:11.20272-06:00","updated_at":"2026-01-04T14:04:11.20272-06:00","dependencies":[{"issue_id":"mondodb-txn.3.1","depends_on_id":"mondodb-4jw","type":"blocks","created_at":"2026-01-04T14:08:58.768669-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.2","title":"GREEN: Implement document serializer","description":"## TDD Phase: GREEN\n\n### Implementation: \\`src/embedding/document-serializer.ts\\`\n\n\\`\\`\\`typescript\nimport * as yaml from 'yaml';\n\nexport interface EmbeddingConfig {\n  serializer?: 'yaml' | 'json' | 'text';\n  fields?: string[];\n  auto?: {\n    include?: string[];\n    exclude?: string[];\n    maxDepth?: number;\n  };\n  maxTokens?: number;\n}\n\nconst DEFAULT_EXCLUDE = [\n  '_id',\n  /.*Id$/,\n  /.*_id$/,\n  'createdAt', 'updatedAt', \n  'created_at', 'updated_at',\n  'embedding', 'vector', '__v'\n];\n\nexport function serializeForEmbedding(\n  doc: Record\u003cstring, unknown\u003e,\n  config: EmbeddingConfig\n): string {\n  const filtered = filterDocument(doc, config);\n  \n  switch (config.serializer || 'yaml') {\n    case 'yaml':\n      return yaml.stringify(filtered);\n    case 'json':\n      return JSON.stringify(filtered, null, 2);\n    case 'text':\n      return extractText(filtered);\n    default:\n      return yaml.stringify(filtered);\n  }\n}\n\nfunction filterDocument(\n  doc: Record\u003cstring, unknown\u003e,\n  config: EmbeddingConfig,\n  depth = 0\n): Record\u003cstring, unknown\u003e {\n  const maxDepth = config.auto?.maxDepth ?? 3;\n  const excludePatterns = [...DEFAULT_EXCLUDE, ...(config.auto?.exclude || [])];\n  \n  const result: Record\u003cstring, unknown\u003e = {};\n  \n  for (const [key, value] of Object.entries(doc)) {\n    if (shouldExclude(key, excludePatterns)) continue;\n    \n    if (typeof value === 'object' \u0026\u0026 value !== null \u0026\u0026 !Array.isArray(value)) {\n      if (depth \u003c maxDepth) {\n        result[key] = filterDocument(value as Record\u003cstring, unknown\u003e, config, depth + 1);\n      }\n    } else {\n      result[key] = value;\n    }\n  }\n  \n  return result;\n}\n\nfunction shouldExclude(key: string, patterns: (string | RegExp)[]): boolean {\n  return patterns.some(pattern =\u003e {\n    if (typeof pattern === 'string') return key === pattern;\n    return pattern.test(key);\n  });\n}\n\nfunction extractText(obj: unknown, parts: string[] = []): string {\n  if (typeof obj === 'string') {\n    parts.push(obj);\n  } else if (Array.isArray(obj)) {\n    obj.forEach(item =\u003e extractText(item, parts));\n  } else if (typeof obj === 'object' \u0026\u0026 obj !== null) {\n    Object.values(obj).forEach(value =\u003e extractText(value, parts));\n  }\n  return parts.join(' ');\n}\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:04:45.63113-06:00","updated_at":"2026-01-04T14:04:45.63113-06:00","dependencies":[{"issue_id":"mondodb-txn.3.2","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:04:45.632592-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.2","depends_on_id":"mondodb-txn.3.1","type":"blocks","created_at":"2026-01-04T14:04:45.633578-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.3","title":"RED: EmbeddingManager class","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/embedding/embedding-manager.test.ts\\`\n\n\\`\\`\\`typescript\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { EmbeddingManager } from '../../../src/embedding/embedding-manager';\n\ndescribe('EmbeddingManager', () =\u003e {\n  let mockVectorize: any;\n  let mockAI: any;\n  let manager: EmbeddingManager;\n\n  beforeEach(() =\u003e {\n    mockVectorize = {\n      upsert: vi.fn().mockResolvedValue({ mutationId: 'mut-123' }),\n      deleteByIds: vi.fn().mockResolvedValue({ mutationId: 'mut-456' })\n    };\n    mockAI = {\n      run: vi.fn().mockResolvedValue({ data: [[0.1, 0.2, 0.3]] })\n    };\n    manager = new EmbeddingManager(mockVectorize, mockAI, {});\n  });\n\n  describe('embedDocument', () =\u003e {\n    it('should generate embedding and upsert to Vectorize', async () =\u003e {\n      await manager.embedDocument('products', 'doc-1', {\n        title: 'Test Product',\n        description: 'A great product'\n      });\n\n      expect(mockAI.run).toHaveBeenCalledWith(\n        '@cf/baai/bge-m3',\n        expect.objectContaining({ text: expect.any(Array) })\n      );\n      expect(mockVectorize.upsert).toHaveBeenCalledWith([\n        expect.objectContaining({\n          id: 'doc-1',\n          namespace: 'products',\n          values: [0.1, 0.2, 0.3]\n        })\n      ]);\n    });\n\n    it('should extract filterable metadata', async () =\u003e {\n      await manager.embedDocument('products', 'doc-1', {\n        title: 'Product',\n        category: 'electronics',\n        price: 99.99,\n        inStock: true\n      });\n\n      expect(mockVectorize.upsert).toHaveBeenCalledWith([\n        expect.objectContaining({\n          metadata: expect.objectContaining({\n            category: 'electronics',\n            price: 99.99,\n            inStock: true\n          })\n        })\n      ]);\n    });\n  });\n\n  describe('embedDocuments (batch)', () =\u003e {\n    it('should batch embed multiple documents', async () =\u003e {\n      mockAI.run.mockResolvedValue({ \n        data: [[0.1, 0.2], [0.3, 0.4], [0.5, 0.6]] \n      });\n\n      await manager.embedDocuments('products', [\n        { docId: 'doc-1', document: { title: 'Product 1' } },\n        { docId: 'doc-2', document: { title: 'Product 2' } },\n        { docId: 'doc-3', document: { title: 'Product 3' } }\n      ]);\n\n      expect(mockAI.run).toHaveBeenCalledTimes(1);\n      expect(mockVectorize.upsert).toHaveBeenCalledWith(\n        expect.arrayContaining([\n          expect.objectContaining({ id: 'doc-1' }),\n          expect.objectContaining({ id: 'doc-2' }),\n          expect.objectContaining({ id: 'doc-3' })\n        ])\n      );\n    });\n  });\n\n  describe('deleteDocument', () =\u003e {\n    it('should delete from Vectorize index', async () =\u003e {\n      await manager.deleteDocument('products', 'doc-1');\n      \n      expect(mockVectorize.deleteByIds).toHaveBeenCalledWith(['doc-1']);\n    });\n  });\n});\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:07.122759-06:00","updated_at":"2026-01-04T14:05:07.122759-06:00","dependencies":[{"issue_id":"mondodb-txn.3.3","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:05:07.123632-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.3","depends_on_id":"mondodb-txn.3.2","type":"blocks","created_at":"2026-01-04T14:05:07.124522-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.4","title":"GREEN: Implement EmbeddingManager","description":"## TDD Phase: GREEN\n\n### Implementation: \\`src/embedding/embedding-manager.ts\\`\n\n\\`\\`\\`typescript\nimport { serializeForEmbedding, EmbeddingConfig } from './document-serializer';\n\nexport class EmbeddingManager {\n  constructor(\n    private vectorize: VectorizeIndex,\n    private ai: Ai,\n    private config: EmbeddingConfig,\n    private model: string = '@cf/baai/bge-m3'\n  ) {}\n\n  async embedDocument(\n    collectionName: string,\n    docId: string,\n    document: Record\u003cstring, unknown\u003e\n  ): Promise\u003cvoid\u003e {\n    const text = serializeForEmbedding(document, this.config);\n    const response = await this.ai.run(this.model, { text: [text] });\n    const metadata = this.extractMetadata(document);\n\n    await this.vectorize.upsert([{\n      id: docId,\n      namespace: collectionName,\n      values: (response as any).data[0],\n      metadata\n    }]);\n  }\n\n  async embedDocuments(\n    collectionName: string,\n    documents: Array\u003c{ docId: string; document: Record\u003cstring, unknown\u003e }\u003e\n  ): Promise\u003cvoid\u003e {\n    const BATCH_SIZE = 100;\n    \n    for (let i = 0; i \u003c documents.length; i += BATCH_SIZE) {\n      const batch = documents.slice(i, i + BATCH_SIZE);\n      const texts = batch.map(d =\u003e serializeForEmbedding(d.document, this.config));\n      \n      const response = await this.ai.run(this.model, { text: texts });\n      \n      const vectors = batch.map((d, idx) =\u003e ({\n        id: d.docId,\n        namespace: collectionName,\n        values: (response as any).data[idx],\n        metadata: this.extractMetadata(d.document)\n      }));\n      \n      await this.vectorize.upsert(vectors);\n    }\n  }\n\n  async deleteDocument(collectionName: string, docId: string): Promise\u003cvoid\u003e {\n    await this.vectorize.deleteByIds([docId]);\n  }\n\n  private extractMetadata(doc: Record\u003cstring, unknown\u003e): Record\u003cstring, any\u003e {\n    const metadata: Record\u003cstring, any\u003e = {};\n    for (const [key, value] of Object.entries(doc)) {\n      if (this.isFilterableValue(value)) {\n        metadata[key] = value;\n      }\n    }\n    return metadata;\n  }\n\n  private isFilterableValue(value: unknown): boolean {\n    return typeof value === 'string' ||\n           typeof value === 'number' ||\n           typeof value === 'boolean' ||\n           value === null;\n  }\n}\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:25.433835-06:00","updated_at":"2026-01-04T14:05:25.433835-06:00","dependencies":[{"issue_id":"mondodb-txn.3.4","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:05:25.434727-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.4","depends_on_id":"mondodb-txn.3.3","type":"blocks","created_at":"2026-01-04T14:05:25.435651-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.5","title":"RED: Collection insert/update/delete embedding hooks","description":"## TDD Phase: RED\n\n### Test File: \\`test/unit/embedding/collection-hooks.test.ts\\`\n\n\\`\\`\\`typescript\ndescribe('MongoCollection embedding hooks', () =\u003e {\n  it('should embed document on insertOne when embedding enabled', async () =\u003e {\n    const result = await collection.insertOne({ title: 'Test' });\n    \n    // Verify embedding was triggered\n    expect(mockEmbeddingManager.embedDocument).toHaveBeenCalledWith(\n      'testCollection',\n      result.insertedId.toString(),\n      expect.objectContaining({ title: 'Test' })\n    );\n  });\n\n  it('should re-embed on updateOne', async () =\u003e {\n    await collection.updateOne(\n      { _id: 'doc-1' },\n      { \\$set: { title: 'Updated' } }\n    );\n    \n    expect(mockEmbeddingManager.embedDocument).toHaveBeenCalled();\n  });\n\n  it('should delete from index on deleteOne', async () =\u003e {\n    await collection.deleteOne({ _id: 'doc-1' });\n    \n    expect(mockEmbeddingManager.deleteDocument).toHaveBeenCalledWith(\n      'testCollection',\n      'doc-1'\n    );\n  });\n\n  it('should batch embed on insertMany', async () =\u003e {\n    await collection.insertMany([\n      { title: 'Doc 1' },\n      { title: 'Doc 2' }\n    ]);\n    \n    expect(mockEmbeddingManager.embedDocuments).toHaveBeenCalled();\n  });\n\n  it('should not embed when embedding disabled', async () =\u003e {\n    // Disable embedding for collection\n    await collection.insertOne({ title: 'Test' });\n    \n    expect(mockEmbeddingManager.embedDocument).not.toHaveBeenCalled();\n  });\n});\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:05:44.926762-06:00","updated_at":"2026-01-04T14:05:44.926762-06:00","dependencies":[{"issue_id":"mondodb-txn.3.5","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:05:44.927621-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.5","depends_on_id":"mondodb-txn.3.4","type":"blocks","created_at":"2026-01-04T14:05:44.928547-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.6","title":"GREEN: Implement collection embedding hooks","description":"## TDD Phase: GREEN\n\n### Modify: \\`src/client/mongo-collection.ts\\`\n\nAdd embedding hooks to collection operations:\n\n\\`\\`\\`typescript\nasync insertOne(doc: Document): Promise\u003cInsertOneResult\u003e {\n  const result = await this.doInsertOne(doc);\n  \n  if (this.shouldEmbed()) {\n    this.ctx?.waitUntil(\n      this.embeddingManager!.embedDocument(\n        this.name,\n        result.insertedId.toString(),\n        doc\n      )\n    );\n  }\n  \n  return result;\n}\n\nasync updateOne(filter: Document, update: Document): Promise\u003cUpdateResult\u003e {\n  const result = await this.doUpdateOne(filter, update);\n  \n  if (this.shouldEmbed() \u0026\u0026 result.modifiedCount \u003e 0) {\n    const updated = await this.findOne(filter);\n    if (updated) {\n      this.ctx?.waitUntil(\n        this.embeddingManager!.embedDocument(\n          this.name,\n          updated._id.toString(),\n          updated\n        )\n      );\n    }\n  }\n  \n  return result;\n}\n\nasync deleteOne(filter: Document): Promise\u003cDeleteResult\u003e {\n  const doc = await this.findOne(filter, { projection: { _id: 1 } });\n  const result = await this.doDeleteOne(filter);\n  \n  if (this.shouldEmbed() \u0026\u0026 doc \u0026\u0026 result.deletedCount \u003e 0) {\n    this.ctx?.waitUntil(\n      this.embeddingManager!.deleteDocument(this.name, doc._id.toString())\n    );\n  }\n  \n  return result;\n}\n\nprivate shouldEmbed(): boolean {\n  return !!this.embeddingManager \u0026\u0026 \n         this.collectionConfig?.embedding?.enabled === true;\n}\n\\`\\`\\`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:06:03.799657-06:00","updated_at":"2026-01-04T14:06:03.799657-06:00","dependencies":[{"issue_id":"mondodb-txn.3.6","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:06:03.800505-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.6","depends_on_id":"mondodb-txn.3.5","type":"blocks","created_at":"2026-01-04T14:06:03.801415-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-txn.3.7","title":"REFACTOR: Embedding pipeline optimization","description":"## TDD Phase: REFACTOR\n\n- Add embedding queue for high-throughput scenarios\n- Implement retry logic for failed embeddings\n- Add metrics/logging for embedding operations\n- Optimize batch sizes based on document sizes\n- Add configuration validation\n- Consider embedding debouncing for rapid updates","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:06:16.650416-06:00","updated_at":"2026-01-04T14:06:16.650416-06:00","dependencies":[{"issue_id":"mondodb-txn.3.7","depends_on_id":"mondodb-txn.3","type":"parent-child","created_at":"2026-01-04T14:06:16.651165-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-txn.3.7","depends_on_id":"mondodb-txn.3.6","type":"blocks","created_at":"2026-01-04T14:06:16.65234-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-u2m","title":"Epic: $vectorSearch Support","description":"Implement MongoDB-compatible $vectorSearch aggregation stage using Cloudflare Vectorize","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T14:03:47.021745-06:00","updated_at":"2026-01-04T14:03:47.021745-06:00","dependencies":[{"issue_id":"mondodb-u2m","depends_on_id":"mondodb-txn","type":"blocks","created_at":"2026-01-04T14:05:55.707987-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ub7","title":"[GREEN] Cursor modifiers","description":"Implement:\n- limit() → SQL LIMIT clause\n- skip() → SQL OFFSET clause\n- sort() → SQL ORDER BY clause\n- project() → json_object field selection\n- Modifier state management\n- Query construction on iteration start","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:28:41.73939-06:00","updated_at":"2026-01-04T11:58:42.737811-06:00","closed_at":"2026-01-04T11:58:42.737811-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-ub7","depends_on_id":"mondodb-j84","type":"blocks","created_at":"2026-01-04T11:45:40.171044-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ubs1","title":"REFACTOR: DeleteDocument - soft delete option, bulk delete progress","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:10.659584-06:00","updated_at":"2026-01-04T14:24:10.659584-06:00","dependencies":[{"issue_id":"mondodb-ubs1","depends_on_id":"mondodb-mbqq","type":"blocks","created_at":"2026-01-04T14:25:19.046005-06:00","created_by":"daemon"},{"issue_id":"mondodb-ubs1","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:07.206254-06:00","created_by":"daemon"}]}
{"id":"mondodb-ufr","title":"Feature: Index Management","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-04T14:22:51.874167-06:00","updated_at":"2026-01-04T14:22:51.874167-06:00"}
{"id":"mondodb-vhel","title":"REFACTOR: ExportToCode - copy button, syntax highlighting","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T14:24:22.046752-06:00","updated_at":"2026-01-04T14:24:22.046752-06:00","dependencies":[{"issue_id":"mondodb-vhel","depends_on_id":"mondodb-2y22","type":"blocks","created_at":"2026-01-04T14:25:23.344625-06:00","created_by":"daemon"}]}
{"id":"mondodb-vqro","title":"REFACTOR: Query Bar e2e - debounce queries, add explain plan preview","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:44.804361-06:00","updated_at":"2026-01-04T14:23:44.804361-06:00","dependencies":[{"issue_id":"mondodb-vqro","depends_on_id":"mondodb-w8br","type":"blocks","created_at":"2026-01-04T14:24:46.414448-06:00","created_by":"daemon"},{"issue_id":"mondodb-vqro","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:03.25927-06:00","created_by":"daemon"}]}
{"id":"mondodb-vxa2","title":"RED: Insert Document unit tests - JSON editor, validation, templates","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:56.32154-06:00","updated_at":"2026-01-04T14:23:56.32154-06:00","dependencies":[{"issue_id":"mondodb-vxa2","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:01.239921-06:00","created_by":"daemon"}]}
{"id":"mondodb-w2xz","title":"REFACTOR: Connection Panel e2e - improve test stability and coverage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:56.32154-06:00","updated_at":"2026-01-04T14:23:56.32154-06:00","dependencies":[{"issue_id":"mondodb-w2xz","depends_on_id":"mondodb-043g","type":"blocks","created_at":"2026-01-04T14:24:42.473301-06:00","created_by":"daemon"}]}
{"id":"mondodb-w37","title":"Compat tests: findOneAndUpdate, findOneAndDelete, findOneAndReplace","description":"## Task\nCreate compatibility tests for findOneAnd* operations.\n\n## Location\n`test/compatibility/crud/find-and-modify.compat.test.ts`\n\n## Test Cases\n\n### findOneAndUpdate\n1. Returns original document (returnDocument:'before' default)\n2. Returns updated document (returnDocument:'after')\n3. Returns null when no match\n4. upsert:true creates and returns document\n5. Projection applies to returned document\n6. Sort determines which document when multiple match\n7. Update operators work correctly\n\n### findOneAndDelete\n1. Returns deleted document\n2. Returns null when no match\n3. Projection applies to returned document\n4. Sort determines which document to delete\n\n### findOneAndReplace\n1. Returns original document (returnDocument:'before')\n2. Returns new document (returnDocument:'after')\n3. Returns null when no match\n4. upsert:true with returnDocument:'after'\n5. Preserves _id on replace\n\n### Edge Cases\n1. Empty projection behavior\n2. Sort with ties\n3. Concurrent modification behavior","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:41:03.854575-06:00","updated_at":"2026-01-04T14:14:06.215741-06:00","closed_at":"2026-01-04T14:14:06.215741-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-w37","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:48:04.248948-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-w37","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:48:09.54146-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-w37","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:48:14.826413-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-w8br","title":"GREEN: Wire QueryBar to find() with filter/projection/sort/limit","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:38.64484-06:00","updated_at":"2026-01-04T14:23:38.64484-06:00","dependencies":[{"issue_id":"mondodb-w8br","depends_on_id":"mondodb-rkj","type":"blocks","created_at":"2026-01-04T14:24:44.699492-06:00","created_by":"daemon"},{"issue_id":"mondodb-w8br","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:02.998413-06:00","created_by":"daemon"}]}
{"id":"mondodb-wic","title":"[REFACTOR] MongoClient connection","description":"Refactor:\n- Connection pooling support\n- Lazy connection initialization\n- Reconnection logic\n- Error handling improvements","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:24:31.165355-06:00","updated_at":"2026-01-04T12:01:28.033351-06:00","closed_at":"2026-01-04T12:01:28.033351-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-wic","depends_on_id":"mondodb-qow","type":"blocks","created_at":"2026-01-04T11:41:41.701268-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-wkup","title":"REFACTOR: CRUD e2e - optimistic updates, conflict resolution","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:20.798616-06:00","updated_at":"2026-01-04T14:24:20.798616-06:00","dependencies":[{"issue_id":"mondodb-wkup","depends_on_id":"mondodb-y3hh","type":"blocks","created_at":"2026-01-04T14:25:21.911724-06:00","created_by":"daemon"},{"issue_id":"mondodb-wkup","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:19.8252-06:00","created_by":"daemon"}]}
{"id":"mondodb-wnf3","title":"REFACTOR: Document List e2e - infinite scroll, prefetching","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:56.243567-06:00","updated_at":"2026-01-04T14:23:56.243567-06:00","dependencies":[{"issue_id":"mondodb-wnf3","depends_on_id":"mondodb-13o","type":"parent-child","created_at":"2026-01-04T14:24:45.661052-06:00","created_by":"daemon"},{"issue_id":"mondodb-wnf3","depends_on_id":"mondodb-adfs","type":"blocks","created_at":"2026-01-04T14:24:59.817243-06:00","created_by":"daemon"}]}
{"id":"mondodb-wpv4","title":"RED: Drop Index unit tests - confirmation, impact warning","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:54.418882-06:00","updated_at":"2026-01-04T14:23:54.418882-06:00"}
{"id":"mondodb-wvg","title":"REFACTOR: DatabaseBrowser - virtualize tree, memoize nodes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:22.990909-06:00","updated_at":"2026-01-04T14:23:22.990909-06:00","dependencies":[{"issue_id":"mondodb-wvg","depends_on_id":"mondodb-cj9","type":"blocks","created_at":"2026-01-04T14:24:25.310093-06:00","created_by":"daemon"},{"issue_id":"mondodb-wvg","depends_on_id":"mondodb-7la","type":"parent-child","created_at":"2026-01-04T14:24:44.856617-06:00","created_by":"daemon"}]}
{"id":"mondodb-wyi","title":"GREEN: Implement StagePalette with @dnd-kit drag source","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:31.774821-06:00","updated_at":"2026-01-04T14:23:31.774821-06:00","dependencies":[{"issue_id":"mondodb-wyi","depends_on_id":"mondodb-50p","type":"blocks","created_at":"2026-01-04T14:25:02.695432-06:00","created_by":"daemon"}]}
{"id":"mondodb-xnd6","title":"RED: Pipeline Canvas unit tests - drop zones, reorder, delete stages","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:38.210797-06:00","updated_at":"2026-01-04T14:23:38.210797-06:00","dependencies":[{"issue_id":"mondodb-xnd6","depends_on_id":"mondodb-p6z","type":"parent-child","created_at":"2026-01-04T14:25:37.645186-06:00","created_by":"daemon"}]}
{"id":"mondodb-xoo","title":"Compat tests: Field update operators","description":"## Task\nCreate compatibility tests for field update operators.\n\n## Location\n`test/compatibility/update-operators/field.compat.test.ts`\n\n## Operators\n- $set - Set field value\n- $unset - Remove field\n- $inc - Increment\n- $mul - Multiply\n- $min - Set if less than\n- $max - Set if greater than\n- $rename - Rename field\n- $currentDate - Set to current date\n\n## Test Cases\n\n### $set\n1. Set existing field\n2. Set new field\n3. Set nested field (creates intermediates)\n4. Set array element by index\n5. Set to null\n6. Set to empty object/array\n\n### $unset\n1. Remove existing field\n2. Remove non-existent field (no error)\n3. Remove nested field\n4. Remove array element (leaves null!)\n\n### $inc\n1. Increment existing number\n2. Increment non-existent field (creates with value)\n3. Negative increment (decrement)\n4. Increment non-numeric field (error?)\n5. Increment by float\n\n### $mul\n1. Multiply existing number\n2. Multiply non-existent field (creates as 0)\n3. Multiply by 0\n4. Multiply by negative\n\n### $min/$max\n1. Update if new value is less/greater\n2. No update if condition not met\n3. Create field if doesn't exist\n4. Compare with null\n\n### $rename\n1. Rename existing field\n2. Rename to nested path\n3. Rename non-existent field (no error)\n\n### $currentDate\n1. Set as Date type\n2. Set as timestamp type\n3. Create field if doesn't exist","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:43:01.0836-06:00","updated_at":"2026-01-04T14:14:06.21781-06:00","closed_at":"2026-01-04T14:14:06.21781-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-xoo","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:49:49.480109-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-xoo","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:49:54.765724-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-xoo","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:50:00.049025-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-xvn8","title":"GREEN: Wire Index components to createIndex/dropIndex/listIndexes RPC","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:24:06.792028-06:00","updated_at":"2026-01-04T14:24:06.792028-06:00","dependencies":[{"issue_id":"mondodb-xvn8","depends_on_id":"mondodb-8pry","type":"blocks","created_at":"2026-01-04T14:25:11.747496-06:00","created_by":"daemon"}]}
{"id":"mondodb-xwu9","title":"RED: Query History unit tests - storage, recall, favorites","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:56.307546-06:00","updated_at":"2026-01-04T14:23:56.307546-06:00","dependencies":[{"issue_id":"mondodb-xwu9","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:05.183861-06:00","created_by":"daemon"}]}
{"id":"mondodb-xyt","title":"[REFACTOR] Aggregation pipeline stages","description":"Refactor:\n- Stage optimization passes\n- Push down predicates\n- Combine adjacent stages\n- Memory-bounded aggregation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:38:12.412175-06:00","updated_at":"2026-01-04T12:03:16.720354-06:00","closed_at":"2026-01-04T12:03:16.720354-06:00","close_reason":"Closed"}
{"id":"mondodb-y3hh","title":"GREEN: Wire all CRUD components to mondodb RPC endpoints","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:24:19.320112-06:00","updated_at":"2026-01-04T14:24:19.320112-06:00","dependencies":[{"issue_id":"mondodb-y3hh","depends_on_id":"mondodb-hyvn","type":"blocks","created_at":"2026-01-04T14:25:20.122601-06:00","created_by":"daemon"},{"issue_id":"mondodb-y3hh","depends_on_id":"mondodb-3ib","type":"parent-child","created_at":"2026-01-04T14:26:18.364456-06:00","created_by":"daemon"}]}
{"id":"mondodb-ypw","title":"[GREEN] ObjectId generation","description":"Implement:\n- 12-byte ObjectId: 4-byte timestamp + 5-byte random + 3-byte counter\n- Hex encoding to 24 characters\n- ObjectId.createFromHexString()\n- ObjectId.getTimestamp()\n- Comparison operators","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-04T11:15:42.197263-06:00","updated_at":"2026-01-04T11:54:25.868351-06:00","closed_at":"2026-01-04T11:54:25.868351-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-ypw","depends_on_id":"mondodb-83k","type":"blocks","created_at":"2026-01-04T11:16:39.852146-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-z2s","title":"[GREEN] Array update operators","description":"Implement:\n- translateArrayUpdate() for $push, $pull, $addToSet, $pop\n- Handle $each and $slice modifiers\n- Use json_group_array for complex operations\n- Subquery-based pull logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:23:43.575335-06:00","updated_at":"2026-01-04T11:59:48.989994-06:00","closed_at":"2026-01-04T11:59:48.989994-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-z2s","depends_on_id":"mondodb-iua","type":"blocks","created_at":"2026-01-04T11:41:20.313133-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-ziw","title":"Compat tests: deleteOne and deleteMany","description":"## Task\nCreate compatibility tests for delete operations.\n\n## Location\n`test/compatibility/crud/delete.compat.test.ts`\n\n## Test Cases\n\n### deleteOne\n1. Delete existing document - verify DeleteResult structure\n2. deletedCount is 1 when document deleted\n3. deletedCount is 0 when no match\n4. Filter matches multiple - only deletes first\n5. Delete by _id\n6. Delete with complex filter\n\n### deleteMany\n1. Deletes all matching documents\n2. deletedCount equals number deleted\n3. Empty filter {} deletes all documents\n4. No matches - deletedCount is 0\n\n### Edge Cases\n1. Delete from empty collection\n2. Delete with null filter value\n3. Delete with nested field filter\n\n### Return Value Structure\n```typescript\ninterface DeleteResult {\n  acknowledged: boolean\n  deletedCount: number\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T13:40:33.094958-06:00","updated_at":"2026-01-04T14:08:43.753835-06:00","closed_at":"2026-01-04T14:08:43.753835-06:00","close_reason":"Closed","dependencies":[{"issue_id":"mondodb-ziw","depends_on_id":"mondodb-cny","type":"blocks","created_at":"2026-01-04T13:47:32.515876-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-ziw","depends_on_id":"mondodb-5c7","type":"blocks","created_at":"2026-01-04T13:47:37.805863-06:00","created_by":"nathanclevenger"},{"issue_id":"mondodb-ziw","depends_on_id":"mondodb-kv0","type":"blocks","created_at":"2026-01-04T13:47:43.092356-06:00","created_by":"nathanclevenger"}]}
{"id":"mondodb-zsw","title":"GREEN: Implement QueryBar with CodeMirror MongoDB mode","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T14:23:12.744245-06:00","updated_at":"2026-01-04T14:23:12.744245-06:00","dependencies":[{"issue_id":"mondodb-zsw","depends_on_id":"mondodb-7ty","type":"blocks","created_at":"2026-01-04T14:24:41.916001-06:00","created_by":"daemon"},{"issue_id":"mondodb-zsw","depends_on_id":"mondodb-ajr","type":"parent-child","created_at":"2026-01-04T14:25:00.289233-06:00","created_by":"daemon"}]}
{"id":"mondodb-zy1","title":"REFACTOR: IndexList - add usage stats, size estimates","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T14:23:17.467143-06:00","updated_at":"2026-01-04T14:23:17.467143-06:00","dependencies":[{"issue_id":"mondodb-zy1","depends_on_id":"mondodb-eiz","type":"blocks","created_at":"2026-01-04T14:25:05.033356-06:00","created_by":"daemon"}]}
