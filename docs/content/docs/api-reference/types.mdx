---
title: Types
description: TypeScript interfaces and type definitions for MondoDB
---

# Types

MondoDB provides comprehensive TypeScript types for all operations. This reference documents the core types, interfaces, and helper types.

## Import

```typescript
import {
  ObjectId,
  Document,
  Filter,
  UpdateFilter,
  InsertOneResult,
  InsertManyResult,
  UpdateResult,
  DeleteResult,
  // ... other types
} from 'mondodb'
```

---

## ObjectId

MongoDB-compatible 12-byte unique identifier.

### Structure

```
4 bytes: Unix timestamp (seconds since epoch)
5 bytes: Random value (generated once per process)
3 bytes: Incrementing counter
```

### Constructor

```typescript
new ObjectId(input?: string | Uint8Array | ObjectId | null)
```

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `input` | `string \| Uint8Array \| ObjectId \| null` | Optional: hex string, bytes, or existing ObjectId. If omitted, generates a new unique ObjectId. |

**Throws:** `TypeError` if input is invalid.

### Properties

#### _bsontype

```typescript
readonly _bsontype: 'ObjectId'
```

BSON type identifier for serialization compatibility.

#### id

```typescript
readonly id: Uint8Array
```

The raw 12-byte buffer containing the ObjectId data.

### Instance Methods

#### getTimestamp()

```typescript
getTimestamp(): Date
```

Get the timestamp component as a Date object.

**Example:**
```typescript
const id = new ObjectId()
console.log(id.getTimestamp()) // Date when ObjectId was created
```

#### getGenerationTime()

```typescript
getGenerationTime(): number
```

Get the generation time as Unix timestamp (seconds).

#### toHexString()

```typescript
toHexString(): string
```

Return the ObjectId as a 24-character lowercase hex string.

#### toString()

```typescript
toString(): string
```

String representation (same as `toHexString()`).

#### toJSON()

```typescript
toJSON(): string
```

JSON serialization (returns hex string).

#### equals()

```typescript
equals(other: ObjectId | string | null | undefined): boolean
```

Compare this ObjectId to another value for equality.

**Example:**
```typescript
const id1 = new ObjectId()
const id2 = new ObjectId(id1.toHexString())

id1.equals(id2) // true
id1.equals('507f1f77bcf86cd799439011') // true or false
```

### Static Methods

#### createFromHexString()

```typescript
static createFromHexString(hexString: string): ObjectId
```

Create an ObjectId from a 24-character hex string.

**Throws:** `TypeError` if hexString is invalid.

#### createFromTime()

```typescript
static createFromTime(time: number): ObjectId
```

Create an ObjectId with a specific timestamp. Useful for range queries on `_id` fields.

**Example:**
```typescript
// Find documents created after a specific time
const startId = ObjectId.createFromTime(Math.floor(Date.now() / 1000) - 3600)
const recentDocs = await collection.find({
  _id: { $gte: startId }
}).toArray()
```

#### generate()

```typescript
static generate(): ObjectId
```

Generate a new ObjectId (factory method, equivalent to `new ObjectId()`).

#### isValid()

```typescript
static isValid(value: unknown): value is ObjectId | string
```

Check if a value is a valid ObjectId or ObjectId hex string.

**Example:**
```typescript
ObjectId.isValid(new ObjectId()) // true
ObjectId.isValid('507f1f77bcf86cd799439011') // true
ObjectId.isValid('invalid') // false
```

---

## Document Types

### Document

Base document type representing any MongoDB document.

```typescript
type Document = Record<string, unknown>
```

### WithId

Document with required `_id` field.

```typescript
type WithId<T> = T & { _id: ObjectId | string }
```

### OptionalId

Document with optional `_id` field (for inserts).

```typescript
type OptionalId<T> = T & { _id?: ObjectId | string }
```

---

## Query Types

### Filter

Query filter for finding documents.

```typescript
type Filter<T> = {
  [P in keyof T]?: T[P] | FilterOperators<T[P]>
} & RootFilterOperators<T>
```

### FilterOperators

Comparison and element operators for individual fields.

```typescript
interface FilterOperators<T> {
  // Comparison
  $eq?: T
  $ne?: T
  $gt?: T
  $gte?: T
  $lt?: T
  $lte?: T
  $in?: T[]
  $nin?: T[]

  // Element
  $exists?: boolean
  $type?: string | number

  // String
  $regex?: string | RegExp
  $options?: string

  // Logical (field-level)
  $not?: FilterOperators<T>

  // Array
  $elemMatch?: Filter<T extends (infer U)[] ? U : never>
  $size?: number
  $all?: T extends (infer U)[] ? U[] : never
}
```

### RootFilterOperators

Root-level query operators.

```typescript
interface RootFilterOperators<T> {
  // Logical
  $and?: Filter<T>[]
  $or?: Filter<T>[]
  $nor?: Filter<T>[]

  // Text search
  $text?: {
    $search: string
    $language?: string
    $caseSensitive?: boolean
    $diacriticSensitive?: boolean
  }

  // JavaScript expression
  $where?: string | ((this: T) => boolean)

  // Expression
  $expr?: Record<string, unknown>
}
```

---

## Update Types

### UpdateFilter

Update operations for modifying documents.

```typescript
interface UpdateFilter<T> {
  // Field operations
  $set?: Partial<T>
  $unset?: { [P in keyof T]?: '' | 1 | true }
  $setOnInsert?: Partial<T>

  // Numeric operations
  $inc?: { [P in keyof T]?: number }
  $mul?: { [P in keyof T]?: number }
  $min?: Partial<T>
  $max?: Partial<T>

  // Field management
  $rename?: { [key: string]: string }
  $currentDate?: {
    [P in keyof T]?: true | { $type: 'date' | 'timestamp' }
  }

  // Array operations
  $push?: PushOperator<T>
  $pull?: PullOperator<T>
  $addToSet?: AddToSetOperator<T>
  $pop?: { [P in keyof T]?: 1 | -1 }
  $pullAll?: { [P in keyof T]?: unknown[] }
}
```

### PushOperator

Push to array with optional modifiers.

```typescript
type PushOperator<T> = {
  [P in keyof T]?: T[P] extends (infer U)[]
    ? U | {
        $each: U[]
        $slice?: number
        $sort?: 1 | -1 | Record<string, 1 | -1>
        $position?: number
      }
    : never
}
```

### AddToSetOperator

Add unique elements to array.

```typescript
type AddToSetOperator<T> = {
  [P in keyof T]?: T[P] extends (infer U)[]
    ? U | { $each: U[] }
    : never
}
```

---

## Result Types

### InsertOneResult

Result of `insertOne()` operation.

```typescript
interface InsertOneResult {
  /** Whether the operation was acknowledged */
  acknowledged: boolean

  /** The _id of the inserted document */
  insertedId: ObjectId | string
}
```

### InsertManyResult

Result of `insertMany()` operation.

```typescript
interface InsertManyResult {
  /** Whether the operation was acknowledged */
  acknowledged: boolean

  /** Number of documents inserted */
  insertedCount: number

  /** Map of array index to inserted _id */
  insertedIds: { [key: number]: ObjectId | string }
}
```

### UpdateResult

Result of `updateOne()`, `updateMany()`, or `replaceOne()` operations.

```typescript
interface UpdateResult {
  /** Whether the operation was acknowledged */
  acknowledged: boolean

  /** Number of documents that matched the filter */
  matchedCount: number

  /** Number of documents that were modified */
  modifiedCount: number

  /** Number of documents that were upserted */
  upsertedCount: number

  /** The _id of the upserted document (if upserted) */
  upsertedId?: ObjectId | string
}
```

### DeleteResult

Result of `deleteOne()` or `deleteMany()` operations.

```typescript
interface DeleteResult {
  /** Whether the operation was acknowledged */
  acknowledged: boolean

  /** Number of documents deleted */
  deletedCount: number
}
```

---

## Options Types

### FindOptions

Options for find operations.

```typescript
interface FindOptions<T> {
  /** Fields to include or exclude */
  projection?: Record<string, 0 | 1>

  /** Sort specification */
  sort?: Record<string, 1 | -1>

  /** Maximum number of documents to return */
  limit?: number

  /** Number of documents to skip */
  skip?: number

  /** Batch size hint for the cursor */
  batchSize?: number

  /** Maximum time in milliseconds */
  maxTimeMS?: number

  /** Session for transaction support */
  session?: ClientSession
}
```

### UpdateOptions

Options for update operations.

```typescript
interface UpdateOptions {
  /** If true, create document if it doesn't exist */
  upsert?: boolean

  /** Array filters for updating nested arrays */
  arrayFilters?: object[]

  /** Index hint for the query */
  hint?: string | object

  /** Collation options */
  collation?: CollationOptions

  /** Session for transaction support */
  session?: ClientSession
}
```

### ReplaceOptions

Options for replace operations.

```typescript
interface ReplaceOptions {
  /** If true, create document if it doesn't exist */
  upsert?: boolean

  /** Index hint for the query */
  hint?: string | object

  /** Session for transaction support */
  session?: ClientSession
}
```

### DeleteOptions

Options for delete operations.

```typescript
interface DeleteOptions {
  /** Index hint for the query */
  hint?: string | object

  /** Session for transaction support */
  session?: ClientSession
}
```

### FindOneAndUpdateOptions

Options for findOneAndUpdate operation.

```typescript
interface FindOneAndUpdateOptions {
  /** Fields to include or exclude */
  projection?: Record<string, 0 | 1>

  /** Sort specification for selecting which document to update */
  sort?: Record<string, 1 | -1>

  /** If true, create document if it doesn't exist */
  upsert?: boolean

  /** Return the document 'before' or 'after' update */
  returnDocument?: 'before' | 'after'

  /** Array filters for updating nested arrays */
  arrayFilters?: object[]

  /** Session for transaction support */
  session?: ClientSession
}
```

### FindOneAndDeleteOptions

Options for findOneAndDelete operation.

```typescript
interface FindOneAndDeleteOptions {
  /** Fields to include or exclude */
  projection?: Record<string, 0 | 1>

  /** Sort specification for selecting which document to delete */
  sort?: Record<string, 1 | -1>

  /** Session for transaction support */
  session?: ClientSession
}
```

### AggregateOptions

Options for aggregation operations.

```typescript
interface AggregateOptions {
  /** Allow disk use for large aggregations */
  allowDiskUse?: boolean

  /** Maximum time in milliseconds */
  maxTimeMS?: number

  /** Bypass document validation */
  bypassDocumentValidation?: boolean

  /** Read concern level */
  readConcern?: { level: string }

  /** Collation options */
  collation?: CollationOptions

  /** Index hint */
  hint?: string | Document

  /** Comment for logging/profiling */
  comment?: string

  /** Variables accessible in pipeline */
  let?: Document

  /** Session for transaction support */
  session?: ClientSession
}
```

---

## Collation

### CollationOptions

Options for language-specific string comparison.

```typescript
interface CollationOptions {
  /** The ICU locale */
  locale: string

  /** Case sensitivity level */
  caseLevel?: boolean

  /** Case ordering (upper or lower first) */
  caseFirst?: 'upper' | 'lower' | 'off'

  /** Comparison strength */
  strength?: 1 | 2 | 3 | 4 | 5

  /** Numeric ordering */
  numericOrdering?: boolean

  /** Alternate handling */
  alternate?: 'non-ignorable' | 'shifted'

  /** Maximum variable for alternate handling */
  maxVariable?: 'punct' | 'space'

  /** Backwards comparison */
  backwards?: boolean
}
```

---

## Index Types

### IndexSpecification

Specification for creating an index.

```typescript
interface IndexSpecification {
  /** Index keys and their sort order or type */
  key: {
    [key: string]: 1 | -1 | 'text' | '2dsphere' | '2d' | 'hashed'
  }

  /** Index name */
  name?: string

  /** Unique constraint */
  unique?: boolean

  /** Sparse index */
  sparse?: boolean

  /** Build in background */
  background?: boolean

  /** TTL index expiration time in seconds */
  expireAfterSeconds?: number

  /** Partial filter expression */
  partialFilterExpression?: Filter<Document>

  /** Collation options */
  collation?: CollationOptions

  /** Index weights for text indexes */
  weights?: Record<string, number>

  /** Default language for text indexes */
  default_language?: string

  /** Language override field */
  language_override?: string
}
```

---

## Bulk Write Types

### BulkWriteOperation

Union type of all bulk write operation models.

```typescript
type BulkWriteOperation<T extends Document = Document> =
  | InsertOneModel<T>
  | UpdateOneModel<T>
  | UpdateManyModel<T>
  | ReplaceOneModel<T>
  | DeleteOneModel
  | DeleteManyModel
```

### InsertOneModel

```typescript
interface InsertOneModel<T extends Document = Document> {
  insertOne: {
    document: T
  }
}
```

### UpdateOneModel

```typescript
interface UpdateOneModel<T extends Document = Document> {
  updateOne: {
    filter: Filter<T>
    update: UpdateFilter<T>
    upsert?: boolean
    arrayFilters?: object[]
    hint?: string | object
    collation?: CollationOptions
  }
}
```

### UpdateManyModel

```typescript
interface UpdateManyModel<T extends Document = Document> {
  updateMany: {
    filter: Filter<T>
    update: UpdateFilter<T>
    upsert?: boolean
    arrayFilters?: object[]
    hint?: string | object
    collation?: CollationOptions
  }
}
```

### ReplaceOneModel

```typescript
interface ReplaceOneModel<T extends Document = Document> {
  replaceOne: {
    filter: Filter<T>
    replacement: T
    upsert?: boolean
    hint?: string | object
    collation?: CollationOptions
  }
}
```

### DeleteOneModel

```typescript
interface DeleteOneModel {
  deleteOne: {
    filter: Filter<Document>
    hint?: string | object
    collation?: CollationOptions
  }
}
```

### DeleteManyModel

```typescript
interface DeleteManyModel {
  deleteMany: {
    filter: Filter<Document>
    hint?: string | object
    collation?: CollationOptions
  }
}
```

### BulkWriteResult

```typescript
interface BulkWriteResult {
  acknowledged: boolean
  insertedCount: number
  matchedCount: number
  modifiedCount: number
  deletedCount: number
  upsertedCount: number
  insertedIds: Record<number, ObjectId | string>
  upsertedIds: Record<number, ObjectId | string>
}
```

### BulkWriteOptions

```typescript
interface BulkWriteOptions {
  /** Execute operations in order (default: true) */
  ordered?: boolean

  /** Bypass document validation */
  bypassDocumentValidation?: boolean

  /** Comment for the operation */
  comment?: string | object

  /** Variables for $let expressions */
  let?: Document
}
```

---

## Change Stream Types

### ChangeEvent

A change event emitted by change streams.

```typescript
interface ChangeEvent<TDocument = Document> {
  /** Resume token for this event */
  _id: ResumeToken

  /** Type of operation */
  operationType: OperationType

  /** Timestamp when change occurred */
  clusterTime: Date

  /** Database and collection namespace */
  ns: ChangeStreamNamespace

  /** The _id of the affected document */
  documentKey: { _id: ObjectId }

  /** Full document (for insert, replace, or with fullDocument option) */
  fullDocument?: TDocument

  /** Description of changes (for update operations) */
  updateDescription?: UpdateDescription
}
```

### OperationType

```typescript
type OperationType =
  | 'insert'
  | 'update'
  | 'replace'
  | 'delete'
  | 'drop'
  | 'invalidate'
```

### ResumeToken

```typescript
interface ResumeToken {
  _data: string
}
```

### ChangeStreamOptions

```typescript
interface ChangeStreamOptions {
  /** How to return the full document for updates */
  fullDocument?: 'default' | 'updateLookup' | 'whenAvailable' | 'required'

  /** Resume after this token */
  resumeAfter?: ResumeToken

  /** Start after this token */
  startAfter?: ResumeToken

  /** Start at operation time */
  startAtOperationTime?: Date

  /** Max wait time for events (ms) */
  maxAwaitTimeMS?: number

  /** Batch size for fetching events */
  batchSize?: number
}
```

---

## Session Types

### ClientSession

Session for transaction support.

```typescript
interface ClientSession {
  /** Unique session ID */
  id: string

  /** Whether session has active transaction */
  inTransaction: boolean

  /** Start a new transaction */
  startTransaction(options?: TransactionOptions): void

  /** Commit the current transaction */
  commitTransaction(): Promise<void>

  /** Abort the current transaction */
  abortTransaction(): Promise<void>

  /** End the session */
  endSession(): Promise<void>

  /** Execute callback within a transaction */
  withTransaction<T>(
    fn: (session: ClientSession) => Promise<T>,
    options?: TransactionOptions
  ): Promise<T>
}
```

### TransactionOptions

```typescript
interface TransactionOptions {
  readConcern?: { level: string }
  writeConcern?: WriteConcern
  maxCommitTimeMS?: number
}
```

### WriteConcern

```typescript
interface WriteConcern {
  w?: number | 'majority'
  wtimeoutMS?: number
  journal?: boolean
}
```

---

## Type Utilities

### InferIdType

Infer the type of `_id` from a schema.

```typescript
type InferIdType<T> = T extends { _id: infer U } ? U : ObjectId
```

### StrictFilter

Stricter filter type that requires exact property types.

```typescript
type StrictFilter<T> = {
  [P in keyof T]?: T[P] | StrictFilterOperators<T[P]>
}
```

### KeysOfType

Extract keys of a specific type from an object.

```typescript
type KeysOfType<T, U> = {
  [K in keyof T]: T[K] extends U ? K : never
}[keyof T]
```

---

## Example Usage

### Typed Collection

```typescript
interface User {
  _id?: ObjectId
  name: string
  email: string
  age: number
  tags: string[]
  metadata?: {
    lastLogin: Date
    preferences: Record<string, unknown>
  }
}

const users = db.collection<User>('users')

// TypeScript knows the document shape
const user = await users.findOne({ email: 'john@example.com' })
if (user) {
  console.log(user.name)     // string
  console.log(user.age)      // number
  console.log(user.tags)     // string[]
}

// Type-safe updates
await users.updateOne(
  { email: 'john@example.com' },
  {
    $set: { name: 'John Doe' },          // OK
    $inc: { age: 1 },                     // OK
    $push: { tags: 'premium' },           // OK
    // $inc: { name: 1 }                  // Error! name is string
  }
)
```

### Type-Safe Filters

```typescript
// These are type-checked
await users.find({
  age: { $gte: 18 },
  email: { $regex: '@example.com$' },
  tags: { $in: ['admin', 'moderator'] }
}).toArray()

// Logical operators
await users.find({
  $and: [
    { age: { $gte: 18 } },
    { $or: [
      { tags: 'verified' },
      { email: { $regex: '@company.com$' } }
    ]}
  ]
}).toArray()
```

## Related

- [Collection](/docs/api-reference/collection) - Collection class reference
- [Cursor](/docs/api-reference/cursor) - Cursor class reference
- [MongoClient](/docs/api-reference/client) - MongoClient class reference
